!function(){"use strict";angular.module("POS17",["ngSanitize","ngAnimate","ui.router","chart.js","angular-flot","ui.bootstrap","textAngular","ngFileUpload","ui.footable","restangular","toastr","angularMoment","angularSpinner","ngDialog","ui.select","mgcrea.ngStrap","LocalStorageModule","dibari.angular-ellipsis","angular-jwt","color.picker","ja.qr","angularTreeview","angularFileUpload","dndLists","ngTable"]).constant("API_URL","http://52.64.27.145:5001").constant("API_VERSION","/api/1.0/").config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","RestangularProvider","API_URL","API_VERSION","$provide","localStorageServiceProvider","$compileProvider","uiSelectConfig",function(e,r,t,n,o,a,i,u,s,l,c){t.html5Mode(!1),r.otherwise("/login"),c.resetSearchInput=!0,e.state("main",{url:"/main","abstract":!0,templateUrl:"modules/main.html",controller:"MainCtrl"}),n.interceptors.push("httpInterceptor"),n.interceptors.push("authInterceptor"),u.value("baseURL",a),o.setBaseUrl(a+i),l.debugInfoEnabled(!1)}]).run(["$state","$rootScope","usSpinnerService","AuthFctry","$window","jwtHelper","localStorageService","$location",function(e,r,t,n,o,a,i,u){r.currentUser={},r.$state=e,r.previousState,r.currentState,r.$on("loading:progress",function(){r.productIsLoading=!0}),r.$on("loading:finish",function(){r.productIsLoading=!1}),r.$on("unauthorized",function(){n.setCurrentUser(null),n.setUserToken(null),e.go("login")}),r.goBack=function(){o.history.back()},r.$on("$stateChangeStart",function(e,r,t,o,s){if(n.getCurrentUser()){var l=n.getUserToken();a.isTokenExpired(l)&&(i.remove("user"),i.remove("token"),u.path("/login"))}}),r.$on("$stateChangeSuccess",function(e,t,o,a,i){r.previousState=a.name,r.currentState=t.name,r.currentUser=n.getCurrentUser()})}]).factory("httpInterceptor",["$q","$rootScope",function(e,r){var t=0;return{request:function(n){return 1===++t&&r.$broadcast("loading:progress"),n||e.when(n)},response:function(n){return 0===--t&&r.$broadcast("loading:finish"),n||e.when(n)},responseError:function(n){return 0===--t&&r.$broadcast("loading:finish"),e.reject(n)}}}])}();
!function(){"use strict";function e(e,t,o,n,s,r,i,u){e.profile={},e.activeSub="",t.logoutApp=function(){r.logout().then(function(e){200==e.statusCode&&e.response.success&&o.go("login")})},t.getCurrentUser=function(){r.userprofile().then(function(t){if(200==t.statusCode&&t.response.success){e.profile=t.response.result;var o=JSON.parse(i.get("user"));e.activeSub=o.company_name}else if(400==t.statusCode&&!t.response.success)return void n.error(t.response.msg,"Error")})},t.openSubscription=function(){var e=s.open({animation:!0,templateUrl:"./modules/templates/header.subscription.html",controller:"ModalSubscriptionCtrl",size:"sm"});e.result.then(function(e){var t=JSON.parse(i.get("user"));t.sub_id=e.sub_id,t.company_name=e.company_name,t.subscriptionKey=e.subscriptionKey,i.set("user",JSON.stringify(t)),u(function(){o.go("main.dashboard",null,{reload:!0})},1e3)})},t.getCurrentUser()}function t(e,t,o){e.switchSubscription=function(e){o(function(){t.close(e)},300)},e.cancel=function(){t.dismiss("cancel")}}angular.module("POS17").controller("MainCtrl",e).controller("ModalSubscriptionCtrl",t),e.$inject=["$rootScope","$scope","$state","toastr","$uibModal","AuthFctry","localStorageService","$timeout"],t.$inject=["$scope","$uibModalInstance","$timeout"]}();
!function(){"use strict";function e(e,o,n){e.dtFrom=new Date(n.dateFrom),e.dtTo=new Date(n.dateTo),e.dateOptions={formatYear:"yy",maxDate:new Date(3e3,12,31),minDate:new Date(1800,1,1),startingDay:1},e.popup1={opened:!1},e.popup2={opened:!1},e.openFrom=function(){e.popup1.opened=!0},e.openTo=function(){e.popup2.opened=!0},e.save=function(){o.close({dateFrom:e.dtFrom,dateTo:e.dtTo})},e.cancel=function(){o.dismiss("cancel")}}angular.module("POS17").controller("ModalInstanceCtrl",e),e.$inject=["$scope","$uibModalInstance","dateValue"]}();
!function(){"use strict";function s(s,e,t,r){s.user={},s.login=function(){r.authenticate(s.user).then(function(s){s.success?(r.setUserToken(s.result.token),r.setCurrentUser(JSON.stringify(s.result.user)),t.success(s.msg,"Success"),e.go("main.dashboard")):400===s.statusCode&&!s.response.success&&_.isArray(s.response.result)?_.each(s.response.result,function(s){t.warning(s.msg,"Warning")}):t.error(s.msg,"Error")})}}angular.module("POS17").config(["$stateProvider",function(s){s.state("login",{url:"/login",templateUrl:"modules/login/login.html",controller:"LoginCtrl"})}]).controller("LoginCtrl",s),s.$inject=["$scope","$state","toastr","AuthFctry"]}();
!function(){"use strict";function s(s,o,r,e){s.detail={},s.forgotpass=function(){r.forgotPassword({email:s.detail.email}).then(function(s){if(200==s.statusCode&&s.response.success)e.success(s.response.msg,"Success"),o.reload();else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void e.error(s.response.msg,"Error");_.each(s.response.result,function(s){e.warning(s.msg,"Warning")})}})}}angular.module("POS17").config(["$stateProvider",function(s){s.state("forgot",{url:"/forgotpassword",templateUrl:"modules/forgotpassword/forgotpassword.html",controller:"ForgotPasswordCtrl"})}]).controller("ForgotPasswordCtrl",s),s.$inject=["$scope","$state","AuthFctry","toastr"]}();
!function(){"use strict";function e(e,s,r,o,n){console.log("VerifyCtrl: ",s.hash),e.isVerified=function(){e.response={},o.isVerifiedContact(s.hash).then(function(t){void 0===t?n.go("login"):t.response.success===!0?(r.warning(t.response.msg,"Warning"),e.response=t.response):t.response.success===!1&&o.verifyContact(s.hash).then(function(s){console.log("resp2",s.response),s.response.success&&(e.response=s.response,console.log("$scope.response ",e.response))})})}}function s(e){}angular.module("POS17").config(["$stateProvider",function(e){e.state("verify",{url:"/verify/:hash",templateUrl:"modules/verify/verify.html",controller:"VerifyCtrl"}).state("recovery",{url:"/recovery",templateUrl:"modules/verify/verify.recovery.html"})}]).controller("VerifyCtrl",e).controller("RecoveryCtrl",s),e.$inject=["$scope","$stateParams","toastr","AuthFctry","$state"],s.$inject=["$scope"]}();
!function(){"use strict";function e(e,s,r,n){e.detail={},e.resendVerification=function(){r.resendVerification({email:e.detail.email}).then(function(s){if(200==s.statusCode&&s.response.success)n.success(s.response.msg,"Success"),e.detail.email="";else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void n.error(s.response.msg,"Error");_.each(s.response.result,function(e){n.warning(e.msg,"Warning")})}})}}angular.module("POS17").config(["$stateProvider",function(e){e.state("resend",{url:"/resend",templateUrl:"modules/resend_verify/resend.html",controller:"ResendCtrl"})}]).controller("ResendCtrl",e),e.$inject=["$scope","$state","AuthFctry","toastr"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(t,r){r.state("main.products",{url:"/products/overview",templateUrl:"modules/products/products.html",controller:"productsController"}).state("main.products-add",{url:"/products/:p_id",templateUrl:"modules/products/product.details.html",controller:"productsAEController"}).state("main.products-bundles",{url:"/product-bundles/overview",templateUrl:"modules/products/product-bundles.html",controller:"productBundlesController"}).state("main.products-bundle-add",{url:"/products-bundle/:pb_id",templateUrl:"modules/products/product.bundle.html",controller:"productsBundleController"})}])}();
!function(){"use strict";function s(s,e,t,r,o,a,n,i,u,c,d,l,p,g){s.ptypes=[],s.attributes=[],s.tags=[],s.tagsArr=[],s.details={},s.details.tags=[],s.details.start_date=new Date,s.details.end_date=new Date,s.details.is_published=!1,s.details.is_archived=!1,s.isImageNew=!1,n.getAllProdType().then(function(e){200==e.statusCode&&e.response.success?(s.ptypes=e.response.result,s.details.ptype_id=s.ptypes[0].ptype_id):r.error(e.response.msg,"Error")}),d.getAllTags().then(function(e){200==e.statusCode&&e.response.success?s.tagsArr=e.response.result:r.error(e.response.msg,"Error")}),_.isEmpty(o.p_id)?(s.showPublish=!1,s.showArchive=!1,s.tabprod={product:!0,store:!1,price:!1,category:!1,attribute:!1,variation:!1,ratings:!1,related:!1}):a.getProductDetails(o.p_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details=e.response.result,s.showPublish=1!=s.details.is_published,s.showArchive=0==s.details.is_archived,s.tabprod={product:!0,store:!0,price:!0,category:!0,attribute:!0,variation:!0,ratings:!1,related:!1},s.details.start_date=new Date(s.details.start_date),s.details.end_date=new Date(s.details.end_date),s.details.ptype_id=e.response.result.productType_id,s.details.is_published=s.IntToBoolean(s.details.is_published),s.details.is_archived=s.IntToBoolean(s.details.is_archived),d.getAllProductTags(o.p_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details.tags=e.response.result)}))}),s.tagTransform=function(s){return{tags:s}},s.clearInput=function(s){s.search=""},s.IntToBoolean=function(s){return 1===s},s.BooleanToInt=function(s){return s===!0?1:0},s.removethumb=function(){s.details.img_default=null},s.upload=function(e){s.isImageNew=!0},s.archiveProduct=function(s){a.archiveProduct(s).then(function(s){200==s.statusCode&&s.response.success?(r.success(s.response.msg,"Success"),e.go(e.current,null,{reload:!0})):r.error(s.response.msg,"Error")})},s.publishProduct=function(s){a.publishProduct(s).then(function(s){200==s.statusCode&&s.response.success?(r.success(s.response.msg,"Success"),e.go(e.current,null,{reload:!0})):r.error(s.response.msg,"Error")})},s.deleteProductTags=function(s){o.p_id&&d.deleteProductTag(o.p_id,s.tags_id).then(function(s){return 200==s.statusCode&&s.response.success?void r.success(s.response.msg,"Success"):void r.error(s.response.msg,"Error")})},s.addProduct=function(){s.validate=[],console.log("details: ",s.details),async.waterfall([function(e){o.p_id?a.updateProduct(o.p_id,s.details).then(function(t){200==t.statusCode&&t.response.success?(r.success(t.response.msg,"Success"),e(null,o.p_id),console.log("UPDATE")):(s.validate=t.response.result,_.each(s.validate,function(s){r.warning(t.response.msg,"Error - "+s.msg)}))}):a.saveProduct(s.details).then(function(t){200==t.statusCode&&t.response.success?(r.success(t.response.msg,"Success"),e(null,t.response.result),console.log("SUCCESS")):(s.validate=t.response.result,_.each(s.validate,function(s){r.warning(t.response.msg,"Error - "+s.msg)}))})},function(e,t){var o=1;async.eachSeries(s.details.tags,function(a,n){a.isTag?d.saveTags(a).then(function(s){return 200==s.statusCode&&s.response.success?void d.saveProductTags(e,{tags_id:s.response.result}).then(function(s){return 200==s.statusCode&&s.response.success?(o++,void n()):void r.error(s.response.msg,"Error")}):void r.error(s.response.msg,"Error")}):d.saveProductTags(e,{tags_id:a.tags_id}).then(function(s){return 200==s.statusCode&&s.response.success?(console.log("insert to product tag"),o++,n(),void 0):void r.error(s.response.msg,"Error")}),o>=s.details.tags.length&&t(null,e)})},function(t,o){g.upload({url:l+p+"product/"+t+"/upload-image",data:{product_img:s.details.img_default},method:"PUT"}).then(function(o){if(200===o.data.statusCode&&o.data.response.success)s.isImageNew&&r.success("Image successfully uploaded","Success"),e.go(e.current,{p_id:t},{reload:!0});else{if(400!==o.data.statusCode||o.data.response.success||!_.isArray(o.data.response.result))return void r.error(o.data.response.msg,"Error");_.each(o.data.response.result,function(s){r.warning(s.msg,"Warning")})}},function(s){console.log("Error status: "+s.status)},function(s){parseInt(100*s.loaded/s.total)})}])}}angular.module("POS17").controller("productsAEController",s),s.$inject=["$scope","$state","$filter","toastr","$stateParams","productFactory","ptypeFactory","supplierFctry","storeFactory","priceHistoryFactory","tagsFactory","API_URL","API_VERSION","Upload"]}();
!function(){"use strict";function e(e,t,s,a,l,n,c,o,r,i){e.search={},e.currentPage=1,e.entryLimit=5,e.selectDeselectAll=!1,e.applicationStatus="All",e.selectedDatas=[],e.viewby=25,e.pageSize=e.viewby,e.currentPage=1,e.itemsPerPage=20,e.totalUsers=0;var u=function(){e.productIsLoading=!0,e.bundles=[],e.bundlecopy=[],e.productBundleTable=new i({page:1,count:10},{counts:[10,25,50,100],getData:function(t,a){c.getAllProductBundle().then(function(l){if(200==l.statusCode&&l.response.success){var c=l.response.result;_.each(c,function(e){e.date_created=moment(e.date_created).format("YYYY-MM-DD")}),e.bundlecopy=angular.copy(c),e.txtSearch&&"All"==e.applicationStatus?e.bundles=s("filter")(c,e.txtSearch):e.txtSearch&&"Publish"==e.applicationStatus?(e.bundles=s("filter")(c,{is_published:1}),e.bundles=s("filter")(e.bundles,e.txtSearch)):e.txtSearch&&"Archived"==e.applicationStatus?(e.bundles=s("filter")(c,{is_archived:1}),e.bundles=s("filter")(e.bundles,e.txtSearch)):e.txtSearch&&"Draft"==e.applicationStatus?(e.bundles=s("filter")(c,{is_published:0}),e.bundles=s("filter")(e.bundles,e.txtSearch)):_.isUndefined(e.txtSearch)&&"All"==e.applicationStatus?e.bundles=c:_.isUndefined(e.txtSearch)&&"Publish"==e.applicationStatus?e.bundles=s("filter")(c,{is_published:1}):_.isUndefined(e.txtSearch)&&"Archived"==e.applicationStatus?e.bundles=s("filter")(c,{is_archived:1}):_.isUndefined(e.txtSearch)&&"Draft"==e.applicationStatus?e.bundles=s("filter")(c,{is_published:0}):e.bundles=c,console.log("bundles:",e.bundles),a.total(e.bundles.length);var o=e.bundles.slice((a.page()-1)*a.count(),a.page()*a.count());t.resolve(o),e.productIsLoading=!1}else e.productIsLoading=!1,n.error(l.response.msg,"Error")})}})};e.edit=function(e){a.go("main.products-add",{p_id:e})},e.searchData=function(){e.productBundleTable.reload()},e.refresh=function(){e.productIsLoading=!0,e.productBundleTable.reload()},e.updateStatus=function(t){console.log("status: ",t),e.applicationStatus=t,e.productBundleTable.reload()},e.changeSelectDeselectAll=function(){_.each(e.bundles,function(t){t.selected=e.selectDeselectAll,e.selectSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.pb_id===t.pb_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.pb_id!==t.pb_id}),e.selectSomeData=e.selectedDatas.length>0},e.archiveSelected=function(){r.openConfirm({templateUrl:"modules/dialog/confirmDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(s,l){s.selected&&c.archiveBundle(s.pb_id).then(function(s){return console.log("data: ",s.response),200==s.statusCode&&s.response.success?(n.success(s.response.msg,"Success"),++t,t==e.selectedDatas.length&&a.reload(),l(),void 0):void n.error(s.response.msg,"Error")})})})},e.publishSelected=function(){r.openConfirm({templateUrl:"modules/dialog/confirmDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(s,l){s.selected&&c.publishBundle(s.pb_id).then(function(s){return console.log("data: ",s.response),200==s.statusCode&&s.response.success?(n.success(s.response.msg,"Success"),++t,t==e.selectedDatas.length&&a.reload(),l(),void 0):void n.error(s.response.msg,"Error")})})})},u()}angular.module("POS17").controller("productBundlesController",e),e.$inject=["$scope","$http","$filter","$state","$timeout","toastr","productFactory","supplierFctry","ngDialog","ngTableParams"]}();
!function(){"use strict";function e(e,s,t,r,n,o,i,a,c,d,u,l,p,g){e.details={},e.ptypes={},e["package"]={},e.items={},e.list1=[],e.list2=[],e.productCopy=[],e.attributes=[],e.product_image=[],e.tags=[],e.tagsArr=[],e.details.tags=[],e.details.start_date=new Date,e.details.end_date=new Date,e.details.is_published=!1,e.details.is_archived=!1,e.isImageNew=!1,e.add=!1,e.displayComposite=!1,e.displayImage=!1,e.image=[],e.txtSearch="",e.myInterval=3e3,e.noWrapSlides=!1,e.activeSlide=0,e.thumbnailSize=5,e.thumbnailPage=1,e.slides=[];var m=function(){i.getAllProduct().then(function(s){200==s.statusCode&&s.response.success&&(e.list1=s.response.result,e.productCopy=angular.copy(s.response.result),_.each(e.list1,function(e){e.selected=!1})),e.models=[{listName:"Package",items:e.list2,dragging:!1},{listName:"Products",items:e.list1,dragging:!1}]})};e.refresh=function(){m()},e.searchData=function(s){e.list1=t("filter")(e.productCopy,s)},a.getAllProdType().then(function(s){200==s.statusCode&&s.response.success?e.ptypes=s.response.result:r.error(s.response.msg,"Error")}),l.getAllTags().then(function(s){200==s.statusCode&&s.response.success?e.tagsArr=s.response.result:r.error(s.response.msg,"Error")}),_.isEmpty(n.pb_id)?(e.showPublish=!1,e.showArchive=!1):(e.displayComposite=!0,e.displayImage=!0,i.getProductBundleDetails(n.pb_id).then(function(s){if(200==s.statusCode&&s.response.success){var t=0;e.details=s.response.result,e.items=s.response.result,e.product_image=e.details.product_images,_.each(e.product_image,function(s){e.slides.push({image:s.image_path,index:t}),t++}),e.list2=_.map(e.details.products,function(e){return e.product_detail}),e.showPublish=1!=e.details.is_published,e.showArchive=0==e.details.is_archived,e.details.start_date=new Date(e.details.start_date),e.details.end_date=new Date(e.details.end_date),e.details.ptype_id=s.response.result.productType_id,e.details.is_published=e.IntToBoolean(e.details.is_published),e.details.is_archived=e.IntToBoolean(e.details.is_archived),l.getAllProductBundleTags(n.pb_id).then(function(s){200==s.statusCode&&s.response.success&&(e.details.tags=s.response.result)})}})),e.$watch("list2",function(s){e.list2=s,e.models=[{listName:"Package",items:e.list2,dragging:!1},{listName:"Products",items:e.list1,dragging:!1}]},!0),e.$watch("list1",function(s){e.list1=s,e.models=[{listName:"Package",items:e.list2,dragging:!1},{listName:"Products",items:e.list1,dragging:!1}]},!0),e.$watch("models",function(s){e.modelAsJson=s},!0),e.tagTransform=function(e){return{tags:e}},e.clearInput=function(e){e.search=""},e.deleteProductTags=function(e){console.log("deleteProductBundleTag: ",e),n.pb_id&&l.deleteProductBundleTag(n.pb_id,e.tags_id).then(function(e){return 200==e.statusCode&&e.response.success?void r.success(e.response.msg,"Success"):void r.error(e.response.msg,"Error")})},e.checkDataChanges=function(s){s.selected?_.find(e.selectedDatas,function(e){return e.store_id===s.store_id})||e.selectedDatas.push(s):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.store_id!==s.store_id}),e.deleteSomeData=e.selectedDatas.length>0},e.dropCallback=function(s,t,r){var n=[];_.isUndefined(e.modelAsJson)||(n=_.find(e.modelAsJson,function(e){return"Package"==e.listName}),e.items.products=_.map(n.items,function(e){return{product_id:e.p_id}}),console.log("$scope.items:",e.items))},e.remove=function(e,s){return e.items.splice(s,1)},e.removeAll=function(e,s){_.each(e.items,function(t){return e.items.splice(s,1)})},e.openUploader=function(){var e=p.open({animation:!0,templateUrl:"./modules/products/product-bundle.upload.modal.html",controller:"productBundleUploaderModalCtrl",size:"lg",resolve:{product_bundle_id:function(){return n.pb_id}}});e.result.then(function(e){s.reload()})},e.IntToBoolean=function(e){return 1===e},e.BooleanToInt=function(e){return e===!0?1:0},e.archiveProduct=function(e){i.archiveBundle(e).then(function(e){200==e.statusCode&&e.response.success?(r.success(e.response.msg,"Success"),s.go(s.current,null,{reload:!0})):r.error(e.response.msg,"Error")})},e.publishProduct=function(e){i.publishBundle(e).then(function(e){200==e.statusCode&&e.response.success?(r.success(e.response.msg,"Success"),s.go(s.current,null,{reload:!0})):r.error(e.response.msg,"Error")})},e.onDragstart=function(e,s){if(e.dragging=!0,s.dataTransfer.setDragImage){var t=new Image;t.src="./images/cargo-128.png",s.dataTransfer.setDragImage(t,0,0)}},e.addProductBundle=function(){n.pb_id&&i.updateProductBundle(n.pb_id,e.items).then(function(e){200==e.statusCode&&e.response.success&&(r.success(e.response.msg,"Success"),s.go(s.current,{pb_id:n.pb_id},{reload:!0}))})},e.addProduct=function(){async.waterfall([function(s){n.pb_id?i.updateProductBundle(n.pb_id,e.details).then(function(t){200==t.statusCode&&t.response.success?(r.success(t.response.msg,"Success"),e.items=e.details,s(null,n.pb_id)):(e.validate=t.response.result,_.each(e.validate,function(e){r.warning(t.response.msg,"Error - "+e.msg)}))}):i.saveProductBundle(e.details).then(function(t){200==t.statusCode&&t.response.success?(e.items=e.details,r.success(t.response.msg,"Success"),s(null,t.response.result)):(e.validate=t.response.result,_.each(e.validate,function(e){r.warning(t.response.msg,"Error - "+e.msg)}))})},function(s,t){var n=0;async.eachSeries(e.details.tags,function(o,i){o.isTag?l.saveTags(o).then(function(e){return 200==e.statusCode&&e.response.success?(console.log("saveProductGroupTags bundle_id: ",s),void l.saveProductGroupTags(s,{tags_id:e.response.result}).then(function(e){return 200==e.statusCode&&e.response.success?(n++,void i()):void r.error(e.response.msg,"Error")})):void r.error(e.response.msg,"Error")}):l.saveProductGroupTags(s,{tags_id:o.tags_id}).then(function(e){return 200==e.statusCode&&e.response.success?(n++,void i()):void r.error(e.response.msg,"Error")}),n>=e.details.tags.length&&t(null,s)})},function(e,t){console.log("asdasdasdas: ",e),g(function(){s.go(s.current,{pb_id:e},{reload:!0})},1e3)}])},e.getSelectedItemsIncluding=function(e,s){return s.selected=!0,e.items.filter(function(e){return e.selected})},e.onDrop=function(e,s,t){return angular.forEach(s,function(e){e.selected=!1}),e.items=e.items.slice(0,t).concat(s).concat(e.items.slice(t)),!0},e.onMoved=function(e){e.items=e.items.filter(function(e){return!e.selected})},e.refresh()}angular.module("POS17").controller("productsBundleController",e),e.$inject=["$scope","$state","$filter","toastr","$stateParams","ngDialog","productFactory","ptypeFactory","storeFactory","priceHistoryFactory","supplierFctry","tagsFactory","$uibModal","$timeout"]}();
!function(){"use strict";function e(e,o,l,a,t,r,n,c,i,d,s){console.log("productBundleUploaderModalCtrl"),console.log("$stateParams:",d.pb_id),e.item={};var u=JSON.parse(s.get("user")),p=e.uploader=new l({url:a+t+"product-bundle/"+r+"/upload-image",method:"PUT",headers:{Authorization:"Bearer "+c.getUserToken(),accesskey:u.subscriptionKey}});console.log("uploader:",p),p.filters.push({name:"imageFilter",fn:function(e,o){var l="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(l)}}),p.onBeforeUploadItem=function(e){e.alias="pb_image"},e.cancel=function(){o.dismiss("cancel")}}angular.module("POS17").controller("productBundleUploaderModalCtrl",e),e.$inject=["$scope","$uibModalInstance","FileUploader","API_URL","API_VERSION","product_bundle_id","Upload","AuthFctry","jwtHelper","$stateParams","localStorageService"]}();
!function(){"use strict";function e(e,t,r,o,s,a,c,n,l){e.categ={repeatSelect:null,availableOptions:[]},e.categories=[],e.prodBundleCategories=[],e.itemArray=[],e.selectedCategory=[],e.store={},e.applicationStatus="",e.getAllCategory=function(){async.waterfall([function(t){n.getAllCategory().then(function(r){200==r.statusCode&&r.response.success?(e.categ.availableOptions=r.response.result,e.categories=angular.copy(e.categ.availableOptions),t(null,e.categories)):c.error(r.response.msg,"Error")})},function(t,r){s.pb_id?l.getProductBundleCategory(s.pb_id).then(function(r){200==r.statusCode&&r.response.success&&r.response.result.length>0?(e.prodBundleCategories=r.response.result,console.log("$scope.categories:",e.categories),_.each(e.categories,function(t){var r=_.find(e.prodBundleCategories,function(e){return t.c_id===e.fk_bundle_category_id});console.log("result:;",r),r&&(t.selected=!0,t.fk_bundle_category_id=r.fk_bundle_category_id,t.fk_product_bundle_id=s.pb_id,e.selectedCategory.push(t))}),e.itemArray=angular.copy(e.categories)):200==r.statusCode&&r.response.success&&0===r.response.result.length?e.itemArray=angular.copy(t):c.error(r.response.msg,"Error")}):e.itemArray=angular.copy(t)}])},e.getAllCategory(),e.paginate=function(){$("#tblCategory").trigger("footable_redraw")},e.changeSelectDeselectAll=function(){_.each(e.itemArray,function(t){t.selected=e.selectDeselectAll,e.checkStoresChanges(t)})},e.checkStoresChanges=function(t){if(t.selected){var r=_.find(e.selectedCategory,function(e){return e.c_id===t.c_id});_.isUndefined(r)&&(t.fk_bundle_category_id=t.c_id,t.fk_product_bundle_id=s.p_id,e.selectedCategory.push(t)),console.log("$scope.selectedCategory:",e.selectedCategory)}else e.selectedCategory=_.filter(e.selectedCategory,function(e){return e.c_id!==t.c_id})},e.updateStatus=function(t){e.applicationStatus=t,""===t?e.itemArray=angular.copy(e.categories):(e.itemArray.splice(0,e.itemArray.length),_.each(e.categories,function(t){_.find(e.selectedCategory,function(e){return t.c_id===e.fk_bundle_category_id})&&e.itemArray.push(t)}))},e.searchStore=function(){if(e.txtSearch){e.itemArray.splice(0,e.itemArray.length);var t=a("filter")(e.categories,e.txtSearch);e.itemArray=angular.copy(t)}},e.searchStatus=function(){""===e.txtSearch&&(e.itemArray.splice(0,e.itemArray.length),e.itemArray=angular.copy(e.categories))},e.saveproductBundleCategory=function(){var t=0;s.pb_id&&(console.log("$stateParams.pb_id:",s.pb_id),async.waterfall([function(e){l.deleteProductBundleCategory(s.pb_id).then(function(t){200==t.statusCode&&t.response.success?(console.log("Na delete"),e(null,t.response.result)):e(t.response.msg,null)})},function(r,a){_.each(e.selectedCategory,function(r){console.log("selectedCategory: ",r),l.saveProductBundleCategory(s.pb_id,{category_id:r.c_id}).then(function(s){200===s.statusCode&&s.response.success?(c.success(r.name+" - "+s.response.msg,"Success"),t++,t===e.selectedCategory.length&&o.reload()):c.error(s.response.msg,"Error")})})}]))}}angular.module("POS17").controller("productBundleCategoryCtrl",e),e.$inject=["$scope","$rootScope","$timeout","$state","$stateParams","$filter","toastr","categoryFactory","productFactory"]}();
!function(){"use strict";function e(e,r,t,s,o,c,n){e.prodStores=[],e.selectedStores=[],e.applicationStatus="",e.getAllStore=function(){e.stores=[],e.storesCopy=[],async.waterfall([function(r){c.getAllStore().then(function(t){200==t.statusCode&&t.response.success?(e.stores=t.response.result,e.storesCopy=angular.copy(e.stores),r(null,e.stores)):s.error(t.response.msg,"Error")})},function(r,t){o.p_id?n.getPriceHistory(o.p_id).then(function(t){200==t.statusCode&&t.response.success&&t.response.result.length>0?(e.prodStore=t.response.result,_.each(e.storesCopy,function(r){var t=_.find(e.prodStore,function(e){return r.store_id===e.store_id});t&&(r.selected=!0,r.base_price=t.base_price,r.regular_price=t.regular_price,r.rrp=t.rrp,r.sale_price=t.sale_price,r.sale_percent=t.sale_percent,r.fk_product_id=o.p_id,e.selectedStores.push(r))}),e.itemArray=angular.copy(e.storesCopy)):200==t.statusCode&&t.response.success&&0===t.response.result.length?e.itemArray=angular.copy(r):s.error(t.response.msg,"Error")}):e.itemArray=angular.copy(r)}])},e.getAllStore(),e.paginate=function(){$("#tblStore").trigger("footable_redraw")},e.updateStatus=function(r){e.applicationStatus=r,""===r?e.itemArray=angular.copy(e.storesCopy):(e.itemArray.splice(0,e.itemArray.length),_.each(e.storesCopy,function(r){_.find(e.selectedStores,function(e){return r.store_id===e.store_id})&&e.itemArray.push(r)}))},e.searchStore=function(){if(e.txtSearch){e.itemArray.splice(0,e.itemArray.length);var r=t("filter")(e.storesCopy,e.txtSearch);e.itemArray=angular.copy(r)}},e.searchStatus=function(){""===e.txtSearch&&(e.itemArray.splice(0,e.itemArray.length),e.itemArray=angular.copy(e.storesCopy))},e.changeSelectDeselectAll=function(){_.each(e.itemArray,function(r){r.selected=e.selectDeselectAll,e.checkStoresChanges(r)})},e.checkStoresChanges=function(r){if(r.selected){var t=_.find(e.selectedStores,function(e){return e.store_id===r.store_id});t||(r.base_price=0,r.regular_price=0,r.rrp=0,r.sale_price=0,r.sale_percent=0,r.fk_product_id=o.p_id,e.selectedStores.push(r))}else e.selectedStores=_.filter(e.selectedStores,function(e){return e.store_id!==r.store_id})},e.saveStore=function(r){return o.p_id?void n.saveSP(o.p_id,e.selectedStores).then(function(e){200===e.statusCode&&e.response.success?s.success(e.response.msg,"Success"):s.error(e.response.msg,"Error")}):void s.warning("WARNING: Unable to save.. no available products","WARNING")}}angular.module("POS17").controller("productStoreCtrl",e),e.$inject=["$scope","$state","$filter","toastr","$stateParams","storeFactory","priceHistoryFactory"]}();
!function(){"use strict";function e(e,t,r,s,a,o,c,n,i){e.categ={repeatSelect:null,availableOptions:[]},e.categories=[],e.prodCategories=[],e.itemArray=[],e.selectedCategory=[],e.store={},e.applicationStatus="",e.getAllCategory=function(){async.waterfall([function(t){n.getAllCategory().then(function(r){200==r.statusCode&&r.response.success?(e.categ.availableOptions=r.response.result,e.categories=angular.copy(e.categ.availableOptions),t(null,e.categories)):c.error(r.response.msg,"Error")})},function(t,r){a.p_id?i.getProductsCategory(a.p_id).then(function(r){200==r.statusCode&&r.response.success&&r.response.result.length>0?(e.prodCategories=r.response.result,_.each(e.categories,function(t){var r=_.find(e.prodCategories,function(e){return t.c_id===e.fk_category_id});r&&(t.selected=!0,t.fk_category_id=r.fk_category_id,t.fk_product_id=a.p_id,e.selectedCategory.push(t))}),e.itemArray=angular.copy(e.categories)):200==r.statusCode&&r.response.success&&0===r.response.result.length?e.itemArray=angular.copy(t):c.error(r.response.msg,"Error")}):e.itemArray=angular.copy(t)}])},e.getAllCategory(),e.paginate=function(){$("#tblCategory").trigger("footable_redraw")},e.changeSelectDeselectAll=function(){_.each(e.itemArray,function(t){t.selected=e.selectDeselectAll,e.checkStoresChanges(t)})},e.checkStoresChanges=function(t){if(t.selected){var r=_.find(e.selectedCategory,function(e){return e.c_id===t.c_id});_.isUndefined(r)&&(t.fk_category_id=t.c_id,t.fk_product_id=a.p_id,e.selectedCategory.push(t))}else e.selectedCategory=_.filter(e.selectedCategory,function(e){return e.c_id!==t.c_id})},e.updateStatus=function(t){e.applicationStatus=t,""===t?e.itemArray=angular.copy(e.categories):(e.itemArray.splice(0,e.itemArray.length),_.each(e.categories,function(t){_.find(e.selectedCategory,function(e){return t.c_id===e.fk_category_id})&&e.itemArray.push(t)}))},e.searchStore=function(){if(e.txtSearch){e.itemArray.splice(0,e.itemArray.length);var t=o("filter")(e.categories,e.txtSearch);e.itemArray=angular.copy(t)}},e.searchStatus=function(){""===e.txtSearch&&(e.itemArray.splice(0,e.itemArray.length),e.itemArray=angular.copy(e.categories))},e.saveCategory=function(){var t=0;a.p_id&&async.waterfall([function(e){i.deleteProductCategory(a.p_id).then(function(t){200==t.statusCode&&t.response.success?e(null,t.response.result):e(t.response.msg,null)})},function(r,o){_.each(e.selectedCategory,function(r){console.log("selectedCategory: ",r),i.saveProductsCategory(a.p_id,{category_id:r.c_id}).then(function(a){200===a.statusCode&&a.response.success?(c.success(r.name+" - "+a.response.msg,"Success"),t++,t===e.selectedCategory.length&&s.reload()):c.error(a.response.msg,"Error")})})}])}}angular.module("POS17").controller("productCategoryCtrl",e),e.$inject=["$scope","$rootScope","$timeout","$state","$stateParams","$filter","toastr","categoryFactory","productFactory"]}();
!function(){"use strict";function t(t,r,e,s,u,o,i,c){t.getAllProductAttributes=function(){t.attributes=[],i.getProductAttributes(o.p_id).then(function(r){if(200==r.statusCode&&r.response.success){var e=r.response.result;u(function(){t.$apply(function(){t.attributes=e.attributes})})}else s.error(r.response.msg,"Error")})},t.getAllProductAttributes()}angular.module("POS17").controller("productAttributeCtrl",t),t.$inject=["$scope","$state","$filter","toastr","$timeout","$stateParams","productFactory","attributeFactory"]}();
!function(){"use strict";function t(t,e,n,i,o,r,u,s,l){t.attributes=[],t.attributevalues=[],l.getAllAttribute().then(function(e){if(200==e.statusCode&&e.response.success){var n=[];n=e.response.result,o(function(){t.$apply(function(){t.attributes=n})},100)}}),l.getAllAttributeValues().then(function(e){if(200==e.statusCode&&e.response.success){var n=[];n=e.response.result,o(function(){t.$apply(function(){t.attributevalues=n})},100)}}),t.openAttributeModal=function(){var e=u.open({animation:!0,templateUrl:"./modules/products/product.variants.modal.html",controller:"productVariantsModalCtrl",size:"md",resolve:{attributes:function(){return t.attributes},attributevalues:function(){return t.attributevalues}}});e.result.then(function(e){t.selected=e},function(){console.info("Modal dismissed at: "+new Date)})}}function e(t,e,n,i){t.attributes=n,t.attributevalues=i,t.infiniteScrollContacts={},t.infiniteScrollContacts.numToAdd=10,t.infiniteScrollContacts.currentItems=10,t.infiniteScrollAttributes={},t.infiniteScrollAttributes.numToAdd=10,t.infiniteScrollAttributes.currentItems=10,t.resetInfScroll=function(){t.infiniteScrollContacts.currentItems=t.infiniteScrollContacts.numToAdd},t.addMoreItems=function(){t.infiniteScrollContacts.currentItems+=t.infiniteScrollContacts.numToAdd},t.removethumb=function(){t.attrib.value_image=null},t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}angular.module("POS17").controller("productVariantsCtrl",t).controller("productVariantsModalCtrl",e),t.$inject=["$scope","$state","$filter","toastr","$timeout","$stateParams","$uibModal","productFactory","attributeFactory"],e.inject=["$scope","$uibModalInstance","attributes","attributevalues"]}();
!function(){"use strict";function t(t,o,e,a,n,r){t.rating1=5,t.isReadonly=!0,t.dtFrom=new Date;var d=new Date;t.dtTo=d.setMonth(d.getMonth()+1),t.openDate=function(){var o=r.open({animation:!0,templateUrl:"./modules/dialog/datepicker.modal.html",controller:"ModalInstanceCtrl",size:"sm",resolve:{dateValue:function(){return{dateFrom:t.dtFrom,dateTo:t.dtTo}}}});o.result.then(function(o){t.dtFrom=o.dateFrom,t.dtTo=o.dateTo;var e=moment(t.dtFrom).format("YYYY-MM-DD"),a=moment(t.dtTo).format("YYYY-MM-DD");populateGraph(e,a)})}}angular.module("POS17").controller("productRatingCtrl",t),t.$inject=["$scope","$state","$filter","toastr","$stateParams","$uibModal"]}();
!function(){"use strict";function e(e,t,o,c,r,s,n,a,i,l){function d(){a.getAllCategory().then(function(t){if(200==t.statusCode&&t.response.success){for(var o=t.response.result,c=0;c<o.length;c++){var r=o[c],s=r.name,n=r.parent_id,a=r.c_id;p[n]?(r={parentid:n,label:s,item:r},null!=r&&(p[n].items||(p[n].items=[]),p[n].items[p[n].items.length]=r,p[a]=r)):(p[a]={parentid:n,label:s,item:r},u[a]=p[a])}e.categoryData=_(u).omit(_.isUndefined).omit(_.isNull).value(),e.categorycopy=angular.copy(e.categoryData)}})}e.search={},e.currentPage=1,e.entryLimit=5,e.selectDeselectAll=!1,e.applicationStatus="All",e.displayModel="List",e.viewby=25,e.pageSize=e.viewby,e.currentPage=1,e.itemsPerPage=20,e.totalUsers=0,e.categories=[],e.selectedDatas=[];var u=[],p=[];e.side=!1;var g=function(){e.productTable=new i({page:1,count:20},{counts:[20,45,60,100],getData:function(t,c){e.productIsLoading=!0,e.products=[],e.productscopy=[],n.getAllProduct().then(function(r){if(200==r.statusCode&&r.response.success){var n=r.response.result;e.totalItems=n.length,e.productscopy=angular.copy(r.response.result),e.txtSearch&&"All"==e.applicationStatus&&e.currentNode?(console.log("1"),e.products=o("filter")(n,e.txtSearch)):e.txtSearch&&"Publish"==e.applicationStatus&&e.currentNode?(console.log("2"),e.products=o("filter")(n,{is_published:1}),e.products=o("filter")(e.products,e.txtSearch)):e.txtSearch&&"Archived"==e.applicationStatus&&e.currentNode?(console.log("3"),e.products=o("filter")(n,{is_archived:1}),e.products=o("filter")(e.products,e.txtSearch)):e.txtSearch&&"Draft"==e.applicationStatus&&e.currentNode?(console.log("4"),e.products=o("filter")(n,{is_published:0}),e.products=o("filter")(e.products,e.txtSearch)):_.isUndefined(e.txtSearch)&&"All"==e.applicationStatus?(console.log("5"),e.products=n):_.isUndefined(e.txtSearch)&&"Publish"==e.applicationStatus?(console.log("6"),e.products=o("filter")(n,{is_published:1})):_.isUndefined(e.txtSearch)&&"Archived"==e.applicationStatus?(console.log("7"),e.products=o("filter")(n,{is_archived:1})):_.isUndefined(e.txtSearch)&&"Draft"==e.applicationStatus?(console.log("8"),e.products=o("filter")(n,{is_published:0})):_.isUndefined(e.txtSearch)&&_.isUndefined("All"==e.applicationStatus)&&e.currentNode?console.log("9"):_.isUndefined(e.txtSearch)&&_.isUndefined("Publish"==e.applicationStatus)&&e.currentNode?console.log("10"):_.isUndefined(e.txtSearch)&&_.isUndefined("Archived"==e.applicationStatus)&&e.currentNode?console.log("11"):_.isUndefined(e.txtSearch)&&_.isUndefined("Draft"==e.applicationStatus)&&e.currentNode?console.log("12"):e.products=n,console.log("$scope.products: ",e.products),c.total(e.products.length);var a=e.products.slice((c.page()-1)*c.count(),c.page()*c.count());t.resolve(a),e.productIsLoading=!1}else e.productIsLoading=!1,s.error(r.response.msg,"Error")})}})},f=function(){e.get=[],e.$watch("mytree.currentNode",function(t,o){var c=[],r={},s={};e.category=[],e.tree=[],e.currentNode=[];var n=[];if(e.mytree&&angular.isObject(e.mytree.currentNode)){e.currentNode=e.mytree.currentNode.item,console.log("$scope.productscopy:",e.productscopy),console.log("$scope.categorycopy:",e.categorycopy);var a=_.find(e.categorycopy,{parentid:e.currentNode.c_id});if(console.log("sample2:",a),_.isUndefined(a)){var i=_.map(e.productscopy,function(t){var o=_.filter(t.product_category,{category_id:e.currentNode.c_id});return o.length>0?_.find(o,function(e){return e}):void 0});console.log("product_categories:",i),s=_.filter(i,function(e){return _.isUndefined(e)?void 0:e}),console.log("product_categories2:",s),r=_.map(_.uniqBy(s,"product_id"),function(e){return e.product_id}),_.forEach(r,function(t){c.push(_.find(e.productscopy,{p_id:t}))})}else{var l=_.map(a.items,function(e){return{c_id:e.item.c_id}});_.each(e.productscopy,function(e){_.each(l,function(t){var o=_.filter(e.product_category,{category_id:t.c_id});o&&o.length>0&&n.push(o[0])})});var d=_.map(_.uniqBy(n,"product_id"),function(e){return e.product_id});_.forEach(d,function(t){c.push(_.find(e.productscopy,{p_id:t}))})}return c}},!1)};d(),f(),g(),a.getAllCategory().then(function(t){200==t.statusCode&&t.response.success&&(e.categories=t.response.result)}),e.setPage=function(t){e.currentPage=t},e.setItemsPerPage=function(t){e.itemsPerPage=t,e.currentPage=1},e.edit=function(e){c.go("main.products-add",{p_id:e})},e.searchData=function(){e.productTable.reload()},e.refresh=function(){e.productIsLoading=!0,e.productTable.reload()},e.updateStatus=function(t){e.applicationStatus=t,e.productTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.products,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.p_id===t.p_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.p_id!==t.p_id}),e.deleteSomeData=e.selectedDatas.length>0},e.deleteSelected=function(){e.modal={title:"Archive Product?",message:"Are you sure to archive this selected products?"},l.openConfirm({templateUrl:"modules/dialog/customDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=1;async.eachSeries(e.selectedDatas,function(o,r){o.selected&&n.archiveProduct(o.p_id).then(function(e){return 200==e.statusCode&&e.response.success?(s.success(e.response.msg,"Success"),t++,r(),void 0):void s.error(e.response.msg,"Error")}),t==e.selectedDatas.length&&c.reload()})})}}angular.module("POS17").controller("productsController",e),e.$inject=["$scope","$http","$filter","$state","$timeout","toastr","productFactory","categoryFactory","ngTableParams","ngDialog"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(a,t){t.state("main.analytics-overview",{url:"/analytics/overview",templateUrl:"modules/analytics/chartjs.html"}).state("main.analytics-appoverview",{url:"/analytics/appoverview",templateUrl:"modules/analytics/inline.html"}).state("main.analytics-behavior",{url:"/analytics/behavior",templateUrl:"modules/analytics/flot.html"}).state("main.analytics-audience",{url:"/analytics/audience",templateUrl:"modules/analytics/morris.html"})}])}();
!function(){"use strict";function t(t,a,o){t.$log=a,t.data=[],t.myChartOptions={grid:{borderColor:"#f3f3f3",borderWidth:1,tickColor:"#f3f3f3"},series:{shadowSize:0,color:"#3c8dbc"},lines:{fill:!0,color:"#3c8dbc"},yaxis:{min:0,max:100,show:!0},xaxis:{show:!0}},t.totalPoints=100,t.updateInterval=500,t.realtime=1,t.getRandomData=function(){for(t.data.length>0&&(t.data=t.data.slice(1));t.data.length<t.totalPoints;){var a=t.data.length>0?t.data[t.data.length-1]:50,o=a+10*Math.random()-5;0>o?o=0:o>100&&(o=100),t.data.push(o)}for(var e=[],r=0;r<t.data.length;++r)e.push([r,t.data[r]]);return e},t.update=function(){t.data=[t.getRandomData()],1==t.realtime&&setTimeout(t.update,t.updateInterval)}}function a(t){for(var a=[],o=[],e=0;14>e;e+=.5)a.push([e,Math.sin(e)]),o.push([e,Math.cos(e)]);var r={data:a,color:"#3c8dbc"},i={data:o,color:"#00c0ef"};t.myData=[r,i],t.myChartOptions={grid:{hoverable:!0,borderColor:"#f3f3f3",borderWidth:1,tickColor:"#f3f3f3"},series:{shadowSize:0,lines:{show:!0},points:{show:!0}},lines:{fill:!1,color:["#3c8dbc","#f56954"]},yaxis:{show:!0},xaxis:{show:!0}}}function o(t){var a=[[2,88],[3,93.3],[4,102],[5,108.5],[6,115.7],[7,115.6],[8,124.6],[9,130.3],[10,134.3],[11,141.4],[12,146.5],[13,151.7],[14,159.9],[15,165.4],[16,167.8],[17,168.7],[18,169.5],[19,168]];t.myData=[a],t.myChartOptions={grid:{borderWidth:0},series:{shadowSize:0,color:"#00c0ef"},lines:{fill:!0},yaxis:{show:!1},xaxis:{show:!1}}}function e(t){t.myData=[{data:[["January",10],["February",8],["March",4],["April",13],["May",17],["June",9]],color:"#3c8dbc"}],t.myChartOptions={grid:{borderWidth:1,borderColor:"#f3f3f3",tickColor:"#f3f3f3"},series:{bars:{show:!0,barWidth:.5,align:"center"}},xaxis:{mode:"categories",tickLength:0}}}function r(t){function a(t,a){return"<div style='font-size:13px; text-align:center; padding:2px; color: #fff; font-weight: 600;'>"+t+"<br/>"+Math.round(a.percent)+"%</div>"}t.myData=[{label:"Series2",data:30,color:"#3c8dbc"},{label:"Series3",data:20,color:"#0073b7"},{label:"Series4",data:50,color:"#00c0ef"}],t.myChartOptions={series:{pie:{show:!0,radius:1,innerRadius:.5,label:{show:!0,radius:2/3,formatter:a,threshold:.1}}},legend:{show:!1}}}angular.module("POS17").controller("FlotInteractive",t).controller("FlotLineChart",a).controller("FlotAreaChart",o).controller("FlotBarChart",e).controller("FlotDonutChart",r),t.$inject=["$scope","$log","$element"],a.$inject=["$scope"],o.$inject=["$scope"],e.$inject=["$scope"],r.$inject=["$scope"]}();
!function(){"use strict";function e(e,o){e.labels=["January","February","March","April","May","June","July"],e.series=["Series A","Series B"],e.data=[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90]],e.onClick=function(e,o){console.log(e,o)},e.onHover=function(e){e.length>0?console.log("Point",e[0].value):console.log("No point")},o(function(){e.labels=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],e.data=[[28,48,40,19,86,27,90],[65,59,80,81,56,55,40]],e.series=["Series C","Series D"]},3e3)}function o(e,o){e.options={scaleShowVerticalLines:!1},e.labels=["2006","2007","2008","2009","2010","2011","2012"],e.series=["Series A","Series B"],e.data=[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90]],o(function(){e.options={scaleShowVerticalLines:!0}},3e3)}function l(e,o){e.labels=["Download Sales","In-Store Sales","Mail-Order Sales"],e.data=[0,0,0],o(function(){e.data=[350,450,100]},500)}function a(e){e.labels=["Download Sales","In-Store Sales","Mail Sales"],e.data=[300,500,100]}function n(e){e.labels=["Download Sales","In-Store Sales","Mail Sales","Telesales","Corporate Sales"],e.data=[300,500,100,40,120]}angular.module("POS17").controller("LineCtrl",e).controller("BarCtrl",o).controller("DoughnutCtrl",l).controller("PieCtrl",a).controller("PolarAreaCtrl",n),e.$inject=["$scope","$timeout"],o.$inject=["$scope","$timeout"],l.$inject=["$scope","$timeout"],a.$inject=["$scope"],n.$inject=["$scope"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(l,m){m.state("main.mailbox",{url:"/mailbox/overview",templateUrl:"modules/mailbox/mailbox.html"}).state("main.mailbox-compose",{url:"/mailbox/compose",templateUrl:"modules/mailbox/compose.html"}).state("main.mailbox-read",{url:"/mailbox/read",templateUrl:"modules/mailbox/read-mail.html"})}])}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(t,e){e.state("main.settings-stores",{url:"/settings/stores",templateUrl:"modules/stores/stores.html",controller:"storesController"}).state("main.settings-stores-add",{url:"/settings/stores/:store_id",templateUrl:"modules/stores/store.detail.html",controller:"storesDetailController"})}])}();
!function(){"use strict";function e(e,t,s,o,n,l,r,c,a){e.selectDeselectAll=!1,e.selectedDatas=[];var i=function(){e.storeisLoading=!0,e.stores=[],e.storescopy=[],e.storeTable=new a({page:1,count:10},{counts:[10,25,50,100],getData:function(t,o){r.getAllStore().then(function(l){if(200==l.statusCode&&l.response.success){var r=l.response.result;if(e.storescopy=angular.copy(e.stores),e.txtSearch){e.stores=s("filter")(r,e.txtSearch),o.total(e.stores.length);var c=e.stores.slice((o.page()-1)*o.count(),o.page()*o.count());t.resolve(c)}else{e.stores=r,o.total(e.stores.length);var c=e.stores.slice((o.page()-1)*o.count(),o.page()*o.count());t.resolve(c)}e.storeisLoading=!1}else e.storeisLoading=!1,n.error(l.response.msg,"Error")})}})};e.edit=function(e){o.go("main.settings-stores-add",{store_id:e})},e.searchData=function(){e.storeTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.stores,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.refresh=function(){e.storeTable.reload()},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.store_id===t.store_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.store_id!==t.store_id}),e.deleteSomeData=e.selectedDatas.length>0},e.toggleModal=function(t){l.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){r.deleteStore(t).then(function(e){return 200==e.statusCode&&e.response.success?(n.success(e.response.msg,"Success"),void o.reload()):void n.error(e.response.msg,"Error")})},function(e){console.log("Modal promise close: ")})},e.onDrop=function(e,t,s){return angular.forEach(t,function(e){e.selected=!1}),e.items=e.items.slice(0,s).concat(t).concat(e.items.slice(s)),!0},e.onMoved=function(e){e=e.items.filter(function(e){return!e.selected})},e.deleteSelected=function(){l.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(s,l){s.selected&&(console.log("store: ",s),r.deleteStore(s.store_id).then(function(s){return console.log("data: ",s.response),200==s.statusCode&&s.response.success?(n.success(s.response.msg,"Success"),++t,t==e.selectedDatas.length&&o.reload(),l(),void 0):void n.error(s.response.msg,"Error")}))})})},i()}angular.module("POS17").controller("storesController",e),e.$inject=["$scope","$http","$filter","$state","toastr","ngDialog","storeFactory","$timeout","ngTableParams"]}();
!function(){"use strict";function s(s,e,r,t,o,n,a,u,c){s.details={},s.details.tags=[],s.tagsArr=[],c.getAllTags().then(function(e){200==e.statusCode&&e.response.success?s.tagsArr=e.response.result:a.error(e.response.msg,"Error")}),t.store_id&&u.getStoreDetails(t.store_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details=e.response.result,c.getAllStoreTags(t.store_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details.tags=e.response.result)}))}),s.deleteProductTags=function(s){t.store_id&&c.deleteStoreTag(t.store_id,s.tags_id).then(function(s){return 200==s.statusCode&&s.response.success?void a.success(s.response.msg,"Success"):void a.error(s.response.msg,"Error")})},s.tagTransform=function(s){return{tags:s}},s.clearInput=function(s){s.search=""},s.saveStore=function(){async.waterfall([function(e){t.store_id?u.updateStore(t.store_id,s.details).then(function(s){if(200==s.statusCode&&s.response.success)a.success(s.response.msg,"Success"),e(null,t.store_id);else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void a.error(s.response.msg,"Error");_.each(s.response.result,function(s){a.warning(s.msg,"Warning")})}}):u.saveStore(s.details).then(function(s){if(console.log("data:",s),200==s.statusCode&&s.response.success)a.success(s.response.msg,"Success"),e(null,s.response.result);else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void a.error(s.response.msg,"Error");_.each(s.response.result,function(s){a.warning(s.msg,"Warning")})}})},function(e,r){var t=1;s.details.tags.length>0?async.eachSeries(s.details.tags,function(o,n){o.isTag?c.saveTags(o).then(function(s){return 200==s.statusCode&&s.response.success?void c.saveStoreTags(e,{tag_id:s.response.result}).then(function(s){return 200==s.statusCode&&s.response.success?(t++,void n()):void a.error(s.response.msg,"Error")}):void a.error(s.response.msg,"Error")}):c.saveStoreTags(e,{tag_id:o.tags_id}).then(function(s){return 200==s.statusCode&&s.response.success?(t++,void n()):void a.error(s.response.msg,"Error")}),t>=s.details.tags.length&&r(null,e)}):r(null,e)},function(s,e){o(function(){n.go(n.current,{store_id:s},{reload:!0})},300)}])}}angular.module("POS17").controller("storesDetailController",s),s.$inject=["$scope","$http","$filter","$stateParams","$timeout","$state","toastr","storeFactory","tagsFactory"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(t,n){n.state("main.settings-banks",{url:"/settings/banks",templateUrl:"modules/banks/banks.html",controller:"banksController"}).state("main.settings-banks-add",{url:"/settings/banks/:bk_id",templateUrl:"modules/banks/bank.detail.html",controller:"bankDetailsController"})}])}();
!function(){"use strict";function e(e,t,a,s,n,l,c,o,r){e.selectDeselectAll=!1,e.selectedDatas=[];var i=function(){e.bankisLoading=!0,e.banks={},e.bankscopy=[],e.bankTable=new r({page:1,count:10},{counts:[10,25,50,100],getData:function(t,s){c.getAllBanks().then(function(n){if(200==n.statusCode&&n.response.success){var c=n.response.result;if(e.bankscopy=angular.copy(e.banks),e.txtSearch){e.banks=a("filter")(c,e.txtSearch),s.total(e.banks.length);var o=e.banks.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(o)}else{e.banks=c,s.total(e.banks.length);var o=e.banks.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(o)}e.bankisLoading=!1}else e.bankisLoading=!1,l.error(n.response.msg,"Error")})}})};e.refresh=function(){e.bankTable.reload()},e.edit=function(e){s.go("main.settings-banks-add",{bk_id:e})},e.searchData=function(){e.bankTable.reload()},e.paginate=function(){$(".table").trigger("footable_redraw")},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.banks,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.bk_id===t.bk_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.bk_id!==t.bk_id}),e.deleteSomeData=e.selectedDatas.length>0},e.deleteSelected=function(){n.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(a,n){a.selected&&(console.log("bank: ",a),c.deleteBank(a.bk_id).then(function(a){return console.log("data: ",a.response),200==a.statusCode&&a.response.success?(l.success(a.response.msg,"Success"),++t,t==e.selectedDatas.length&&s.reload(),n(),void 0):void l.error(a.response.msg,"Error")}))})})},i()}angular.module("POS17").controller("banksController",e),e.$inject=["$scope","$http","$filter","$state","ngDialog","toastr","bankFctry","$timeout","ngTableParams"]}();
!function(){"use strict";function s(s,e,r,n,t,o,a,u){s.details={},s.details.tags=[],s.tagsArr=[],u.getAllTags().then(function(e){200==e.statusCode&&e.response.success?s.tagsArr=e.response.result:o.error(e.response.msg,"Error")}),r.bk_id&&a.getBankDetails(r.bk_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details=e.response.result,u.getAllBankTags(r.bk_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details.tags=e.response.result)}))}),s.saveBank=function(){async.waterfall([function(e){r.bk_id?a.updateBank(r.bk_id,s.details).then(function(s){return 200==s.statusCode&&s.response.success?(o.success(s.response.msg,"Success"),void e(null,r.bk_id)):400===s.statusCode&&!s.response.success&&_.isArray(s.response.result)?void _.each(s.response.result,function(s){o.warning(s.msg,"Warning")}):void o.error(s.response.msg,"Error")}):a.saveBank(s.details).then(function(s){return 200==s.statusCode&&s.response.success?(o.success(s.response.msg,"Success"),void e(null,s.response.result)):400===s.statusCode&&!s.response.success&&_.isArray(s.response.result)?void _.each(s.response.result,function(s){o.warning(s.msg,"Warning")}):void o.error(s.response.msg,"Error")})},function(e,r){var n=0;async.eachSeries(s.details.tags,function(t,a){t.isTag?u.saveTags(t).then(function(s){return 200==s.statusCode&&s.response.success?void u.saveBankTags(e,{tag_id:s.response.result}).then(function(s){return 200==s.statusCode&&s.response.success?(n++,void a()):void o.error(s.response.msg,"Error")}):void o.error(s.response.msg,"Error")}):u.saveBankTags(e,{tag_id:t.tags_id}).then(function(s){return 200==s.statusCode&&s.response.success?(n++,void a()):void o.error(s.response.msg,"Error")}),n>=s.details.tags.length&&r(null,e)})},function(s,e){t(function(){n.go(n.current,{bk_id:s},{reload:!0})},300)}])},s.deleteProductTags=function(s){r.bk_id&&u.deleteBankTag(r.bk_id,s.tags_id).then(function(s){return 200==s.statusCode&&s.response.success?void o.success(s.response.msg,"Success"):void o.error(s.response.msg,"Error")})},s.tagTransform=function(s){return{tags:s}},s.clearInput=function(s){s.search=""}}angular.module("POS17").controller("bankDetailsController",s),s.$inject=["$scope","$http","$stateParams","$state","$timeout","toastr","bankFctry","tagsFactory"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(t,e){e.state("main.settings-attributes",{url:"/settings/attributes",templateUrl:"modules/attributes/attributes.html",controller:"attributesController"}).state("main.settings-attributes-groups",{url:"/settings/attributegroups",templateUrl:"modules/attributes/attributes.groups.html",controller:"attributeGroups"}).state("main.settings-attributes-types",{url:"/settings/attributetypes",templateUrl:"modules/attributes/attributes.types.html",controller:"attributeTypes"}).state("main.settings-attributes-add",{url:"/settings/attributes/:att_id",templateUrl:"modules/attributes/attribute.detail.html",controller:"attributeDetailsController"})}])}();
!function(){"use strict";function e(e,t,a,s,o,l,n,r,c){e.selectDeselectAll=!1,e.selectedDatas=[];var i=function(){e.attribisLoading=!0,e.attribute=[],e.attributecopy=[],e.attributeTable=new c({page:1,count:10},{counts:[10,25,50,100],getData:function(t,s){n.getAllAttribute().then(function(o){if(200==o.statusCode&&o.response.success){var n=o.response.result;if(e.attributecopy=angular.copy(e.attribute),e.txtSearch){e.attribute=a("filter")(n,e.txtSearch),s.total(e.attribute.length);var r=e.attribute.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(r)}else{e.attribute=n,s.total(e.attribute.length);var r=e.attribute.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(r)}e.attribisLoading=!1}else e.attribisLoading=!1,l.error(o.response.msg,"Error")})}})};e.refresh=function(){e.attributeTable.reload()},e.edit=function(e){s.go("main.settings-attributes-add",{att_id:e})},e.searchData=function(){e.attributeTable.reload()},e.paginate=function(){$(".table").trigger("footable_redraw")},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.attribute,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.att_id===t.att_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.att_id!==t.att_id}),e.deleteSomeData=e.selectedDatas.length>0},e.toggleModal=function(t){o.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){n.deleteAttribute(t).then(function(e){return 200==e.statusCode&&e.response.success?(l.success(e.response.msg,"Success"),void s.reload()):void l.error(e.response.msg,"Error")})},function(e){console.log("Modal promise close: ")})},e.deleteSelected=function(){o.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(a,o){a.selected&&(console.log("attribute: ",a),n.deleteAttribute(a.att_id).then(function(a){return console.log("data: ",a.response),200==a.statusCode&&a.response.success?(l.success(a.response.msg,"Success"),++t,t==e.selectedDatas.length&&s.reload(),o(),void 0):void l.error(a.response.msg,"Error")}))})})},i()}angular.module("POS17").controller("attributesController",e),e.$inject=["$scope","$http","$filter","$state","ngDialog","toastr","attributeFactory","$timeout","ngTableParams"]}();
!function(){"use strict";function e(e,t,s,i,a,r,l,n){e.productType=[],e.selectedDatas=[],e.attributeTypes=[],e.selectDeselectAll=!1,e.showAttributeValues=!1,e.details={},e.details.is_visible=1==e.details.is_visible,e.details.is_search=1==e.details.is_search,e.details.is_required=1==e.details.is_required,e.details.is_variation=1==e.details.is_variation,e.details.is_customizable=1==e.details.is_customizable,e.details.is_unique=1==e.details.is_unique,e.details.is_comparable=1==e.details.is_comparable,i.getAllAttributeTypes().then(function(t){if(200==t.statusCode&&t.response.success){var s=[];s=t.response.result,a(function(){e.$apply(function(){e.attributeTypes=s})},100)}}),n.getAllProdType().then(function(t){200==t.statusCode&&t.response.success&&(e.productType=t.response.result,_.each(e.productType,function(e){e.selected=!1}))}),async.waterfall([function(e){i.getAllAttributeTypes().then(function(t){200==t.statusCode&&t.response.success&&e(null,t.response.result)})},function(t,a){e.types=t,s.att_id&&(e.showAttributeValues=!0,i.getAllAttributeDetails(s.att_id).then(function(t){200==t.statusCode&&t.response.success&&(e.details=t.response.result,e.details.is_visible=1==e.details.is_visible,e.details.is_search=1==e.details.is_search,e.details.is_required=1==e.details.is_required,e.details.is_variation=1==e.details.is_variation,e.details.is_customizable=1==e.details.is_customizable,e.details.is_unique=1==e.details.is_unique,e.details.is_comparable=1==e.details.is_comparable)}))}]),e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.productType,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.ptype_id===t.ptype_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.ptype_id!==t.ptype_id}),e.deleteSomeData=e.selectedDatas.length>0},e.newEntry=function(){if(_.isUndefined(e.details.attrib_type_id))return void r.error("Please select Attribute Type on General Entry Tab","Error");var i=t.open({animation:!0,templateUrl:"./modules/attributes/productType.attributes.modal.html",controller:"producttypeAttributeModalCtrl",size:"md",resolve:{attributes:function(){return{attrib_type_id:e.details.attrib_type_id,attributeTypes:e.attributeTypes,attribute_id:s.att_id}}}});i.result.then(function(e){})},e.saveAttribute=function(){s.att_id?i.updateAttribute(s.att_id,e.details).then(function(e){if(200==e.statusCode&&e.response.success)a(function(){r.success("Successfully Update","Success"),l.reload()},300);else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void r.error(e.response.msg,"Error");_.each(e.response.result,function(e){r.warning(e.msg,"Warning")})}}):i.saveAttribute(e.details).then(function(e){if(200==e.statusCode&&e.response.success)a(function(){r.success("Successfully Added","Success"),l.go("main.settings-attributes-add",{att_id:e.response.result},{reload:!0})},300);else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void r.error(e.response.msg,"Error");_.each(e.response.result,function(e){r.warning(e.msg,"Warning")})}})}}angular.module("POS17").controller("attributeDetailsController",e),e.$inject=["$scope","$uibModal","$stateParams","attributeFactory","$timeout","toastr","$state","ptypeFactory"]}();
!function(){"use strict";function e(e,t,s,o,a,r,n,c,l,u){e.selectDeselectAll=!1,e.selectedDatas=[];var i=function(){e.attribisLoading=!0,e.groups=[],e.attributecopy=[],e.attributeGroupTable=new u({page:1,count:10},{counts:[10,25,50,100],getData:function(t,o){c.getAllAttributeGroup().then(function(a){if(200==a.statusCode&&a.response.success){var n=a.response.result;if(_.each(n,function(e){e.date_created=moment(e.date_created).format("YYYY-MM-DD")}),e.attributecopy=angular.copy(e.groups),e.txtSearch){e.groups=s("filter")(n,e.txtSearch),o.total(e.groups.length);var c=e.groups.slice((o.page()-1)*o.count(),o.page()*o.count());t.resolve(c)}else{e.groups=n,o.total(e.groups.length);var c=e.groups.slice((o.page()-1)*o.count(),o.page()*o.count());t.resolve(c)}e.attribisLoading=!1}else e.attribisLoading=!1,r.error(a.response.msg,"Error")})}})};e.refresh=function(){e.attribisLoading=!1,e.attributeGroupTable.reload()},e.searchData=function(){e.attributeGroupTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.groups,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.attgrp_id===t.attgrp_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.attgrp_id!==t.attgrp_id}),e.deleteSomeData=e.selectedDatas.length>0},e.toggleModal=function(t){a.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){c.deleteAttributeGroup(t).then(function(e){return 200==e.statusCode&&e.response.success?(r.success(e.response.msg,"Success"),void o.reload()):void r.error(e.response.msg,"Error")})},function(e){console.log("Modal promise close: ")})},e.deleteSelected=function(){a.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(s,a){s.selected&&(console.log("groups: ",s),c.deleteAttributeGroup(s.attgrp_id).then(function(s){return console.log("data: ",s.response),200==s.statusCode&&s.response.success?(r.success(s.response.msg,"Success"),++t,t==e.selectedDatas.length&&o.reload(),a(),void 0):void r.error(s.response.msg,"Error")}))})})},e.addGroups=function(s){var o=t.open({animation:!0,templateUrl:"./modules/attributes/attribute.groups.modal.html",controller:"attributeModal",size:"md",resolve:{items:function(){return s}}});o.result.then(function(t){e.selected=t},function(){l.info("Modal dismissed at: "+new Date)})},i()}function t(e,t,s,o,a,r,n){e.items=o,e.group={},console.log("items:",e.items),e.items&&a.getAttributeGroupDetails(e.items).then(function(t){200==t.statusCode&&t.response.success&&(console.log("data:",t.response.result),e.group=t.response.result)}),e.saveGroup=function(){e.items?a.updateAttributeGroup(e.items,e.group).then(function(e){200==e.statusCode&&e.response.success&&(console.log("UPDATE"),n.success("Successfully Update","Success"),t.reload(),s.close(e.response.success))}):a.saveAttributeGroup(e.group).then(function(o){200==o.statusCode&&o.response.success&&r(function(){e.$apply(function(){n.success("Successfully Added","Success"),t.reload(),s.close(o.response.success)})},100)})},e.cancel=function(){s.dismiss("cancel"),t.reload()}}angular.module("POS17").controller("attributeGroups",e).controller("attributeModal",t),e.$inject=["$scope","$uibModal","$filter","$state","ngDialog","toastr","$timeout","attributeFactory","$log","ngTableParams"],t.$inject=["$scope","$state","$uibModalInstance","items","attributeFactory","$timeout","toastr"]}();
!function(){"use strict";function e(e,t,a,s,l,c){e.selectDeselectAll=!1,e.selectedDatas=[];var n=function(){e.attribisLoading=!0,e.types=[],e.typescopy=[],e.attributeTypesTable=new c({page:1,count:10},{counts:[10,25,50,100],getData:function(a,c){l.getAllAttributeTypes().then(function(l){if(200==l.statusCode&&l.response.success){var n=l.response.result;if(_.each(e.types,function(e){e.date_created=moment(e.date_created).format("YYYY-MM-DD")}),e.attributecopy=angular.copy(e.types),e.txtSearch){e.types=t("filter")(n,e.txtSearch),c.total(e.types.length);var o=e.types.slice((c.page()-1)*c.count(),c.page()*c.count());a.resolve(o)}else{e.types=n,c.total(e.types.length);var o=e.types.slice((c.page()-1)*c.count(),c.page()*c.count());a.resolve(o)}e.attribisLoading=!1}else e.attribisLoading=!1,s.error(l.response.msg,"Error")})}})};e.refresh=function(){e.attribisLoading=!1,e.attributeTypesTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.types,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.searchData=function(){e.attributeTypesTable.reload()},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.id===t.id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.id!==t.id}),e.deleteSomeData=e.selectedDatas.length>0},e.deleteSelected=function(){a.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){})},n()}angular.module("POS17").controller("attributeTypes",e),e.$inject=["$scope","$filter","ngDialog","toastr","attributeFactory","ngTableParams"]}();
!function(){"use strict";function t(t,e,a,i,r,u,n,l){t.attrib={},t.attrib.attribute_list_value=[],t.attrib.attribute_list_value2=[];var o=_.find(a.attributeTypes,{attrib_type_id:a.attrib_type_id});t.attrib.attrib_type=o;var s=JSON.parse(n.get("user")),b=t.uploader=new i({url:r+u+"/attributevalues/"+a.attribute_id,method:"PUT",headers:{Authorization:"Bearer "+l.getUserToken(),accesskey:s.subscriptionKey}});b.filters.push({name:"imageFilter",fn:function(t,e){var a="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(a)}}),b.onBeforeUploadItem=function(t){t.alias="pb_image"},t.removethumb=function(){t.attrib.value_image=null},t.addtoList=function(){t.attrib.attribute_list_value.push({name:t.attrib.name,value:t.attrib.value}),t.attrib.name="",t.attrib.value=""},t.addtoList2=function(){t.attrib.attribute_list_value2.push({name:t.attrib.name,value:t.attrib.value}),t.attrib.name="",t.attrib.value=""},t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}angular.module("POS17").controller("producttypeAttributeModalCtrl",t),t.inject=["$scope","$uibModalInstance","attributes","FileUploader","API_URL","API_VERSION","localStorageService","AuthFctry"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(t,e){e.state("main.settings-categories",{url:"/settings/categories",templateUrl:"modules/category/categories.html",controller:"categoryController"}).state("main.settings-categories-add",{url:"/settings/categories/:c_id",templateUrl:"modules/category/category.detail.html",controller:"categoryDetailsController"})}])}();
!function(){"use strict";function e(e,t,o,s,c,a,l,n,r){e.selectDeselectAll=!1,e.selectedDatas=[];var i=function(){e.categoryIsLoading=!0,e.categories=[],e.categoriescopy=[],e.categoryTable=new r({page:1,count:10},{counts:[10,25,50,100],getData:function(t,s){l.getAllCategory().then(function(c){if(200==c.statusCode&&c.response.success){var l=c.response.result;if(e.categoriescopy=angular.copy(e.categories),e.txtSearch){e.categories=o("filter")(l,e.txtSearch),s.total(e.categories.length);var n=e.categories.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(n)}else{e.categories=l,s.total(e.categories.length);var n=e.categories.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(n)}e.categoryIsLoading=!1}else e.categoryIsLoading=!1,a.error(c.response.msg,"Error")})}})};e.refresh=function(){e.categoryIsLoading=!0,e.categoryTable.reload()},e.edit=function(e){s.go("main.settings-categories-add",{c_id:e})},e.searchData=function(){e.categoryTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.categories,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.c_id===t.c_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.c_id!==t.c_id}),e.deleteSomeData=e.selectedDatas.length>0},e.toggleModal=function(t){c.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){l.deleteCategory(t).then(function(e){return 200==e.statusCode&&e.response.success?(a.success(e.response.msg,"Success"),void s.reload()):void a.error(e.response.msg,"Error")})},function(e){console.log("Modal promise close: ")})},e.deleteSelected=function(){c.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(o,c){o.selected&&(console.log("category: ",o),l.deleteCategory(o.c_id).then(function(o){return console.log("data: ",o.response),200==o.statusCode&&o.response.success?(a.success(o.response.msg,"Success"),++t,t==e.selectedDatas.length&&s.reload(),c(),void 0):void a.error(o.response.msg,"Error")}))})})},i()}angular.module("POS17").controller("categoryController",e),e.$inject=["$scope","$http","$filter","$state","ngDialog","toastr","categoryFactory","$timeout","ngTableParams"]}();
!function(){"use strict";function e(e,s,t,r,n,a,o,c,i){e.details={},e.details.tags=[],e.tagsArr=[],e.newImage=!1;var u=[],l=[];i.getAllTags().then(function(s){200==s.statusCode&&s.response.success?e.tagsArr=s.response.result:c.error(s.response.msg,"Error")}),r.getAllCategory().then(function(s){if(200==s.statusCode&&s.response.success){for(var t=s.response.result,r=0;r<t.length;r++){var n=t[r],a=n.name,o=n.parent_id,c=n.c_id;l[o]?(n={parentid:o,label:a,item:n},null!=n&&(l[o].items||(l[o].items=[]),l[o].items[l[o].items.length]=n,l[c]=n)):(l[c]={parentid:o,label:a,item:n},u[c]=l[c])}e.categoryData=_(u).omit(_.isUndefined).omit(_.isNull).value()}}),t.c_id&&r.getCategoryDetails(t.c_id).then(function(s){200==s.statusCode&&s.response.success&&(e.details=s.response.result,i.getAllCategoryTags(t.c_id).then(function(s){200==s.statusCode&&s.response.success&&(e.details.tags=s.response.result)}))}),e.deleteProductTags=function(e){t.c_id&&i.deleteCategoryTag(t.c_id,e.tags_id).then(function(e){return 200==e.statusCode&&e.response.success?void c.success(e.response.msg,"Success"):void c.error(e.response.msg,"Error")})},e.tagTransform=function(e){return{tags:e}},e.clearInput=function(e){e.search=""},e.toplevelCategory=function(){e.TPchecked?e.mytree.currentNode={}:generateCategory()},e.changeItem=function(s){e.selectedItem=s},e.removethumb=function(){e.details.c_image=null,e.newImage=!1},e.upload=function(s){e.newImage=!0},e.saveCategory=function(){e.mytree&&angular.isObject(e.mytree.currentNode)&&!_.isEmpty(e.mytree.currentNode)?e.details.parent_id=e.mytree.currentNode.item.c_id:e.details.parent_id=null,async.waterfall([function(s){t.c_id?r.updateCategory(t.c_id,e.details).then(function(e){if(200==e.statusCode&&e.response.success)c.success(e.response.msg,"Success"),s(null,t.c_id);else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void c.error(e.response.msg,"Error");_.each(e.response.result,function(e){c.warning(e.msg,"Warning")})}}):r.saveCategory(e.details).then(function(e){if(200==e.statusCode&&e.response.success)c.success(e.response.msg,"Success"),s(null,e.response.result);else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void c.error(e.response.msg,"Error");_.each(e.response.result,function(e){c.warning(e.msg,"Warning")})}})},function(s,t){var r=1;e.details.tags.length>0?async.eachSeries(e.details.tags,function(t,n){t.isTag?i.saveTags(t).then(function(e){return 200==e.statusCode&&e.response.success?void i.saveCategoryTags(s,{tag_id:e.response.result}).then(function(e){return 200==e.statusCode&&e.response.success?(r++,void n()):void c.error(e.response.msg,"Error")}):void c.error(e.response.msg,"Error")}):i.saveCategoryTags(s,{tag_id:t.tags_id}).then(function(e){return 200==e.statusCode&&e.response.success?(r++,void n()):void c.error(e.response.msg,"Error")}),r>=e.details.tags.length&&callback(null,s)}):callback(null,s)},function(t,r){e.newImage&&e.details.c_image?n.upload({url:a+o+"categories/"+t+"/upload-image",data:{c_image:e.details.c_image},method:"PUT"}).then(function(e){if(200===e.data.statusCode&&e.data.response.success)c.success("Image successfully uploaded","Success"),s.go(s.current,{c_id:t},{reload:!0});else{if(400!==e.data.statusCode||e.data.response.success||!_.isArray(e.data.response.result))return void c.error(e.data.response.msg,"Error");_.each(e.data.response.result,function(e){c.warning(e.msg,"Warning")})}},function(e){console.log("Error status: "+e.status)},function(e){parseInt(100*e.loaded/e.total)}):s.go(s.current,{c_id:t},{reload:!0})}])}}angular.module("POS17").controller("categoryDetailsController",e),e.$inject=["$scope","$state","$stateParams","categoryFactory","Upload","API_URL","API_VERSION","toastr","tagsFactory"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(e,r){r.state("main.settings-currencies",{url:"/settings/currencies",templateUrl:"modules/currencies/currencies.html",controller:"currenciesController"})}])}();
!function(){"use strict";function e(e,r,c,n,s,t){var o=function(){e.currencyisLoading=!0,e.currencies=[],e.currenciescopy=[],e.currenciesTable=new s({page:1,count:10},{counts:[10,25,50,100],getData:function(c,s){n.getAllCurrencies().then(function(n){if(200==n.statusCode&&n.response.success){var o=n.response.result;if(e.currenciescopy=angular.copy(e.currencies),e.txtSearch){e.currencies=r("filter")(o,e.txtSearch),s.total(e.currencies.length);var u=e.currencies.slice((s.page()-1)*s.count(),s.page()*s.count());c.resolve(u)}else{e.currencies=o,s.total(e.currencies.length);var u=e.currencies.slice((s.page()-1)*s.count(),s.page()*s.count());c.resolve(u)}e.currencyisLoading=!1}else e.currencyisLoading=!1,t.error(n.response.msg,"Error")})}})};e.searchData=function(){e.currenciesTable.reload()},e.refresh=function(){e.currencyisLoading=!0,e.currenciesTable.reload()},o()}angular.module("POS17").controller("currenciesController",e),e.$inject=["$scope","$filter","$timeout","currencyFactory","ngTableParams","toastr"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(t,e){e.state("main.settings-producttype",{url:"/settings/producttype",templateUrl:"modules/producttype/productTypes.html",controller:"productTypeController"}).state("main.settings-producttype-add",{url:"/settings/producttype/:ptype_id",templateUrl:"modules/producttype/productType.detail.html",controller:"producttypeDetailController"})}])}();
!function(){"use strict";function e(e,t,s,o,c,l,n,a,r){e.typeisLoading=!0,e.selectDeselectAll=!1,e.selectedDatas=[];var p=function(){e.typeisLoading=!0,e.producttypes=[],e.producttypescopy=[],e.productTypeTable=new r({page:1,count:10},{counts:[10,25,50,100],getData:function(t,s){n.getAllProdType().then(function(c){if(200==c.statusCode&&c.response.success){var n=c.response.result;if(e.producttypescopy=angular.copy(e.producttypes),e.txtSearch){e.producttypes=o("filter")(n,e.txtSearch),s.total(e.producttypes.length);var a=e.producttypes.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(a)}else{e.producttypes=n,s.total(e.producttypes.length);var a=e.producttypes.slice((s.page()-1)*s.count(),s.page()*s.count());t.resolve(a)}e.typeisLoading=!1}else e.typeisLoading=!1,l.error(c.response.msg,"Error")})}})};e.refresh=function(){e.typeisLoading=!0,e.productTypeTable.reload()},e.edit=function(e){s.go("main.settings-producttype-add",{ptype_id:e})},e.searchData=function(){e.productTypeTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.producttypes,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.ptype_id===t.ptype_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.ptype_id!==t.ptype_id}),e.deleteSomeData=e.selectedDatas.length>0},e.toggleModal=function(t){c.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){n.deleteProductType(t).then(function(e){return 200==e.statusCode&&e.response.success?(l.success(e.response.msg,"Success"),void s.reload()):void l.error(e.response.msg,"Error")})},function(e){console.log("Modal promise close: ")})},e.deleteSelected=function(){c.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var t=0;async.each(e.selectedDatas,function(o,c){o.selected&&(console.log("producttype: ",o),n.deleteProductType(o.ptype_id).then(function(o){return console.log("data: ",o.response),200==o.statusCode&&o.response.success?(l.success(o.response.msg,"Success"),++t,t==e.selectedDatas.length&&s.reload(),c(),void 0):void l.error(o.response.msg,"Error")}))})})},p()}angular.module("POS17").controller("productTypeController",e),e.$inject=["$scope","$http","$state","$filter","ngDialog","toastr","ptypeFactory","$timeout","ngTableParams"]}();
!function(){"use strict";function e(e,s,t,r,n,o,a,u,c,i){s.details={},s.details.tags=[],s.tags=[],s.tagsArr=[],s.newImage=!1,i.getAllTags().then(function(e){200==e.statusCode&&e.response.success?s.tagsArr=e.response.result:a.error(e.response.msg,"Error")}),r.ptype_id&&n.getAllProdTypeDetails(r.ptype_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details=e.response.result,i.getAllProductTypeTags(r.ptype_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details.tags=e.response.result)}))}),s.removethumb=function(){s.details.c_image=null,s.newImage=!1},s.upload=function(e){s.newImage=!0},s.tagTransform=function(e){return{tags:e}},s.clearInput=function(e){e.search=""},s.deleteProductTags=function(e){console.log("deleteProductBundleTag: ",e),r.ptype_id&&i.deleteProductTypeTag(r.ptype_id,e.tags_id).then(function(e){return 200==e.statusCode&&e.response.success?void a.success(e.response.msg,"Success"):void a.error(e.response.msg,"Error")})},s.saveProductType=function(){async.waterfall([function(t){r.ptype_id?n.updateProductType(r.ptype_id,s.details).then(function(e){if(200==e.statusCode&&e.response.success)a.success(e.response.msg,"Success"),t(null,r.ptype_id);else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void a.error(e.response.msg,"Error");_.each(e.response.result,function(e){a.warning(e.msg,"Warning")})}}):n.saveProductType(s.details).then(function(s){if(200==s.statusCode&&s.response.success)a.success(s.response.msg,"Success"),t(null,s.response.result),e.go("main.settings-producttype-add",{ptype_id:s.response.result},{reload:!0});else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void a.error(s.response.msg,"Error");_.each(s.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(e,t){var r=1;s.details.tags.length>0?async.eachSeries(s.details.tags,function(n,o){n.isTag?i.saveTags(n).then(function(s){return 200==s.statusCode&&s.response.success?void i.saveProductTypeTags(e,{tag_id:s.response.result}).then(function(e){return 200==e.statusCode&&e.response.success?(r++,void o()):void a.error(e.response.msg,"Error")}):void a.error(s.response.msg,"Error")}):i.saveProductTypeTags(e,{tag_id:n.tags_id}).then(function(e){return 200==e.statusCode&&e.response.success?(r++,void o()):void a.error(e.response.msg,"Error")}),r>=s.details.tags.length&&t(null,e)}):t(null,e)},function(t,r){s.newImage&&s.details.ptype_image?o.upload({url:u+c+"producttype/"+t+"/upload-image",data:{ptype_image:s.details.ptype_image},method:"PUT"}).then(function(r){if(200===r.data.statusCode&&r.data.response.success)s.newImage&&a.success("Image successfully uploaded","Success"),e.go(e.current,{ptype_id:t},{reload:!0});else{if(400!==r.data.statusCode||r.data.response.success||!_.isArray(r.data.response.result))return void a.error(r.data.response.msg,"Error");_.each(r.data.response.result,function(e){a.warning(e.msg,"Warning")})}},function(e){console.log("Error status: "+e.status)},function(e){parseInt(100*e.loaded/e.total)}):e.go(e.current,{ptype_id:t},{reload:!0})}])}}angular.module("POS17").controller("producttypeDetailController",e),e.$inject=["$state","$scope","$http","$stateParams","ptypeFactory","Upload","toastr","API_URL","API_VERSION","tagsFactory"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(s,e){e.state("main.settings-suppliers",{url:"/settings/suppliers",templateUrl:"modules/suppliers/suppliers.html",controller:"suppliersController"}).state("main.settings-suppliers-add",{url:"/settings/suppliers/:s_id",templateUrl:"modules/suppliers/supplier.detail.html",controller:"suppliersDetailsController"})}])}();
!function(){"use strict";function e(e,s,t,l,o,n,r,c,a){e.selectDeselectAll=!1,e.selectedDatas=[];var i=function(){e.supplierisLoading=!0,e.suppliers=[],e.supplierscopy=[],e.supplierTable=new a({page:1,count:10},{counts:[10,25,50,100],getData:function(s,l){n.getAllSuppliers().then(function(o){if(200==o.statusCode&&o.response.success){var n=o.response.result;if(e.supplierscopy=angular.copy(e.suppliers),e.txtSearch){e.suppliers=t("filter")(n,e.txtSearch),l.total(e.suppliers.length);var r=e.suppliers.slice((l.page()-1)*l.count(),l.page()*l.count());s.resolve(r)}else{e.suppliers=n,l.total(e.suppliers.length);var r=e.suppliers.slice((l.page()-1)*l.count(),l.page()*l.count());s.resolve(r)}e.supplierisLoading=!1}else e.supplierisLoading=!1,c.error(o.response.msg,"Error")})}})};e.refresh=function(){e.supplierisLoading=!0,e.supplierTable.reload()},e.edit=function(e){l.go("main.settings-suppliers-add",{s_id:e})},e.searchData=function(){e.supplierTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.suppliers,function(s){s.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(s)})},e.checkDataChanges=function(s){s.selected?_.find(e.selectedDatas,function(e){return e.s_id===s.s_id})||e.selectedDatas.push(s):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.s_id!==s.s_id}),e.deleteSomeData=e.selectedDatas.length>0},e.toggleModal=function(s){o.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){n.deleteSupplier(s).then(function(e){return 200==e.statusCode&&e.response.success?(c.success(e.response.msg,"Success"),void l.reload()):void c.error(e.response.msg,"Error")})},function(e){console.log("Modal promise close: ")})},e.deleteSelected=function(){o.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var s=0;async.each(e.selectedDatas,function(t,o){t.selected&&(console.log("supplier: ",t),n.deleteSupplier(t.s_id).then(function(t){return console.log("data: ",t.response),200==t.statusCode&&t.response.success?(c.success(t.response.msg,"Success"),++s,s==e.selectedDatas.length&&l.reload(),o(),void 0):void c.error(t.response.msg,"Error")}))})})},i()}angular.module("POS17").controller("suppliersController",e),e.$inject=["$scope","$http","$filter","$state","ngDialog","supplierFctry","$timeout","toastr","ngTableParams"]}();
!function(){"use strict";function s(s,e,r,t,n,o,u,i){s.details={},s.details.tags=[],s.tagsArr=[],i.getAllTags().then(function(e){200==e.statusCode&&e.response.success?s.tagsArr=e.response.result:n.error(e.response.msg,"Error")}),r.s_id&&t.getAllSuppliersDetails(r.s_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details=e.response.result,i.getAllSupplierTags(r.s_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details.tags=e.response.result)}))}),s.deleteProductTags=function(s){r.s_id&&i.deleteSupplierTag(r.s_id,s.tags_id).then(function(s){return 200==s.statusCode&&s.response.success?void n.success(s.response.msg,"Success"):void n.error(s.response.msg,"Error")})},s.tagTransform=function(s){return{tags:s}},s.clearInput=function(s){s.search=""},s.saveSupplier=function(){async.waterfall([function(e){r.s_id?t.updateSupplier(r.s_id,s.details).then(function(s){if(200==s.statusCode&&s.response.success)n.success(s.response.msg,"Success"),e(null,r.s_id);else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void n.error(s.response.msg,"Error");_.each(s.response.result,function(s){n.warning(s.msg,"Warning")})}}):t.saveSupplier(s.details).then(function(s){if(200==s.statusCode&&s.response.success)n.success(s.response.msg,"Success"),e(null,s.response.result);else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void n.error(s.response.msg,"Error");_.each(s.response.result,function(s){n.warning(s.msg,"Warning")})}})},function(e,r){console.log("s_id: ",e);var t=1;s.details.tags.length>0?async.eachSeries(s.details.tags,function(o,u){o.isTag?i.saveTags(o).then(function(s){return 200==s.statusCode&&s.response.success?void i.saveSupplierTags(e,{tag_id:s.response.result}).then(function(s){return 200==s.statusCode&&s.response.success?(t++,void u()):void n.error(s.response.msg,"Error")}):void n.error(s.response.msg,"Error")}):i.saveSupplierTags(e,{tag_id:o.tags_id}).then(function(s){return 200==s.statusCode&&s.response.success?(t++,void u()):void n.error(s.response.msg,"Error")}),t>=s.details.tags.length&&r(null,e)}):r(null,e)},function(s,e){console.log("callback s_id: ",s),o.go("main.settings-suppliers-add",{s_id:s},{reload:!0})}])}}angular.module("POS17").controller("suppliersDetailsController",s),s.$inject=["$scope","$http","$stateParams","supplierFctry","toastr","$state","$timeout","tagsFactory"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(r,a){a.state("main.calendars",{url:"/calendars",templateUrl:"modules/calendar/calendar.html",controller:"calendarCtrl"})}])}();
!function(){"use strict";function e(e){$(function(){function e(e){e.each(function(){var e={title:$.trim($(this).text())};$(this).data("eventObject",e)})}e($("#external-events div.external-event"));var t=new Date,o=t.getDate(),r=t.getMonth(),a=t.getFullYear();$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},buttonText:{today:"today",month:"month",week:"week",day:"day"},events:[{title:"All Day Event",start:new Date(a,r,1),backgroundColor:"#f56954",borderColor:"#f56954"},{title:"Long Event",start:new Date(a,r,o-5),end:new Date(a,r,o-2),backgroundColor:"#f39c12",borderColor:"#f39c12"},{title:"Meeting",start:new Date(a,r,o,10,30),allDay:!1,backgroundColor:"#0073b7",borderColor:"#0073b7"},{title:"Lunch",start:new Date(a,r,o,12,0),end:new Date(a,r,o,14,0),allDay:!1,backgroundColor:"#00c0ef",borderColor:"#00c0ef"},{title:"Birthday Party",start:new Date(a,r,o+1,19,0),end:new Date(a,r,o+1,22,30),allDay:!1,backgroundColor:"#00a65a",borderColor:"#00a65a"},{title:"Click for Google",start:new Date(a,r,28),end:new Date(a,r,29),url:"http://google.com/",backgroundColor:"#3c8dbc",borderColor:"#3c8dbc"}],editable:!0,droppable:!0,drop:function(e,t){var o=$(this).data("eventObject"),r=$.extend({},o);r.start=e,r.allDay=t,r.backgroundColor=$(this).css("background-color"),r.borderColor=$(this).css("border-color"),$("#calendar").fullCalendar("renderEvent",r,!0),$("#drop-remove").is(":checked")&&$(this).remove()}});var n="#3c8dbc";$("#color-chooser-btn");$("#color-chooser > li > a").click(function(e){e.preventDefault(),n=$(this).css("color"),$("#add-new-event").css({"background-color":n,"border-color":n})}),$("#add-new-event").click(function(t){t.preventDefault();var o=$("#new-event").val();if(0!=o.length){var r=$("<div />");r.css({"background-color":n,"border-color":n,color:"#fff"}).addClass("external-event"),r.html(o),$("#external-events").prepend(r),e(r),$("#new-event").val("")}})})}angular.module("POS17").controller("calendarCtrl",e),e.$inject=["$scope"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(e,r){r.state("main.settings-humanresource",{url:"/settings/humanresource",templateUrl:"modules/humanresource/humanresource.html",controller:"personController"}).state("main.settings-humanresource-detail",{url:"/settings/humanresource/:person_id",templateUrl:"modules/humanresource/humanresource.detail.html",controller:"personDetailController"})}])}();
!function(){"use strict";function e(e,s,t,o,n,l,r,a,c,i){e.selectDeselectAll=!1,e.applicationStatus="All",e.displayModel="List",e.selectedDatas=[];var p=function(){e.personisLoading=!0,e.persons=[],e.personscopy=[],e.personsTable=new i({page:1,count:10},{counts:[10,25,50,100],getData:function(s,t){r.getAllPerson().then(function(n){if(200==n.statusCode&&n.response.success){var l=n.response.result;e.personscopy=angular.copy(e.persons),e.txtSearch&&"All"==e.applicationStatus?e.persons=o("filter")(l,e.txtSearch):e.txtSearch&&"Employee"==e.applicationStatus?(e.persons=o("filter")(l,{per_type_id:1}),e.persons=o("filter")(e.persons,e.txtSearch)):e.txtSearch&&"Customer"==e.applicationStatus?(e.persons=o("filter")(l,{per_type_id:2}),e.persons=o("filter")(e.persons,e.txtSearch)):_.isUndefined(e.txtSearch)&&"All"==e.applicationStatus?e.persons=l:_.isUndefined(e.txtSearch)&&"Employee"==e.applicationStatus?e.persons=o("filter")(l,{per_type_id:1}):_.isUndefined(e.txtSearch)&&"Customer"==e.applicationStatus?e.persons=o("filter")(l,{per_type_id:2}):e.persons=l,t.total(e.persons.length);var r=e.persons.slice((t.page()-1)*t.count(),t.page()*t.count());s.resolve(r),e.personisLoading=!1}else e.personisLoading=!1,a.error(n.response.msg,"Error")})}})};e.refresh=function(){e.personsTable.reload()},e.updateStatus=function(s){e.applicationStatus=s,e.personsTable.reload()},e.searchData=function(){e.personsTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.persons,function(s){s.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(s)})},e.checkDataChanges=function(s){s.selected?_.find(e.selectedDatas,function(e){return e.person_id===s.person_id})||e.selectedDatas.push(s):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.person_id!==s.person_id}),e.deleteSomeData=e.selectedDatas.length>0},e.toggleModal=function(s){l.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){r.deletePersonel(s).then(function(e){return 200==e.statusCode&&e.response.success?(a.success(e.response.msg,"Success"),void n.reload()):void a.error(e.response.msg,"Error")})},function(e){console.log("Modal promise close: ")})},e.deleteSelected=function(){l.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var s=0;async.each(e.selectedDatas,function(t,o){t.selected&&(console.log("person: ",t),r.deletePersonel(t.person_id).then(function(t){return console.log("data: ",t.response),200==t.statusCode&&t.response.success?(a.success(t.response.msg,"Success"),++s,s==e.selectedDatas.length&&n.reload(),o(),void 0):void a.error(t.response.msg,"Error")}))})})},p()}angular.module("POS17").controller("personController",e),e.$inject=["$scope","$rootScope","$http","$filter","$state","ngDialog","humanFactory","toastr","$timeout","ngTableParams"]}();
!function(){"use strict";function s(s,e,n,o,t,r,a,u,l){console.log("$stateParams:",n.person_id),s.stores=[],s.persons=[],s.details={},s.newImage=!1,o.getPersonType().then(function(e){200==e.statusCode&&e.response.success&&(s.persons=e.response.result,console.log("$scope.persons:",s.persons))}),async.waterfall([function(s){t.getAllStore().then(function(e){200==e.statusCode&&e.response.success&&s(null,e.response.result)})},function(s,e){o.getTimeZone().then(function(n){200==n.statusCode&&n.response.success&&e(null,s,n.response.result)})},function(e,t,r){s.stores=e,s.timezone=t,n.person_id&&o.getAllPersonDetail(n.person_id).then(function(e){200==e.statusCode&&e.response.success&&(s.details=e.response.result,console.log("$scope.details:",s.details),s.details.isActive=1==s.details.isActive,s.details.person_img=s.details.image)})}]),s.removethumb=function(){s.details.person_img=null,s.newImage=!1},s.upload=function(e){s.newImage=!0},s.savePersonel=function(){async.waterfall([function(e){n.person_id?o.updatePersonel(n.person_id,s.details).then(function(s){if(200==s.statusCode&&s.response.success)l.success(s.response.msg,"Success"),e(null,n.person_id);else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void l.error(s.response.msg,"Error");_.each(s.response.result,function(s){l.warning(s.msg,"Warning")})}}):o.savePersonel(s.details).then(function(s){if(200==s.statusCode&&s.response.success)l.success(s.response.msg,"Success"),e(null,s.response.result);else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void l.error(s.response.msg,"Error");_.each(s.response.result,function(s){l.warning(s.msg,"Warning")})}})},function(e,n){s.newImage&&s.details.image?r.upload({url:a+u+"persons/"+e+"/upload-image",data:{person_img:s.details.image},method:"PUT"}).then(function(s){if(200===s.data.statusCode&&s.data.response.success)l.success("Image successfully uploaded","Success"),n(null,e);else{if(400!==s.data.statusCode||s.data.response.success||!_.isArray(s.data.response.result))return void l.error(s.data.response.msg,"Error");_.each(s.data.response.result,function(s){l.warning(s.msg,"Warning")})}},function(s){console.log("Error status: "+s.status)},function(s){parseInt(100*s.loaded/s.total)}):n(null,e)},function(s,n){console.log("personel: ",s),e.go(e.current,{person_id:s},{reload:!0})}])}}angular.module("POS17").controller("personDetailController",s),s.$inject=["$scope","$state","$stateParams","humanFactory","storeFactory","Upload","API_URL","API_VERSION","toastr"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(s,e){e.state("main.settings-useraccounts",{url:"/settings/useraccounts",templateUrl:"modules/useraccess/useraccess.html",controller:"useraccountsCtrl"}).state("main.settings-permissions",{url:"/settings/permissions/:groupId",templateUrl:"modules/useraccess/permission.html",controller:"permissionCtrl"})}])}();
!function(){"use strict";function e(e,s,o,r,t,n,u,l,c){e.selectDeselectAll=!1,e.selectDeselectAll2=!1,e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.users,function(s){s.selected=e.selectDeselectAll})},e.showUserRoles=function(s){e.useraccountRoles=_.map(e.usergroups,function(e){return e.role_id==s})};var a=function(){e.usergroups=[],e.usersGroupTable=new c({page:1,count:10},{counts:[10,25,50,100],getData:function(s,o){l.getAllUserGroups().then(function(r){if(200==r.statusCode&&r.response.success){var n=r.response.result;e.usersgroupcopy=angular.copy(r.response.result),e.txtSearch?e.usergroups=$filter("filter")(n,e.txtSearch):e.usergroups=n,o.total(e.usergroups.length);var u=e.usergroups.slice((o.page()-1)*o.count(),o.page()*o.count());s.resolve(u)}else t.error(r.response.msg,"Error"),callback(null,"error")})}})},i=function(){e.users=[],e.usersTable=new c({page:1,count:10},{counts:[10,25,50,100],getData:function(s,o){u.getAllUserAccounts().then(function(r){if(200==r.statusCode&&r.response.success){var n=r.response.result;_.each(n,function(s){s.role_id&&(s.userRoles=_.map(s.role_id.split(","),function(s){return _.find(e.usersgroupcopy,function(e){return e.role_id==s})}))}),e.txtSearch2?e.users=$filter("filter")(n,e.txtSearch2):e.users=n,o.total(e.users.length);var u=e.users.slice((o.page()-1)*o.count(),o.page()*o.count());s.resolve(u)}else t.error(r.response.msg,"Error"),$activityIndicator.stopAnimating(),callback(null,"error")})}})};e.newUserAccount=function(e,r){var t=o.open({animation:!0,templateUrl:"modules/useraccess/users.modal.html",controller:"useraccountCtrl",backdrop:"static",size:"modal-md",resolve:{user:function(){return{userID:e,person_id:r}}}});t.result.then(function(){s.reload()},function(){console.info("Modal dismissed")})},e.newUserGroup=function(e){console.log("groupID: ",e);var r=o.open({animation:!0,templateUrl:"modules/useraccess/usergroups.modal.html",controller:"usergroupCtrl",backdrop:"static",size:"modal-md",resolve:{userGroup:function(){return e}}});r.result.then(function(e){console.log("response: ",e),"save"===e&&s.reload()},function(){console.info("Modal dismissed")})},e.toggleModal=function(s,o,r){console.log(r),n.openConfirm({templateUrl:"templates/template/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){"users"===r?e.removeUser(s):e.removeUserGroup(s)},function(e){console.log("Modal promise close: ")})},e.removeUserGroup=function(e){console.log("id: ",e),l.deleteUserGroup(e).then(function(e){console.log("data: ",e),200==e.statusCode&&e.response.success?(t.success(e.response.msg,"Success"),r(function(){s.reload()},300)):t.error(e.response.msg,"Error")})},e.removeUser=function(e){u.deleteUserAccount(e).then(function(e){200==e.statusCode&&e.response.success?(t.success(e.response.msg,"Success"),r(function(){s.reload()},300)):t.error(e.response.msg,"Error")})},e.setUsersSubscription=function(e){var r=o.open({animation:!0,templateUrl:"modules/useraccess/subscription.modal.html",controller:"usersubscriptionCtrl",backdrop:"static",size:"sm",resolve:{user:function(){return e}}});r.result.then(function(){s.reload()},function(){console.info("Modal dismissed")})},e.refreshUser=function(){e.usersTable.reload()},e.refreshUserGroup=function(){e.usersGroupTable.reload()},e.searchData=function(){e.usersGroupTable.reload()},e.searchData2=function(){e.usersTable.reload()},a(),i()}angular.module("POS17").controller("useraccountsCtrl",e),e.$inject=["$scope","$state","$uibModal","$timeout","toastr","ngDialog","useraccountsFctry","usergroupsFctry","ngTableParams"]}();
!function(){"use strict";function e(e,s,r,n,o,u,t){console.log("useraccountCtrl: ",o),e.inputType="password",e.users={},e.users.valid_until=new Date,e.employees=[],e.usergroups=[],e.popup1={opened:!1},async.waterfall([function(s){u.getAllEmployees().then(function(r){200==r.statusCode&&r.response.success?(e.employees=r.response.result,s(null,r)):s(null,"error")})},function(s,r){t.getAllUserGroups().then(function(s){200==s.statusCode&&s.response.success?(e.usergroups=s.response.result,r(null,e.usergroups)):r(null,"error")})},function(s,u){_.isUndefined(o)||(console.log("useraccountCtrl: "),n.getUserAccount(o.userID,o.person_id).then(function(s){if(200==s.statusCode&&s.response.success){e.users=s.response.result;var n=e.users.role_id.split(",");e.users.employee=_.find(e.employees,{emp_id:e.users.emp_id}),e.users.role=_.map(n,function(s){return _.find(e.usergroups,function(e){return e.role_id==s})}),e.users.valid_until=new Date(e.users.valid_until)}else r.error(s.response.msg,"Error")}))}]),e.open1=function(){e.popup1.opened=!0},e.hideShowPassword=function(){"password"==e.inputType?e.inputType="text":e.inputType="password"},e.generatePassword=function(){var s=n.generatePasswordString(8);e.users.password=s},e.setDefaultUName=function(s){s&&(e.users.username=s.lastname.toUpperCase())},e.saveUser=function(){var u=[];e.users.person_id=e.users.employee.person_id,e.users.role&&e.users.role.length>0?(_.each(e.users.role,function(e){u.push(e.role_id)}),e.users.role_id=u.join()):e.users.role_id="",_.isUndefined(o)?n.saveUserAccount(e.users).then(function(e){200==e.statusCode&&e.response.success?(r.success(e.response.msg,"Success"),s.close("save")):r.error(e.response.msg,"Error")}):n.updateUserAccount(o,e.users).then(function(e){200==e.statusCode&&e.response.success?(r.success(e.response.msg,"Success"),s.close("save")):r.error(e.response.msg,"Error")})},e.cancelUser=function(){s.dismiss("cancel")}}angular.module("POS17").controller("useraccountCtrl",e),e.$inject=["$scope","$uibModalInstance","toastr","useraccountsFctry","user","personFctry","usergroupsFctry"]}();
!function(){"use strict";angular.module("POS17").controller("usergroupCtrl",function(s,e,r,o,u){_.isUndefined(r)||u.getUserGroupById(r).then(function(e){200==e.statusCode&&e.response.success?_.isArray(e.response.result)&&(s.usergroup=e.response.result[0],console.log("$scope.usergroup: ",s.usergroup)):o.error(e.response.msg,"Error")}),s.saveUserGroup=function(){_.isUndefined(r)?u.createUserGroup(s.usergroup).then(function(s){200==s.statusCode&&s.response.success?(o.success(s.response.msg,"Success"),e.close("save")):o.error(s.response.msg,"Error")}):u.updateUserGroup(r,s.usergroup).then(function(s){200==s.statusCode&&s.response.success?(o.success(s.response.msg,"Success"),e.close("save")):o.error(s.response.msg,"Error")})},s.cancelUserGroup=function(){e.dismiss("cancel")}})}();
!function(){"use strict";function e(e,s,n,t,r,i){e.permissions=[],e.Groups=[],e.usergroups=[],e.isReset=!0,e.isUpdate=!0,e.generateAccessPermission=function(n){e.permissions=[],s(function(){_.isUndefined(n)?e.clear():r.generateAccessPermission(n).then(function(s){if(console.log("data: ",s),200==s.statusCode&&s.response.success){e.isUpdate=!1,e.isReset=!1;var n=s.response.result;n.length>0&&(e.permissions=n,_.each(e.permissions,function(e){e.DefaultReadDisable=!1,e.DefaultWriteDisable=!1,e.DefaultDeleteDisable=!1,e.DefaultPrintDisable=!1}))}})},300)},e.clear=function(){e.isUpdate=!0,e.isReset=!0,e.usergroupSelected=void 0,e.permissions=[],r.getAllModulesPermissions().then(function(s){if(200==s.statusCode&&s.response.success){var n=s.response.result;n.length>0&&(e.permissions=n,_.each(e.permissions,function(e){e.DefaultRead=!1,e.DefaultReadDisable=!0,e.DefaultWrite=!1,e.DefaultWriteDisable=!0,e.DefaultDelete=!1,e.DefaultDeleteDisable=!0,e.DefaultPrint=!1,e.DefaultPrintDisable=!0}))}})},e.reloadData=function(){_.isUndefined(e.usergroup)?e.clear():e.generateAccessPermission(e.usergroup.role_id)},e.UpdatePermission=function(){e.newPermission=angular.copy(e.permissions),r.setGroupPrivilege(e.usergroupSelected.role_id,e.newPermission).then(function(s){200==s.statusCode&&s.response.success?(t.success(s.response.msg,"Success"),e.reloadData()):t.error(s.response.msg,"Error")})},e.IntToBoolean=function(e){return 1==e},e.BooleanToInt=function(e){return e===!0?1:0},e.myFunction=function(){angular.element(document).ready(function(){$("#myTable").each(function(){var e=1,s=null,n=1;$("tbody",this).find("tr").each(function(){var t=$(this).find("td:nth-child("+e+")");null==s?(s=t,n=1):$(t).scope().row.name==$(s).scope().row.name?(t.remove(),s.attr("rowspan",n+1),n+=1):(s=t,n=1)})})})},_.isUndefined(n.groupId)?r.getAllModulesPermissions().then(function(s){if(200==s.statusCode&&s.response.success){var n=s.response.result;n.length>0&&(e.permissions=n,_.each(e.permissions,function(e){e.DefaultRead=!1,e.DefaultReadDisable=!0,e.DefaultWrite=!1,e.DefaultWriteDisable=!0,e.DefaultDelete=!1,e.DefaultDeleteDisable=!0,e.DefaultPrint=!1,e.DefaultPrintDisable=!0}),callback(null,e.permissions))}}):i.getUserGroupById(n.groupId).then(function(s){200==s.statusCode&&s.response.success?_.isArray(s.response.result)&&(e.usergroup=s.response.result[0],e.generateAccessPermission(e.usergroup.role_id)):t.error(s.response.msg,"Error")})}angular.module("POS17").controller("permissionCtrl",e),e.$inject=["$scope","$timeout","$stateParams","toastr","permissionFctry","usergroupsFctry"]}();
!function(){"use strict";function e(e,s,c,t,n,l){e.selectDeselectAll=!1,e.selectedDatas=[],console.log("usersubscriptionCtrl"),!_.isUndefined(t),e.changeSelectDeselectAll=function(){console.log("usersubscriptionCtrl"),_.each(s.profile.subscriptions,function(s){s.selected=e.selectDeselectAll})},e.saveUser=function(){!_.isUndefined(t)},e.cancelUser=function(){c.dismiss("cancel")}}angular.module("POS17").controller("usersubscriptionCtrl",e),e.$inject=["$scope","$rootScope","$uibModalInstance","user","toastr","useraccountsFctry"]}();
!function(){"use strict";function e(e,s,o){}function s(e,s,o,r,n,t,a,l,i,u,c){var d=o.getCurrentUser(),p=JSON.parse(d);e.pw1="password",e.user=p,e.details={},e.showUpload=!1,e.timezone=[],e.newImage=!1,p.person_id&&t.getAllPersonDetail(p.person_id).then(function(s){200==s.statusCode&s.response.success&&(e.details=s.response.result)}),t.getTimeZone().then(function(s){200==s.statusCode&&s.response.success&&(e.timezone=s.response.result)}),e.upload=function(s){e.newImage=!0,e.showUpload=!0},e.removethumb=function(){e.showUpload=!1,e.details.image=null,e.newImage=!1},e.savePersonDetail=function(){async.waterfall([function(s){p.person_id?t.updatePersonel(p.person_id,e.details).then(function(e){if(200==e.statusCode&&e.response.success)a.success(e.response.msg,"Success"),s(null,p.person_id),r.reload();else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void a.error(e.response.msg,"Error");_.each(e.response.result,function(e){a.warning(e.msg,"Warning")})}}):t.savePersonel(e.details).then(function(e){if(200==e.statusCode&&e.response.success)a.success(e.response.msg,"Success"),s(null,e.response.result),r.reload();else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void a.error(e.response.msg,"Error");_.each(e.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(s,o){console.log("user:",s),e.newImage&&e.details.image&&l.upload({url:i+u+"persons/"+s+"/upload-image",data:{person_img:e.details.image},method:"PUT"}).then(function(e){if(200===e.data.statusCode&&e.data.response.success)a.success("Image successfully uploaded","Success"),r.reload();else{if(400!==e.data.statusCode||e.data.response.success||!_.isArray(e.data.response.result))return void a.error(e.data.response.msg,"Error");_.each(e.data.response.result,function(e){a.warning(e.msg,"Warning")})}},function(e){console.log("Error status: "+e.status)},function(e){parseInt(100*e.loaded/e.total)})}])},e.saveUsername=function(){c.openConfirm({templateUrl:"modules/dialog/confirmDialog.html",scope:s,className:"ngdialog-theme-default"}).then(function(){t.updateUsername(s.profile).then(function(e){if(200==e.statusCode&&e.response.success)a.success("Successfully Update","Success"),r.reload();else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void a.error(resp.data.response.msg,"Error");_.each(e.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(e){console.log("Modal promise close: ")})},e.savePassword=function(){c.openConfirm({templateUrl:"modules/dialog/confirmDialog.html",scope:s,className:"ngdialog-theme-default"}).then(function(){t.updatePassword(e.details).then(function(e){if(200==e.statusCode&&e.response.success)a.success("Successfully Update Password","Success"),r.reload();else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void a.error(resp.data.response.msg,"Error");_.each(e.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(e){console.log("Modal promise close: ")})},e.addRecoveryEmail=function(){c.openConfirm({templateUrl:"modules/dialog/confirmDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){t.addRecoveryPassword({email_recovery:e.details.recovery_email}).then(function(e){if(200==e.statusCode&&e.response.success)a.success("Successfully Update","Success");else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void a.error(resp.data.response.msg,"Error");_.each(e.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(e){console.log("Modal promise close: ")})}}angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(e,s){s.state("main.settings-profile",{url:"/settings/profile",templateUrl:"modules/profile/profile.html",controller:"ProfileCtrl"}).state("main.settings-profile-details",{url:"/settings/profile/details/",templateUrl:"modules/profile/profile.details.html",controller:"ProfileDetailCtrl"})}]).controller("ProfileCtrl",e).controller("ProfileDetailCtrl",s),e.$inject=["$scope","$state","AuthFctry"],s.$inject=["$scope","$rootScope","AuthFctry","$state","$timeout","personFactory","toastr","Upload","API_URL","API_VERSION","ngDialog"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(e,r){r.state("main.reports-invoice",{url:"/reports/invoice",templateUrl:"modules/reports/invoice.html"})}])}();
!function(){"use strict";function t(t,s,e,o,n,r,u){t.currentPage=1,t.itemsPerPage=4,t.productIsLoading=!0,o.getAllProduct().then(function(e){if(t.products=[],200==e.statusCode&e.response.success){var o=e.response.result;s(function(){t.$apply(function(){t.products=o}),t.totalItems=t.products.length,s(function(){t.productIsLoading=!1},2e3)},100)}}),n.getAllPerson().then(function(e){if(t.persons=[],200==e.statusCode&&e.response.result){t.totalPersonel=e.response.result.length;var o=e.response.result;s(function(){t.$apply(function(){t.persons=o}),s(function(){t.productIsLoading=!1},2e3)},100)}}),async.waterfall([function(t){u.getAllUserGroups().then(function(s){200==s.statusCode&&s.response.success?t(null,s.response.result):(e.error(s.response.msg,"Error"),t(null,"error"))})},function(e,o){r.getAllUserAccounts().then(function(o){if(t.useraccounts=[],200==o.statusCode&&o.response.success){var n=o.response.result;_.each(n,function(t){t.role_id&&(t.userRoles=_.map(t.role_id.split(","),function(t){return _.find(e,function(s){return s.role_id==t})}))}),s(function(){t.$apply(function(){t.useraccounts=n}),s(function(){t.productIsLoading=!1},2e3)},100)}})}])}angular.module("POS17").config(["$stateProvider",function(t){t.state("main.dashboard",{url:"/dashboard",templateUrl:"modules/dashboard/dashboard1.html",controller:"DashboardCtrl"})}]).controller("DashboardCtrl",t),t.$inject=["$scope","$timeout","toastr","productFactory","humanFactory","useraccountsFctry","usergroupsFctry"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(t,e){e.state("main.quotes",{url:"/quotes",templateUrl:"modules/quotes/quotes.html",controller:"quotesController"}).state("main.quotes-detail",{url:"/quotes/:article_id",templateUrl:"modules/quotes/quotes.detail.html",controller:"quotesDetailController"})}])}();
!function(){"use strict";function t(t,e,l,a,s,o,n,c){t.selectDeselectAll=!1,t.applicationStatus="All",t.selectedDatas=[]}angular.module("POS17").controller("quotesController",t),t.$inject=["$scope","$state","$filter","toastr","$timeout","$stateParams","ngTableParams","ngDialog"]}();
!function(){"use strict";function t(t,a,e,o,l,n,r,i,s){}angular.module("POS17").controller("quotesDetailController",t),t.$inject=["$scope","$state","$filter","toastr","$timeout","$stateParams","ngTableParams","ngDialog","$uibModal"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(r,e){e.state("main.purchase_order",{url:"/purchaseorder",templateUrl:"modules/purchase_order/purchase_order.html",controller:"purchaseOrderController"}).state("main.add_order",{url:"/purchaseorder/add",templateUrl:"modules/purchase_order/addor.html",controller:"addOrderController"}).state("main.list",{url:"/purchaseorder/hold",templateUrl:"modules/purchase_order/producthold.html",controller:"holdController"}).state("main.productlist",{url:"/purchaseorder/productList",templateUrl:"modules/purchase_order/productList.html",controller:"productsController"})}])}();
!function(){"use strict";function r(r){}angular.module("POS17").controller("purchaseOrderController",r),r.$inject=["$scope"]}();
!function(){"use strict";function t(t,e,s,c,o,r,i,a,n,l){t.isColl=!1,t.tabs=[{title:"Dynamic Title 1",content:"Dynamic content 1"},{title:"Dynamic Title 2",content:"Dynamic content 2",disabled:!0}],t.model={name:"Tabs"},t.invoice={items:[{qty:0,description:"",cost:0}]},t.addItem=function(){t.invoice.items.push({qty:0,description:"",cost:0})},t.removeItem=function(e){t.invoice.items.splice(e,1)},t.subtotal=function(){var e=0;return angular.forEach(t.invoice.items,function(t){e+=t.qty*t.cost}),e},console.log("hi cuii"),t.currentPage=1,t.entryLimit=5,t.selectDeselectAll=!1,t.applicationStatus="All",t.displayModel="List",t.viewby=25,t.pageSize=t.viewby,t.currentPage=1,t.itemsPerPage=20,t.totalUsers=0,t.categories=[];t.side=!1;var u=function(){t.productIsLoading=!0,t.products=[],t.productscopy=[],t.productTable=new l({page:1,count:10},{counts:[5,10],getData:function(e,s){a.getAllProduct().then(function(o){if(200==o.statusCode&&o.response.success){var r=o.response.result;console.log("products:",o.response.result),t.totalItems=r.length,t.productscopy=angular.copy(t.products),t.txtSearch&&"All"==t.applicationStatus?t.products=c("filter")(r,t.txtSearch):t.txtSearch&&"Publish"==t.applicationStatus?(t.products=c("filter")(r,{is_published:1}),t.products=c("filter")(t.products,t.txtSearch)):t.txtSearch&&"Archived"==t.applicationStatus?(t.products=c("filter")(r,{is_archived:1}),t.products=c("filter")(t.products,t.txtSearch)):t.txtSearch&&"Draft"==t.applicationStatus?(t.products=c("filter")(r,{is_published:0}),t.products=c("filter")(t.products,t.txtSearch)):_.isUndefined(t.txtSearch)&&"All"==t.applicationStatus?t.products=r:_.isUndefined(t.txtSearch)&&"Publish"==t.applicationStatus?t.products=c("filter")(r,{is_published:1}):_.isUndefined(t.txtSearch)&&"Archived"==t.applicationStatus?t.products=c("filter")(r,{is_archived:1}):_.isUndefined(t.txtSearch)&&"Draft"==t.applicationStatus?t.products=c("filter")(r,{is_published:0}):t.products=r,s.total(t.products.length);var a=t.products.slice((s.page()-1)*s.count(),s.page()*s.count());e.resolve(a),t.productIsLoading=!1}else t.productIsLoading=!1,i.error(o.response.msg,"Error")})}})};n.getAllCategory().then(function(e){200==e.statusCode&&e.response.success&&(t.categories=e.response.result)}),t.setPage=function(e){t.currentPage=e},t.setItemsPerPage=function(e){t.itemsPerPage=e,t.currentPage=1},t.edit=function(t){o.go("main.products-add",{p_id:t})},t.searchData=function(){t.productTable.reload()},t.refresh=function(){t.productIsLoading=!0,t.productTable.reload()},t.updateStatus=function(e){console.log("status: ",e),t.applicationStatus=e,t.productTable.reload()},t.changeSelectDeselectAll=function(){t.selectDeselectAll=!t.selectDeselectAll,_.each(t.products,function(e){e.selected=t.selectDeselectAll})},n.getAllCategory().then(function(e){200==e.statusCode&&e.response.success&&(t.categories=e.response.result)}),u()}angular.module("POS17").controller("addOrderController",t),t.$inject=["$scope","$window","$http","$filter","$state","$timeout","toastr","productpurchasedFactory","categoryFactory","ngTableParams"]}();
!function(){"use strict";function t(t,o){t.value=o.value,t.fetch=function(){o.callFunction(),t.value=o.value}}function o(t,o){o.callFunction=function(){alert("Function Called Successfully"),o.value="Edoy"}}angular.module("POS17").controller("testCtrl",t).controller("testRootCtrl",o),t.$inject=["$scope","$rootScope"],o.$inject=["$scope","$rootScope"]}();
!function(){"use strict";function o(o){}angular.module("POS17").controller("holdController",o),o.$inject=["$scope"]}();
!function(){"use strict";function t(t,e,r,c,o,i,a,s,n){function u(){s.getAllCategory().then(function(e){if(200==e.statusCode&&e.response.success){for(var r=e.response.result,c=0;c<r.length;c++){var o=r[c],i=o.name,a=o.parent_id,s=o.c_id;l[a]?(o={parentid:a,label:i,item:o},null!=o&&(l[a].items||(l[a].items=[]),l[a].items[l[a].items.length]=o,l[s]=o)):(l[s]={parentid:s,label:i,item:o},d[s]=l[s])}t.categoryData=_(d).omit(_.isUndefined).omit(_.isNull).value(),t.categorycopy=angular.copy(t.categoryData)}})}t.search={},t.currentPage=1,t.entryLimit=5,t.selectDeselectAll=!1,t.applicationStatus="All",t.displayModel="List",t.viewby=25,t.pageSize=t.viewby,t.currentPage=1,t.itemsPerPage=20,t.totalUsers=0,t.categories=[];var d=[],l=[];t.side=!1,u();var p=function(){t.$watch("mytree.currentNode",function(e,r){var c=[],i={},a={};t.category=[],t.tree=[],t.currentNode=[];var s=[];if(t.mytree&&angular.isObject(t.mytree.currentNode)){t.currentNode=t.mytree.currentNode.item;var n=_.find(t.categorycopy,{parentid:t.currentNode.c_id});if(console.log("sample2:",n),_.isUndefined(n)){var u=_.map(t.productscopy,function(e){var r=_.filter(e.product_category,{category_id:t.currentNode.c_id});return r.length>0?_.find(r,function(t){return t}):void 0});console.log("product_categories:",u),a=_.filter(u,function(t){return _.isUndefined(t)?void 0:t}),console.log("product_categories2:",a),i=_.map(_.uniqBy(a,"product_id"),function(t){return t.product_id}),_.forEach(i,function(e){c.push(_.find(t.productscopy,{p_id:e}))})}else{var d=_.map(n.items,function(t){return{c_id:t.item.c_id}});_.each(t.productscopy,function(t){_.each(d,function(e){var r=_.filter(t.product_category,{category_id:e.c_id});r&&r.length>0&&s.push(r[0])})});var l=_.map(_.uniqBy(s,"product_id"),function(t){return t.product_id});_.forEach(l,function(e){c.push(_.find(t.productscopy,{p_id:e}))})}o(function(){t.$apply(function(){t.productTable.reload()})},100)}},!1)},f=function(){t.productIsLoading=!0,t.products=[],t.productscopy=[],t.productTable=new n({page:1,count:10},{counts:[10,25,50,100],getData:function(e,c){a.getAllProduct().then(function(o){if(200==o.statusCode&&o.response.success){var a=o.response.result;t.totalItems=a.length,t.productscopy=angular.copy(t.products),t.txtSearch&&"All"==t.applicationStatus?t.products=r("filter")(a,t.txtSearch):t.txtSearch&&"Publish"==t.applicationStatus?(t.products=r("filter")(a,{is_published:1}),t.products=r("filter")(t.products,t.txtSearch)):t.txtSearch&&"Archived"==t.applicationStatus?(t.products=r("filter")(a,{is_archived:1}),t.products=r("filter")(t.products,t.txtSearch)):t.txtSearch&&"Draft"==t.applicationStatus?(t.products=r("filter")(a,{is_published:0}),t.products=r("filter")(t.products,t.txtSearch)):_.isUndefined(t.txtSearch)&&"All"==t.applicationStatus?t.products=a:_.isUndefined(t.txtSearch)&&"Publish"==t.applicationStatus?t.products=r("filter")(a,{is_published:1}):_.isUndefined(t.txtSearch)&&"Archived"==t.applicationStatus?t.products=r("filter")(a,{is_archived:1}):_.isUndefined(t.txtSearch)&&"Draft"==t.applicationStatus?t.products=r("filter")(a,{is_published:0}):t.products=a,c.total(t.products.length);var s=t.products.slice((c.page()-1)*c.count(),c.page()*c.count());e.resolve(s),t.productIsLoading=!1}else t.productIsLoading=!1,i.error(o.response.msg,"Error")})}})};s.getAllCategory().then(function(e){200==e.statusCode&&e.response.success&&(t.categories=e.response.result)}),t.setPage=function(e){t.currentPage=e},t.setItemsPerPage=function(e){t.itemsPerPage=e,t.currentPage=1},t.edit=function(t){c.go("main.products-add",{p_id:t})},t.searchData=function(){t.productTable.reload()},t.refresh=function(){t.productIsLoading=!0,t.productTable.reload()},t.updateStatus=function(e){console.log("status: ",e),t.applicationStatus=e,t.productTable.reload()},t.changeSelectDeselectAll=function(){t.selectDeselectAll=!t.selectDeselectAll,_.each(t.products,function(e){e.selected=t.selectDeselectAll})},s.getAllCategory().then(function(e){200==e.statusCode&&e.response.success&&(t.categories=e.response.result)}),p(),f()}angular.module("POS17").controller("productListController",t),t.$inject=["$scope","$http","$filter","$state","$timeout","toastr","productFactory","categoryFactory","ngTableParams"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(e,r){r.state("main.received_order",{url:"/receivedorder",templateUrl:"modules/received_order/received_order.html",controller:"receivedOrderController"}).state("main.rec_order",{url:"/recorder/rec_order",templateUrl:"modules/received_order/recOrder.html",controller:"recOrderController"}).state("main.rec_list",{url:"/recorder/receivedorderList",templateUrl:"modules/received_order/receivedHolder.html",controller:"receivedholdController"})}])}();
!function(){"use strict";function e(e){}angular.module("POS17").controller("receivedOrderController",e),e.$inject=["$scope"]}();
!function(){"use strict";function r(r){}angular.module("POS17").controller("recOrderController",r),r.$inject=["$scope"]}();
!function(){"use strict";function e(e){}angular.module("POS17").controller("receivedholdController",e),e.$inject=["$scope"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(r,e){e.state("main.return_order",{url:"/returnorder",templateUrl:"modules/re_order/returnOrder.html",controller:"returnOrderController"}).state("main.ret_order",{url:"/returnorder/return_orderform",templateUrl:"modules/re_order/reOrder.html",controller:"retOrderController"}).state("main.retorderHold",{url:"/returnorder/returnorderholdform",templateUrl:"modules/re_order/returnHold.html",controller:"returnholdController"})}])}();
!function(){"use strict";function r(r){}angular.module("POS17").controller("returnOrderController",r),r.$inject=["$scope"]}();
!function(){"use strict";function r(r){}angular.module("POS17").controller("retOrderController",r),r.$inject=["$scope"]}();
!function(){"use strict";function n(n){}angular.module("POS17").controller("returnholdController",n),n.$inject=["$scope"]}();
!function(){"use strict";angular.module("POS17").config(["$urlRouterProvider","$stateProvider",function(l,t){t.state("main.articles",{url:"/articles",templateUrl:"modules/articles/articles.html",controller:"articleController"}).state("main.articles-detail",{url:"/articles/:article_id",templateUrl:"modules/articles/article.detail.html",controller:"articleDetailController"})}])}();
!function(){"use strict";function e(e,t,a,l,c,s,i,r,n){e.selectDeselectAll=!1,e.applicationStatus="All",e.selectedDatas=[];var o=function(){e.articles=[],e.articleTable=new r({page:1,count:10},{counts:[10,25,50,100],getData:function(t,c){i.getArticle().then(function(s){if(console.log("asdasdasd"),200==s.statusCode&&s.response.success){var i=s.response.result;console.log("articles:",i),e.txtSearch&&"All"==e.applicationStatus?e.articles=a("filter")(i,e.txtSearch):e.txtSearch&&"Active"==e.applicationStatus?(e.articles=a("filter")(i,{is_active:1}),e.articles=a("filter")(e.articles,e.txtSearch)):e.txtSearch&&"Inactive"==e.applicationStatus?(e.articles=a("filter")(i,{is_active:0}),e.articles=a("filter")(e.articles,e.txtSearch)):_.isUndefined(e.txtSearch)&&"All"==e.applicationStatus?e.articles=i:_.isUndefined(e.txtSearch)&&"Active"==e.applicationStatus?e.articles=a("filter")(i,{is_active:1}):_.isUndefined(e.txtSearch)&&"Inactive"==e.applicationStatus?e.articles=a("filter")(i,{is_active:0}):e.articles=i,c.total(e.articles.length);var r=e.articles.slice((c.page()-1)*c.count(),c.page()*c.count());t.resolve(r)}else l.error(s.response.msg,"Error")})}})};e.refresh=function(){e.articleTable.reload()},e.edit=function(e){t.go("main.articles-detail",{article_id:e})},e.updateStatus=function(t){e.applicationStatus=t,e.articleTable.reload()},e.searchData=function(){e.articleTable.reload()},e.changeSelectDeselectAll=function(){e.selectDeselectAll=!e.selectDeselectAll,_.each(e.articles,function(t){t.selected=e.selectDeselectAll,e.deleteSomeData=e.selectDeselectAll,e.checkDataChanges(t)})},e.checkDataChanges=function(t){t.selected?_.find(e.selectedDatas,function(e){return e.article_id===t.article_id})||e.selectedDatas.push(t):e.selectedDatas=_.filter(e.selectedDatas,function(e){return e.article_id!==t.article_id}),e.deleteSomeData=e.selectedDatas.length>0},e.deleteSelected=function(){n.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){var a=0;async.each(e.selectedDatas,function(c,s){c.selected&&i.deleteArticle(c.article_id).then(function(c){return 200==c.statusCode&&c.response.success?(l.success(c.response.msg,"Success"),++a,a==e.selectedDatas.length&&t.reload(),s(),void 0):void l.error(c.response.msg,"Error")})})})},o()}angular.module("POS17").controller("articleController",e),e.$inject=["$scope","$state","$filter","toastr","$timeout","$stateParams","articleFctry","ngTableParams","ngDialog"]}();
!function(){"use strict";function e(e,t,s,i,r,l,d,n,o,a,c,u){e.details={},e.details.tags=[],e.details.article_feature=[],e.details.article_features_list=[],e.details.is_published=!1,e.details.is_archived=!1,e.radioModel="product",e.products=[],e.productBundles=[],e.mediafile=[],e.types=[],e.tags=[],e.tagsArr=[],e.infiniteScroll={},e.infiniteScroll.numToAdd=10,e.infiniteScroll.currentItems=10,e.resetInfScroll=function(){e.infiniteScroll.currentItems=e.infiniteScroll.numToAdd},e.addMoreItems=function(){e.infiniteScroll.currentItems+=e.infiniteScroll.numToAdd},u.getAllTags().then(function(t){200==t.statusCode&&t.response.success?e.tagsArr=t.response.result:i.error(t.response.msg,"Error")}),l.article_id&&(e.details.article_feature=[],e.details.article_features_list=[],d.getDetailArticle(l.article_id).then(function(t){200==t.statusCode&&t.response.success&&(e.details=t.response.result,e.showPublish=1!=e.details.is_active,e.details.article_features_list=_.map(e.details.article_features,function(e){return null==e.bundle_id&&null!==e.product_id?{item_name:e.product_details.item_name,item_description:e.product_details.item_description,item_code:e.product_details.product_code,item_brand:e.product_details.brand,item_id:e.product_details.p_id}:null!==e.bundle_id&&null==e.product_id?{item_name:e.bundle_details.bundle_name,item_description:e.bundle_details.bundle_description,item_code:e.bundle_details.bundle_code,item_brand:e.bundle_details.bundle_brand,item_id:e.bundle_details.pb_id}:void 0}),e.details.article_feature=_.map(e.details.article_features,function(e){return null==e.bundle_id&&null!==e.product_id?{product_id:e.product_details.p_id,bundle_id:null,article_id:l.article_id}:null!==e.bundle_id&&null==e.product_id?{product_id:null,bundle_id:e.bundle_details.pb_id,article_id:l.article_id}:void 0}),e.mediafile=t.response.result.mediafiles,u.getAllArticleTags(l.article_id).then(function(t){200==t.statusCode&&t.response.success&&(e.details.tags=t.response.result)}))}),c.getAllProduct().then(function(t){200==t.statusCode&&t.response.success&&r(function(){e.$apply(function(){e.products=t.response.result})},100)}),c.getAllProductBundle().then(function(t){200==t.statusCode&&t.response.success&&r(function(){e.$apply(function(){e.productBundles=t.response.result})},100)})),e.changeData=function(t){e.radioModel=t},e.reloadMediaFiles=function(){console.log("reloadMediaFiles: ",l.article_id),l.article_id&&(e.mediafile=[],d.getDetailArticle(l.article_id).then(function(t){200==t.statusCode&&t.response.success&&r(function(){e.$apply(function(){e.mediafile=t.response.result.mediafiles})},100)}))},e.addToList=function(){"product"==e.radioModel?_.isUndefined(e.details.product)||(e.details.article_features_list.push({item_name:e.details.product.item_name,item_description:e.details.product.item_description,item_code:e.details.product.product_code,item_brand:e.details.product.brand,item_id:e.details.product.p_id}),e.details.article_feature.push({product_id:e.details.product.p_id,bundle_id:null,article_id:l.article_id})):"productgroup"==e.radioModel&&(_.isUndefined(e.details.productgroup)||(e.details.article_features_list.push({item_name:e.details.productgroup.bundle_name,item_description:e.details.productgroup.bundle_description,item_code:e.details.productgroup.bundle_code,item_brand:e.details.productgroup.bundle_brand,item_id:e.details.productgroup.pb_id}),e.details.article_feature.push({bundle_id:e.details.productgroup.pb_id,product_id:null,article_id:l.article_id}))),e.details.product={},e.details.productgroup={}},e.removeOnList=function(t){e.details.article_features_list.splice(t,1),e.details.article_feature.splice(t,1)},e.deleteAllMedia=function(){o.openConfirm({templateUrl:"modules/dialog/deleteAllDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){l.article_id&&d.deleteAllArticleMedia(l.article_id).then(function(e){return 200==e.statusCode&&e.response.success?(i.success(e.response.msg,"Success"),void t.reload()):void i.error(e.response.msg,"Error")})})},e.deleteSelected=function(s){o.openConfirm({templateUrl:"modules/dialog/deleteDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){console.log("media: ",s),l.article_id&&d.deleteArticleMediaFile(l.article_id,s._id).then(function(e){return 200==e.statusCode&&e.response.success?(i.success(e.response.msg,"Success"),void t.reload()):void i.error(e.response.msg,"Error")})})},e.saveArticle=function(){async.waterfall([function(t){l.article_id?d.updateArticle(l.article_id,e.details).then(function(e){if(200==e.statusCode&&e.response.success)i.success(e.response.msg,"Success"),t(null,l.article_id);else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void i.error(e.response.msg,"Error");_.each(e.response.result,function(e){i.warning(e.msg,"Warning")})}}):d.saveArticle(e.details).then(function(e){if(200==e.statusCode&&e.response.success)i.success(e.response.msg,"Success"),t(null,e.response.result);else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void i.error(e.response.msg,"Error");_.each(e.response.result,function(e){i.warning(e.msg,"Warning")})}})},function(t,s){var r=0;e.details.tags.length>0?async.eachSeries(e.details.tags,function(l,d){l.isTag?u.saveTags(l).then(function(e){return 200==e.statusCode&&e.response.success?void u.saveArticleTags(t,{tag_id:e.response.result}).then(function(e){return 200==e.statusCode&&e.response.success?(r++,void d()):void i.error(e.response.msg,"Error")}):void i.error(e.response.msg,"Error")}):u.saveArticleTags(t,{tag_id:l.tags_id}).then(function(e){return 200==e.statusCode&&e.response.success?(r++,void d()):void i.error(e.response.msg,"Error")}),r>=e.details.tags.length&&s(null,t)}):s(null,t)},function(e,s){r(function(){t.go(t.current,{article_id:e},{reload:!0})},300)}])},e.tagTransform=function(e){return{tags:e}},e.clearInput=function(e){e.search=""},e.deleteProductTags=function(e){console.log("deleteProductBundleTag: ",e),l.article_id&&u.deleteArticleTag(l.article_id,e.tags_id).then(function(e){return 200==e.statusCode&&e.response.success?void i.success(e.response.msg,"Success"):void i.error(e.response.msg,"Error")})},e.publishArticle=function(e){d.publishArticle(e).then(function(e){200==e.statusCode&&e.response.success?(i.success(e.response.msg,"Success"),t.go(t.current,null,{reload:!0})):i.error(e.response.msg,"Error")})},e.openUploader=function(){var e=a.open({animation:!0,backdrop:"static",templateUrl:"./modules/articles/article.upload.modal.html",controller:"articleUploadModalCtrl",size:"lg",resolve:{article_id:function(){return l.article_id}}});e.result.then(function(e){t.reload()},function(){})}}angular.module("POS17").controller("articleDetailController",e),e.$inject=["$scope","$state","$filter","toastr","$timeout","$stateParams","articleFctry","ngTableParams","ngDialog","$uibModal","productFactory","tagsFactory"]}();
!function(){"use strict";function e(e,o,t,n,l,s,c,i,a,r,u,d){console.log("articleUploadModalCtrl"),console.log("$stateParams:",c),e.item={};var m=JSON.parse(u.get("user")),f=e.uploader=new n({url:l+s+"articlemedia/"+c,method:"PUT",headers:{Authorization:"Bearer "+a.getUserToken(),accesskey:m.subscriptionKey}});f.filters.push({name:"customFilter",fn:function(e,o){return this.queue.length<10}}),f.onBeforeUploadItem=function(e){e.alias="media",console.log("item:",e)},f.onSuccessItem=function(e,o,t,n){d.success(o.response.msg,"Success")},f.onWhenAddingFileFailed=function(e,o,t){console.log("item:",e),console.log("filter:",o),console.log("options:",t)},f.onAfterAddingFile=function(e){console.log("item:",e)},f.onCompleteAll=function(e){i(function(){t.close(c)},1300)},e.cancel=function(){t.dismiss("cancel")}}angular.module("POS17").controller("articleUploadModalCtrl",e),e.$inject=["$scope","$state","$uibModalInstance","FileUploader","API_URL","API_VERSION","article_id","$timeout","AuthFctry","$stateParams","localStorageService","toastr"]}();
!function(){"use strict";angular.module("POS17").directive("errSrc",function(){return{link:function(t,e,i){t.$watch(function(){return i.ngSrc},function(t){t||e.attr("src",i.errSrc)}),e.bind("error",function(){e.attr("src",i.errSrc)})}}}).directive("sidebar",function(){return{restrict:"C",compile:function(t,e,i){$.AdminLTE.tree(t)}}}).directive("header",function(){return{restrict:"E",templateUrl:"./modules/templates/header.html",compile:function(t,e,i){$.AdminLTE.pushMenu($(t).find(".sidebar-toggle"))}}}).directive("knob",function(){return{restrict:"C",compile:function(t,e,i){t.knob({draw:function(){if("tron"==this.$.data("skin")){var t,e=this.angle(this.cv),i=this.startAngle,n=this.startAngle,r=n+e,a=!0;return this.g.lineWidth=this.lineWidth,this.o.cursor&&(n=r-.3)&&(r+=.3),this.o.displayPrevious&&(t=this.startAngle+this.angle(this.value),this.o.cursor&&(i=t-.3)&&(t+=.3),this.g.beginPath(),this.g.strokeStyle=this.previousColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,i,t,!1),this.g.stroke()),this.g.beginPath(),this.g.strokeStyle=a?this.o.fgColor:this.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,n,r,!1),this.g.stroke(),this.g.lineWidth=2,this.g.beginPath(),this.g.strokeStyle=this.o.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth+1+2*this.lineWidth/3,0,2*Math.PI,!1),this.g.stroke(),!1}}})}}}).directive("sparkline",function(){return{restrict:"C",compile:function(t,e,i){t.each(function(){var t=$(this);t.sparkline("html",t.data())})}}}).directive("box",function(){return{restrict:"C",compile:function(t,e,i){var n=this;$(t).find(this.boxWidgetOptions.boxWidgetSelectors.collapse).click(function(t){t.preventDefault(),n.collapse($(this))}),$(t).find(this.boxWidgetOptions.boxWidgetSelectors.remove).click(function(t){t.preventDefault(),n.remove($(this))})},collapse:function(t){var e=t.parents(".box").first(),i=e.find(".box-body, .box-footer");e.hasClass("collapsed-box")?(t.children(".fa-plus").removeClass("fa-plus").addClass("fa-minus"),i.slideDown(300,function(){e.removeClass("collapsed-box")})):(t.children(".fa-minus").removeClass("fa-minus").addClass("fa-plus"),i.slideUp(300,function(){e.addClass("collapsed-box")}))},remove:function(t){var e=t.parents(".box").first();e.slideUp()},boxWidgetOptions:{boxWidgetIcons:{collapse:"fa fa-minus",open:"fa fa-plus",remove:"fa fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}}}}).directive("chat",function(){return{restrict:"E",templateUrl:"./modules/templates/direct-chat.html",scope:{type:"@",title:"@",count:"@count",messages:"=messages"},replace:!0,compile:function(t,e){return t.find("[data-widget='chat-pane-toggle']").click(function(){$(this).parents(".direct-chat").first().toggleClass("direct-chat-contacts-open")}),{pre:function(t,e,i){},post:function(t,e,i){}}}}}).directive("repeatEnd",function(){return{restrict:"A",link:function(t,e,i){t.$last&&t.$eval(i.repeatEnd)}}}).directive("ngRepeatEndWatch",function(){return{restrict:"A",scope:{},link:function(t,e,i){if(!i.ngRepeat)throw"ngRepeatEndWatch: `ngRepeat` Directive required to use this Directive";t.$parent.$last&&(""!==i.ngRepeatEndWatch?"function"==typeof t.$parent.$parent[i.ngRepeatEndWatch]?t.$parent.$parent[i.ngRepeatEndWatch]():t.$parent.$parent[i.ngRepeatEndWatch]=!0:t.$parent.$parent.ngRepeatEnd=!0)}}}).directive("infiniteScroll",["$rootScope","$window","$timeout",function(t,e,i){return{link:function(n,r,a){var o,s,l,c;return e=angular.element(e),r.css("overflow-y","auto"),r.css("overflow-x","hidden"),r.css("height","inherit"),l=0,null!=a.infiniteScrollDistance&&n.$watch(a.infiniteScrollDistance,function(t){return l=parseInt(t,10)}),c=!0,o=!1,null!=a.infiniteScrollDisabled&&n.$watch(a.infiniteScrollDisabled,function(t){return c=!t,c&&o?(o=!1,s()):void 0}),t.$on("refreshStart",function(){r.animate({scrollTop:"0"})}),s=function(){var e,i,s,u,d;return e=$(r.children()[0]),i=r.offset().top+r.height(),d=e.offset().top+e.height(),s=d-i,u=s<=r.height()*l,u&&c?t.$$phase?n.$eval(a.infiniteScroll):n.$apply(a.infiniteScroll):u?o=!0:void 0},r.on("scroll",s),n.$on("$destroy",function(){return e.off("scroll",s)}),i(function(){return a.infiniteScrollImmediateCheck?n.$eval(a.infiniteScrollImmediateCheck)?s():void 0:s()},0)}}}]).directive("starRating",function(){return{restrict:"EA",template:'<ul class="star-rating" ng-class="{readonly: readonly}">  <li ng-repeat="star in stars" class="star" ng-class="{filled: star.filled}" ng-click="toggle($index)">    <i class="fa fa-star"></i>  </li></ul>',scope:{ratingValue:"=ngModel",max:"=?",onRatingSelect:"&?",readonly:"=?"},link:function(t,e,i){function n(){t.stars=[];for(var e=0;e<t.max;e++)t.stars.push({filled:e<t.ratingValue})}void 0==t.max&&(t.max=5),t.toggle=function(e){void 0!=t.readonly&&t.readonly!==!1||(t.ratingValue=e+1,t.onRatingSelect({rating:e+1}))},t.$watch("ratingValue",function(t,e){e&&n()})}}}).directive("ngThumb",["$window",function(t){var e={support:!(!t.FileReader||!t.CanvasRenderingContext2D),isFile:function(e){return angular.isObject(e)&&e instanceof t.File},isImage:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}};return{restrict:"A",template:"<canvas/>",link:function(t,i,n){function r(t){var e=new Image;e.onload=a,e.src=t.target.result}function a(){var t=o.width||this.width/this.height*o.height,e=o.height||this.height/this.width*o.width;s.attr({width:t,height:e}),s[0].getContext("2d").drawImage(this,0,0,t,e)}if(e.support){var o=t.$eval(n.ngThumb);if(e.isFile(o.file)&&e.isImage(o.file)){var s=i.find("canvas"),l=new FileReader;l.onload=r,l.readAsDataURL(o.file)}}}}}]).directive("ddDraggable",function(){return{restrict:"A",link:function(t,e,i,n){e.attr("draggable",!0),e.bind("dragstart",function(t){t.originalEvent.dataTransfer.setData("text",i.itemid)})}}}).directive("ddDropTarget",function(){return{restrict:"A",link:function(t,e,i,n){e.bind("dragover",function(t){t.preventDefault()}),e.bind("drop",function(e){t.moveToBox(parseInt(e.originalEvent.dataTransfer.getData("text"))),e.preventDefault()})}}}).directive("numbersOnly",function(){return{require:"ngModel",link:function(t,e,i,n){function r(t){if(t){var e=t.replace(/[^0-9-]/g,"");return e!==t&&(n.$setViewValue(e),n.$render()),e}}n.$parsers.push(r)}}}).directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(t,e,i,n){n.$validators.compareTo=function(e){return e==t.otherModelValue},t.$watch("otherModelValue",function(){n.$validate()})}}}).directive("validPasswordC",function(){return{require:"ngModel",link:function(t,e,i,n){n.$setValidity("noMatch",!0),i.$observe("validPasswordC",function(t){"true"===t?n.$setValidity("noMatch",!0):n.$setValidity("noMatch",!1)})}}}).directive("validNumber",function(){return{require:"?ngModel",link:function(t,e,i,n){n&&(n.$parsers.push(function(t){if(angular.isUndefined(t))var t="";var e=t.replace(/[^-0-9\.]/g,""),i=e.split("-"),r=e.split(".");return angular.isUndefined(i[1])||(i[1]=i[1].slice(0,i[1].length),e=i[0]+"-"+i[1],i[0].length>0&&(e=i[0])),angular.isUndefined(r[1])||(r[1]=r[1].slice(0,2),e=r[0]+"."+r[1]),t!==e&&(n.$setViewValue(e),n.$render()),e}),e.bind("keypress",function(t){32===t.keyCode&&t.preventDefault()}))}}})}();
!function(){"use strict";function t(t,n,u){return{getAllProduct:function(){return t.all("product").customGET().then(function(t){return t},function(t){return t.data})},getProductDetails:function(n){return t.all("product").customGET(n).then(function(t){return t},function(t){return t.data})},deleteProduct:function(n){return t.all("products").customDELETE(n).then(function(t){return t},function(t){return t.data})},saveProduct:function(n){return t.all("product").customPOST(n).then(function(t){return t},function(t){return t.data})},updateProduct:function(n,u){return t.all("product").customPUT(u,n).then(function(t){return t},function(t){return t.data})},archiveProduct:function(n){return t.all("product/"+n+"/archive").customPUT().then(function(t){return t},function(t){return t.data})},publishProduct:function(n){return t.all("product/"+n+"/publish").customPUT().then(function(t){return t},function(t){return t.data})},deleteProductCategory:function(n){return t.all("product/"+n+"/category").customDELETE().then(function(t){return t},function(t){return t.data})},getProductsCategory:function(n){return t.all("product/"+n+"/category").customGET().then(function(t){return t},function(t){return t.data})},saveProductsCategory:function(n,u){return t.all("product/"+n+"/category").customPUT(u).then(function(t){return t},function(t){return t.data})},getProductAttributes:function(n){return t.all("product/"+n+"/attributes").customGET().then(function(t){return t},function(t){return t.data})},saveProductBundle:function(n){return t.all("product-bundle").customPOST(n).then(function(t){return t},function(t){return t})},updateProductBundle:function(n,u){return t.all("product-bundle/"+n).customPUT(u).then(function(t){return t},function(t){return t})},getAllProductBundle:function(){return t.all("product-bundle").customGET().then(function(t){return t},function(t){return t})},getProductBundleDetails:function(n){return t.all("product-bundle").customGET(n).then(function(t){return t},function(t){return t})},publishBundle:function(n){return t.all("product-bundle/"+n+"/publish").customPUT().then(function(t){return t},function(t){return t})},archiveBundle:function(n){return t.all("product-bundle/"+n+"/archive").customPUT().then(function(t){return t},function(t){return t})},deleteProductBundleCategory:function(n){return t.all("product-bundle/"+n+"/category").customDELETE().then(function(t){return t},function(t){return t})},saveProductBundleCategory:function(n,u){return t.all("product-bundle/"+n+"/category").customPUT(u).then(function(t){return t},function(t){return t})},getProductBundleCategory:function(n){return t.all("product-bundle/"+n+"/category").customGET().then(function(t){return t},function(t){return t})}}}angular.module("POS17").factory("productFactory",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function t(t,n,r){return{getAllStore:function(){return t.all("store").customGET().then(function(t){return t},function(t){return t.data})},getStoreDetails:function(n){return t.all("store").customGET(n).then(function(t){return t},function(t){return t.data})},updateStore:function(n,r){return t.all("store/"+n).customPUT(r).then(function(t){return t},function(t){return t.data})},saveStore:function(n){return t.all("store").customPOST(n).then(function(t){return t},function(t){return t.data})},deleteStore:function(n){return t.all("store").customDELETE(n).then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("storeFactory",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function n(n,t,u,r){return{getAllBanks:function(){return n.all("banks").customGET().then(function(n){return n},function(n){return n.data})},getBankDetails:function(t){return n.all("banks").customGET(t).then(function(n){return n},function(n){return n.data})},updateBank:function(t,u){return n.all("banks/"+t).customPUT(u).then(function(n){return n},function(n){return n.data})},saveBank:function(t){return n.all("banks").customPOST(t).then(function(n){return n},function(n){return n.data})},deleteBank:function(t){return n.all("banks").customDELETE(t).then(function(n){return n},function(n){return n.data})}}}angular.module("POS17").factory("bankFctry",n),n.$inject=["Restangular","API_URL","API_VERSION","toastr"]}();
!function(){"use strict";function t(t,u,n){return{getAllAttribute:function(){return t.all("attributes").customGET().then(function(t){return t},function(t){return t.data})},getAllAttributeDetails:function(u){return t.all("attributes").customGET(u).then(function(t){return t},function(t){return t.data})},getAttributeGroupDetails:function(u){return t.all("attributegroup").customGET(u).then(function(t){return t},function(t){return t.data})},saveAttributeGroup:function(u){return t.all("attributegroup").customPOST(u).then(function(t){return t},function(t){return t.data})},deleteAttribute:function(u){return t.all("attributes").customDELETE(u).then(function(t){return t},function(t){return t.data})},updateAttributeGroup:function(u,n){return t.all("attributegroup/"+u).customPUT(n).then(function(t){return t},function(t){return t.data})},getAllAttributeGroup:function(){return t.all("attributegroup").customGET().then(function(t){return t},function(t){return t.data})},deleteAttributeGroup:function(u){return t.all("attributegroup").customDELETE(u).then(function(t){return t},function(t){return t.data})},getAllAttributeTypes:function(){return t.all("attributeTypes").customGET().then(function(t){return t},function(t){return t.data})},saveAttribute:function(u){return t.all("attributes").customPOST(u).then(function(t){return t},function(t){return t.data})},updateAttribute:function(u,n){return t.all("attributes/"+u).customPUT(n).then(function(t){return t},function(t){return t.data})},getAllAttributeValues:function(){return t.all("attributevalues").customGET().then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("attributeFactory",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function t(t,n,e){return{getAllCategory:function(){return t.all("categories").customGET().then(function(t){return t},function(t){return t.data})},getCategoryDetails:function(n){return t.all("categories").customGET(n).then(function(t){return t},function(t){return t.data})},saveCategory:function(n){return t.all("categories").customPOST(n).then(function(t){return t},function(t){return t.data})},updateCategory:function(n,e){return t.all("categories/"+n).customPUT(e).then(function(t){return t},function(t){return t.data})},deleteCategory:function(n){return t.all("categories").customDELETE(n).then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("categoryFactory",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function t(t,n,u,r){return{getAllProdType:function(){return t.all("productType").customGET().then(function(t){return t},function(t){return t.data})},getAllProdTypeDetails:function(n){return t.all("productType").customGET(n).then(function(t){return t},function(t){return t.data})},saveProductType:function(n){return t.all("productType").customPOST(n).then(function(t){return t},function(t){return t.data})},updateProductType:function(n,u){return t.all("productType/"+n).customPUT(u).then(function(t){return t},function(t){return t.data})},deleteProductType:function(n){return t.all("producttype").customDELETE(n).then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("ptypeFactory",t),t.$inject=["Restangular","API_URL","Upload","toastr"]}();
!function(){"use strict";function t(t,n,u){return{getAllSuppliers:function(){return t.all("supplier").customGET().then(function(t){return t},function(t){return t.data})},getAllSuppliersDetails:function(n){return t.all("supplier").customGET(n).then(function(t){return t},function(t){return t.data})},saveSupplier:function(n){return t.all("supplier").customPOST(n).then(function(t){return t},function(t){return t.data})},updateSupplier:function(n,u){return t.all("supplier/"+n).customPUT(u).then(function(t){return t},function(t){return t.data})},deleteSupplier:function(n){return t.all("supplier").customDELETE(n).then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("supplierFctry",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function t(t,n,r){return{getAllVariation:function(){return t.all("variation").customGET().then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("variationFactory",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function n(n,t,r){return{getAllPerson:function(){return n.all("persons").customGET().then(function(n){return n},function(n){return n})},getAllPersonDetail:function(t){return n.all("persons").customGET(t).then(function(n){return n},function(n){return n})},savePersonel:function(t){return n.all("persons").customPOST(t).then(function(n){return n},function(n){return n})},updatePersonel:function(t,r){return n.all("persons/"+t).customPUT(r).then(function(n){return n},function(n){return n})},getPersonType:function(){return n.all("persontype").customGET().then(function(n){return n},function(n){return n})},getImage:function(t,r){return n.all("persontype/"+t).customPUT(r).then(function(n){return n},function(n){return n})},getTimeZone:function(){return n.all("timezones").customGET().then(function(n){return n},function(n){return n})},deletePersonel:function(t){return n.all("persons").customDELETE(t).then(function(n){return n},function(n){return n})},updateUsername:function(t){return n.all("user/username").customPUT(t).then(function(n){return n},function(n){return n})},updatePassword:function(t){return n.all("user/password").customPUT(t).then(function(n){return n},function(n){return n})},addRecoveryPassword:function(t){return n.all("user/recovery").customPUT(t).then(function(n){return n},function(n){return n})}}}angular.module("POS17").factory("humanFactory",n),n.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function r(r,n,t){return{generatePasswordString:function(r){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",u=0;r>u;u++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},getAllUserAccounts:function(){return r.all("useraccounts").customGET().then(function(r){return r},function(r){return r.data})},saveUserAccount:function(n){return r.all("useraccounts").customPOST(n).then(function(r){return r},function(r){return r.data})},getUserAccount:function(n,t){return r.all("useraccounts/"+n+"/info/"+t).customGET().then(function(r){return r},function(r){return r.data})},updateUserAccount:function(n,t){return r.all("useraccounts/"+n).customPUT(t).then(function(r){return r},function(r){return r.data})},deleteUserAccount:function(n){return r.all("useraccounts").customDELETE(n).then(function(r){return r}),function(r){return r.data}}}}function n(r,n,t){return{createUserGroup:function(n){return r.all("usergroups").customPOST(n).then(function(r){return r},function(r){var n=t.error(r.data.response.msg,"Error");return n})},getAllUserGroups:function(){return r.all("usergroups").customGET().then(function(r){return r},function(r){var n=t.error(r.data.response.msg,"Error");return n})},getUserGroupById:function(n){return r.all("usergroups").customGET(n).then(function(r){return r},function(r){var n=t.error(r.data.response.msg,"Error");return n})},deleteUserGroup:function(n){return r.all("usergroups").customDELETE(n).then(function(r){return r},function(r){var n=t.error(r.data.response.msg,"Error");return n})},updateUserGroup:function(n,u){return r.all("usergroups/"+n).customPUT(u).then(function(r){return r.data},function(r){var n=t.error(r.data.response.msg,"Error");return n})}}}function t(r,n,t){return{getAllModulesPermissions:function(){return r.all("/modules/permissions").customGET().then(function(r){return r},function(r){var n=t.error(r.data.response.msg,"Error");return n})},generateAccessPermission:function(n){return r.all("useraccounts/"+n+"/permissions").customGET().then(function(r){return r},function(r){var n=t.error(r.data.response.msg,"Error");return n})},setGroupPrivilege:function(n,u){return r.all("useraccounts/"+n+"/permissions").customPUT(u).then(function(r){return r},function(r){var n=t.error(r.data.response.msg,"Error");return n})}}}angular.module("POS17").factory("useraccountsFctry",r).factory("usergroupsFctry",n).factory("permissionFctry",t),r.$inject=["Restangular","API_URL","toastr"],n.$inject=["Restangular","API_URL","toastr"],t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function n(n,t,e){return{getAllEmployees:function(){return n.all("persons").customGET().then(function(n){return n},function(n){return n.data})},saveEmployee:function(t){return n.all("persons").customPOST(t).then(function(n){return n.data},function(n){return n.data})},updateEmployee:function(t,e){return n.all("persons/"+t).customPUT(e).then(function(n){return n.data},function(n){return n.data})},deleteEmployee:function(t){return n.all("persons").customDELETE(t).then(function(n){return n.data},function(n){return n.data})},getEmployee:function(t){return n.all("persons").customGET(t).then(function(n){return n.data},function(n){return n.data})}}}angular.module("POS17").factory("personFctry",n),n.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function n(n,t,r){return{getAllCurrencies:function(){return n.all("currencies").customGET().then(function(n){return n},function(n){return n.data})}}}angular.module("POS17").factory("currencyFactory",n),n.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function t(t,n,e,r){return{authenticate:function(n){return t.all("session").customPOST(n).then(function(t){return t},function(t){return t.data})},logout:function(){return t.all("session").customDELETE().then(function(t){return t},function(t){return t.data})},userprofile:function(){return t.all("session").customGET().then(function(t){return t},function(t){return t.data})},setUserToken:function(t){r.set("token",t)},getUserToken:function(){return r.get("token")},setCurrentUser:function(t){r.set("user",t)},getCurrentUser:function(){return r.get("user")},forgotPassword:function(n){return t.all("forgot_password").customPOST(n).then(function(t){return t},function(t){return t})},resendVerification:function(n){return t.all("resend_verification").customPOST(n).then(function(t){return t},function(t){return t})},isVerifiedContact:function(n){return t.all("users/"+n+"/verify").customGET().then(function(t){return t},function(t){return t})},verifyContact:function(n){return t.all("users/"+n+"/verify").customPOST().then(function(t){return t},function(t){return t})}}}function n(t,n,e,r,o,u){return{request:function(t){if(t.headers=t.headers||{},u.get("token")){var n=u.get("token"),e=JSON.parse(u.get("user"));t.headers.Authorization="Bearer "+n,e&&(t.headers.accesskey=e.subscriptionKey)}return t},response:function(t){if(u.get("token")){var n=u.get("token");o.isTokenExpired(n)&&(u.remove("token"),u.remove("user"),e.path("/login"))}return t},responseError:function(n){return 401===n.status&&(t.$broadcast("unauthorized"),e.path("/login")),n}}}angular.module("POS17").factory("AuthFctry",t).factory("authInterceptor",n),t.$inject=["Restangular","API_URL","API_VERSION","localStorageService"],n.$inject=["$rootScope","$q","$location","$injector","jwtHelper","localStorageService"]}();
!function(){"use strict";function t(t,n,r){return{getPriceHistory:function(n){return t.all("pricehistory").customGET(n).then(function(t){return t},function(t){return t.data})},getStoreP:function(n){return t.all("storeowner").customGET(n).then(function(t){return t},function(t){return t.data})},deleteSP:function(n){return t.all("pricehistory").customGET(n).then(function(t){return t},function(t){return t.data})},saveSP:function(n,r){return t.all("pricehistory/"+n).customPUT(r).then(function(t){return t},function(t){return t.data})},updateSP:function(n,r){return t.all("detail/"+n).customPUT(r).then(function(t){return t.data},function(t){return t.data})}}}angular.module("POS17").factory("priceHistoryFactory",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function t(t,n,u){return{getAllProduct:function(){return t.all("product").customGET().then(function(t){return t},function(t){return t.data})},getProductDetails:function(n){return t.all("product").customGET(n).then(function(t){return t},function(t){return t.data})},deleteProduct:function(n){return t.all("products").customDELETE(n).then(function(t){return t},function(t){return t.data})},saveProduct:function(n){return t.all("product").customPOST(n).then(function(t){return t},function(t){return t.data})},updateProduct:function(n,u){return t.all("product").customPUT(u,n).then(function(t){return t},function(t){return t.data})},archiveProduct:function(n){return t.all("product/"+n+"/archive").customPUT().then(function(t){return t},function(t){return t.data})},publishProduct:function(n){return t.all("product/"+n+"/publish").customPUT().then(function(t){return t},function(t){return t.data})},deleteProductCategory:function(n){return t.all("product/"+n+"/category").customDELETE().then(function(t){return t},function(t){return t.data})},getProductsCategory:function(n){return t.all("product/"+n+"/category").customGET().then(function(t){return t},function(t){return t.data})},saveProductsCategory:function(n,u){return t.all("product/"+n+"/category").customPUT(u).then(function(t){return t},function(t){return t.data})},getProductAttributes:function(n){return t.all("product/"+n+"/attributes").customGET().then(function(t){return t},function(t){return t.data})},saveProductBundle:function(n){return t.all("product-bundle").customPOST(n).then(function(t){return t},function(t){return t})},updateProductBundle:function(n,u){return t.all("product-bundle/"+n).customPUT(u).then(function(t){return t},function(t){return t})},getAllProductBundle:function(){return t.all("product-bundle").customGET().then(function(t){return t},function(t){return t})},getProductBundleDetails:function(n){return t.all("product-bundle").customGET(n).then(function(t){return t},function(t){return t})},publishBundle:function(n){return t.all("product-bundle/"+n+"/publish").customPUT().then(function(t){return t},function(t){return t})},archiveBundle:function(n){return t.all("product-bundle/"+n+"/archive").customPUT().then(function(t){return t},function(t){return t})}}}angular.module("POS17").factory("productpurchasedFactory",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){function t(t,n,e){return{getArticle:function(){return t.all("articleinfo").customGET().then(function(t){return t},function(t){return t.data})},getDetailArticle:function(n){return t.all("articleinfo").customGET(n).then(function(t){return t},function(t){return t.data})},saveArticle:function(n){return t.all("articleinfo").customPOST(n).then(function(t){return t},function(t){return t.data})},updateArticle:function(n,e){return t.all("articleinfo/"+n).customPUT(e).then(function(t){return t},function(t){return t.data})},deleteArticle:function(n){return t.all("articleinfo").customDELETE(n).then(function(t){return t},function(t){return t.data})},deleteAllArticleMedia:function(n){return t.all("articlemedia").customDELETE(n).then(function(t){return t},function(t){return t.data})},deleteArticleMediaFile:function(n,e){return t.all("articlemedia/"+n+"/file/"+e).customDELETE().then(function(t){return t},function(t){return t.data})},publishArticle:function(n){return t.all("articleinfo/"+n+"/publish").customPUT().then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("articleFctry",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";function t(t,n){return{getAllTags:function(n){var u={filter:n};return t.all("tags").customGET("",u).then(function(t){return t},function(t){return t.data})},saveTags:function(n){return t.all("tags").customPOST(n).then(function(t){return t},function(t){return t.data})},saveProductTags:function(n,u){return t.all("product/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllProductTags:function(n){return t.all("product/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteProductTag:function(n,u){return t.all("product/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})},saveProductGroupTags:function(n,u){return t.all("product-bundle/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllProductBundleTags:function(n){return t.all("product-bundle/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteProductBundleTag:function(n,u){return t.all("product-bundle/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})},saveArticleTags:function(n,u){return t.all("article/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllArticleTags:function(n){return t.all("article/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteArticleTag:function(n,u){return t.all("article/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})},saveBankTags:function(n,u){return t.all("bank/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllBankTags:function(n){return t.all("bank/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteBankTag:function(n,u){return t.all("bank/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})},saveStoreTags:function(n,u){return t.all("store/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllStoreTags:function(n){return t.all("store/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteStoreTag:function(n,u){return t.all("store/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})},saveCategoryTags:function(n,u){return t.all("categories/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllCategoryTags:function(n){return t.all("categories/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteCategoryTag:function(n,u){return t.all("categories/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})},saveProductTypeTags:function(n,u){return t.all("producttype/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllProductTypeTags:function(n){return t.all("producttype/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteProductTypeTag:function(n,u){return t.all("producttype/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})},saveSupplierTags:function(n,u){return t.all("supplier/"+n+"/tags").customPOST(u).then(function(t){return t},function(t){return t.data})},getAllSupplierTags:function(n){return t.all("supplier/"+n+"/tags").customGET().then(function(t){return t},function(t){return t.data})},deleteSupplierTag:function(n,u){return t.all("supplier/"+n+"/tags/"+u).customDELETE().then(function(t){return t},function(t){return t.data})}}}angular.module("POS17").factory("tagsFactory",t),t.$inject=["Restangular","API_URL"]}();
!function(){"use strict";function r(){return function(r,n){var t=[];return angular.isArray(r)?r.forEach(function(r){for(var e=!1,o=Object.keys(n),u=0;u<o.length;u++){var i=o[u],f=n[i].toLowerCase();if(-1!==r[i].toString().toLowerCase().indexOf(f)){e=!0;break}}e&&t.push(r)}):t=r,t}}function n(r){return function(n,t){return r("number")(100*n,t)+"%"}}function t(){return function(r){return moment(r).fromNow()}}angular.module("POS17").filter("propsFilter",r).filter("percentage",n).filter("fromNow",t),n.$inject=["$filter"]}();
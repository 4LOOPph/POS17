!function(){"use strict";angular.module("chloe",["ui.router","ui.bootstrap","angularMoment","btford.socket-io","hmTouchEvents"]).constant("baseURL","http://54.206.38.223:5006").run(["$state","$rootScope","$window",function(o,t,n){t.goBack=function(){n.history.back()}}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(o,t,n){n.html5Mode({enabled:!1,requireBase:!1}),n.hashPrefix(""),t.otherwise("/"),o.state("main",{url:"/",templateUrl:"modules/main.html",controller:"MainCtrl"})}]).factory("jQuery",["$window",function(o){return o.jQuery}]).factory("_",["$window",function(o){return o.jQuery}]).factory("async",["$window",function(o){return o.async}]).factory("io",["$window",function(o){return o.io}]).factory("moment",["$window",function(o){return o.moment}]).factory("mySocket",["socketFactory","io","baseURL",function(o,t,n){var r=t.connect(n),e=o({ioSocket:r});return e}])}();
!function(){"use strict";angular.module("chloe").constant("Category",[{menuType:"Beverages",menuCode:"1"},{menuType:"Desserts",menuCode:"2"},{menuType:"Sides & Salads",menuCode:"3"},{menuType:"Entree",menuCode:"4"},{menuType:"Appetizers",menuCode:"5"}])}();
!function(){"use strict";function e(e,n,o,t,r,a,i,c){function d(){if(e.menuRecords&&e.menuRecords.length>0){var n=_.map(e.menuRecords,function(e){return e.orders}),o=_.flattenDeep(n);_.each(e.orderSum,function(n){var t=[],r=_.filter(o,{producttypeId:n.menuCode}),a=_.uniqBy(r,"tableno");_.each(a,function(o){if(o.producttypeId==n.menuCode){var r=_.find(e.menuRecords,{tableno:o.tableno});r?t.push(r):t=[]}}),n.menu=t})}else _.each(e.orderSum,function(e){delete e.menu});i(function(){_.each(e.menuRecords,function(e){e.orders.sort(function(e,n){return e.checked-n.checked})})},500),t.localStorage.setItem("kitchen_orders",JSON.stringify(e.menuRecords))}e.menuRecords=[],e.orderSum=a,e.checkzz=!1,e.limit=10,e.clearDone=!1;e._menuRecords=[],n(function(){e.CurrentDate=new Date},1e3),o.on("connect",function(){console.log("socket connected...."),o.emit("register:device","Chloe"),o.on("VoidOrSuccessTo:OrderApp",function(n){if(console.log("billout: ",n),!_.isEmpty(n)){var o=_.find(e.menuRecords,{tableno:n.tableno});_.isEmpty(o)||_.each(e.menuRecords,function(e){e.tableno==n.tableno&&(e.isPaid=!0)}),d(),i(function(){c.reload()},1e3)}}),o.on("sendto:Kitchen",function(n){if(console.log("data: ",n),!_.isEmpty(n)){if(n.ready=!1,n.serve=!1,n.isDone=!1,n.isPaid=!1,_.isNull(n.datetime)?n.datetime1=r().format("LT"):n.datetime1=r(n.datetime).format("LT"),!_.isEmpty(n)){var o=_.find(e.menuRecords,{tableno:n.tableno});_.isEmpty(o)?(_.each(n.orders,function(e){e.checked=!1,e.tableno=n.tableno}),e.menuRecords.push(n)):_.each(e.menuRecords,function(e){e.tableno==n.tableno&&e.orders.length!==n.orders.length&&_.each(n.orders,function(n){var o=_.find(e.orders,{p_id:n.p_id});_.isEmpty(o)&&e.orders.push(n)})})}d()}})});var s=JSON.parse(t.localStorage.getItem("kitchen_orders"))||[];_.isEmpty(s)||(s=_.reject(s,{isPaid:!0}),e.menuRecords=s,console.log("$scope.menuRecords: ",e.menuRecords),d(),n(function(){e.menuRecords&&e.menuRecords.length>0?_.each(e.menuRecords,function(n){var o=r(new Date),t=r(n.datetime),a=o.diff(t),i=r.duration(a).asMinutes();Math.floor(i)>1?(n.isLapsed=!0,n.lapsedTime=Math.floor(i)):n.isLapsed=!1,n.serve&&(e.clearDone=!0)}):e.clearDone=!1},1e3)),e.hmSwipeleft=function(n,t){_.each(e.menuRecords,function(e){if(e.orders&&e.orders.length>0){var t=_.filter(e.orders,{p_id:n.p_id,checked:!0});t&&t.length>0?(t=t[0],t.isDone=!0):t.isDone=!1;var a=_.filter(e.orders,{isDone:!0});if(a&&a.length==e.orders.length){e.ready=!0;var i={roomname:"Chloe",tableno:e.tableno,datetime:r().format("LT"),serve:!1,done:!1};return void o.emit("ReceiveData:sendingTo:Que",i)}e.ready=!1}}),d()},e.checkChecked=function(n){_.each(e.menuRecords,function(e){if(e.orders&&e.orders.length>0){var n=_.filter(e.orders,{checked:!0});n&&n.length>0?e.checked=!0:e.checked=!1}}),d()},e.transparentcheck=function(n){_.each(e.orderSum,function(e){_.each(e.menu,function(e){var n=_.filter(e.orders,{checked:!0});if(n&&n.length?e.checked=!0:e.checked=!1,n&&n.length==e.orders.length){e.ready=!0;var t={roomname:"Chloe",tableno:e.tableno,datetime:r().format("LT"),serve:!1,done:!1};return void o.emit("ReceiveData:sendingTo:Que",t)}e.ready=!1}),d()})},e.serveOrder=function(n){var t={roomname:"Chloe",tableno:n.tableno,datetime:r().format("LT"),serve:!0,done:!1};o.emit("ReceiveData:sendingTo:Que",t),_.each(e.menuRecords,function(o){o.tableno==n.tableno?(o.serve=!0,o.isDone=!0):o.isDone=!1,o.serve&&(e.clearDone=!0)}),d()},e.doneOrder=function(n){_.each(e.menuRecords,function(e){if(e.serve){e.isDone=!0;var t={roomname:"Chloe",tableno:n.tableno,datetime:r().format("LT"),serve:!0,done:!0};return void o.emit("ReceiveData:sendingTo:Que",t)}}),d(),i(function(){c.reload()},1e3)},e.removeAllDone=function(){_.each(e.menuRecords,function(e){if(e.serve){e.isDone=!0;var n={roomname:"Chloe",tableno:e.tableno,datetime:r().format("LT"),serve:!0,done:!0};o.emit("ReceiveData:sendingTo:Que",n)}}),d(),i(function(){c.reload()},1e3)},e.generateRandomData=function(){var n=["Vcuie","Loy2x","Estoy","LuckyBoy","Pipoy","EJBoy","Dodong"],o=["Dine - In","Take - Out","Deliver"],t=[{quantity:_.random(1,5),item_name:"Chicken Binakol",p_id:_.uniqueId()},{quantity:_.random(1,5),item_name:"Pork Sisig",p_id:_.uniqueId()},{quantity:_.random(1,5),item_name:"Sinuglaw",p_id:_.uniqueId()},{quantity:_.random(1,5),item_name:"Sack Rice",p_id:_.uniqueId()}],i=_.random(1,15);_.each(t,function(e){var n=_.sample(a);e.producttypename=n.menuType,e.producttypeId=n.menuCode,e.checked=!1,e.tableno=i});var c={orderstatus:_.sample(o),tableno:i,waitername:_.sample(n),orders:t,datetime:r().format(),datetime1:r().format("LT"),roomname:"Chloe",ready:!1,serve:!1,isDone:!1,isPaid:!1};e.menuRecords.push(c),d()}}angular.module("chloe").controller("MainCtrl",e),e.$inject=["$scope","$interval","mySocket","$window","moment","Category","$timeout","$state"]}();
!function(){"use strict";function o(o){console.log("AppConfigCtrl")}angular.module("chloe").controller("AppConfigCtrl",o),o.$inject=["$scope"]}();
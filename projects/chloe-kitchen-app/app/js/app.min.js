!function(){"use strict";angular.module("chloe",["ui.router","ui.bootstrap","angularMoment","btford.socket-io","hmTouchEvents"]).constant("baseURL","http://54.206.38.223:5006").run(["$state","$rootScope","$window",function(o,t,n){t.goBack=function(){n.history.back()}}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(o,t,n){n.html5Mode({enabled:!1,requireBase:!1}),n.hashPrefix(""),t.otherwise("/"),o.state("main",{url:"/",templateUrl:"modules/main.html",controller:"MainCtrl"})}]).factory("jQuery",["$window",function(o){return o.jQuery}]).factory("_",["$window",function(o){return o.jQuery}]).factory("async",["$window",function(o){return o.async}]).factory("io",["$window",function(o){return o.io}]).factory("moment",["$window",function(o){return o.moment}]).factory("mySocket",["socketFactory","io","baseURL",function(o,t,n){var r=t.connect(n),e=o({ioSocket:r});return e}])}();
!function(){"use strict";angular.module("chloe").constant("Category",[{menuType:"Beverages",menuCode:"1"},{menuType:"Desserts",menuCode:"2"},{menuType:"Sides & Salads",menuCode:"3"},{menuType:"Entree",menuCode:"4"},{menuType:"Appetizers",menuCode:"5"}])}();
!function(){"use strict";function e(e,o,n,t,r,a,c){function i(){if(e.menuRecords&&e.menuRecords.length>0){var o=_.map(e.menuRecords,function(e){return e.orders}),n=_.flattenDeep(o);_.each(e.orderSum,function(o){var t=[],r=_.filter(n,{producttypeId:o.menuCode}),a=_.uniqBy(r,"tableno");_.each(a,function(n){if(n.producttypeId==o.menuCode){var r=_.find(e.menuRecords,{tableno:n.tableno});r?t.push(r):t=[]}}),o.menu=t})}else _.each(e.orderSum,function(e){delete e.menu});console.log("$scope.orderSum: ",e.orderSum)}console.log("MainCtrl"),e.menuRecords=[],e.orderSum=a,e.checkzz=!1,e.limit=10;e._menuRecords=[],o(function(){e.CurrentDate=new Date},1e3),n.on("connect",function(){console.log("connected...."),n.emit("register:device","Chloe"),n.on("sendto:Kitchen",function(o){if(o.ready=!1,o.serve=!1,_.isNull(o.datetime)?o.datetime1=r().format("LT"):o.datetime1=r(o.datetime).format("LT"),!_.isEmpty(o)){var n=_.find(e.menuRecords,{tableno:o.tableno});n?(e.menuRecords=_.reject(e.menuRecords,{tableno:o.tableno}),e.menuRecords.push(o)):(_.each(o.orders,function(e){e.checked=!1,e.tableno=o.tableno}),e.menuRecords.push(o))}i(),t.localStorage.setItem("kitchen_orders",JSON.stringify(e.menuRecords))})});var d=JSON.parse(t.localStorage.getItem("kitchen_orders"))||[];_.isEmpty(d)||(e.menuRecords=d,console.log("menuRecords: ",e.menuRecords),i()),e.hmSwipeleft=function(o){console.log("hmSwipeleft: ",o),_.each(e.menuRecords,function(e){if(e.orders&&e.orders.length>0){var n=_.filter(e.orders,{p_id:o.p_id,checked:!0});n&&n.length>0?(n=n[0],n.isDone=!0):n.isDone=!1}}),i(),t.localStorage.setItem("kitchen_orders",JSON.stringify(e.menuRecords))},e.checkChecked=function(){_.each(e.menuRecords,function(e){if(e.orders&&e.orders.length>0){var o=_.filter(e.orders,{checked:!0});if(o&&o.length>0?e.checked=!0:e.checked=!1,o&&o.length==e.orders.length){e.ready=!0;var t={roomname:"Chloe",tableno:e.tableno,datetime:r().format("LT"),serve:!1};return void n.emit("ReceiveData:sendingTo:Que",t)}e.ready=!1}}),i(),t.localStorage.setItem("kitchen_orders",JSON.stringify(e.menuRecords))},e.transparentcheck=function(o){_.each(e.orderSum,function(e){_.each(e.menu,function(e){var o=_.filter(e.orders,{checked:!0});if(o&&o.length?e.checked=!0:e.checked=!1,o&&o.length==e.orders.length){e.ready=!0;var t={roomname:"Chloe",tableno:e.tableno,datetime:r().format("LT"),serve:!1};return void n.emit("ReceiveData:sendingTo:Que",t)}e.ready=!1}),i(),t.localStorage.setItem("kitchen_orders",JSON.stringify(e.menu))})},e.serveOrder=function(o){console.log("item: ",o);var a={roomname:"Chloe",tableno:o.tableno,datetime:r().format("LT"),serve:!0};n.emit("ReceiveData:sendingTo:Que",a),e.menuRecords=_.reject(e.menuRecords,{tableno:o.tableno}),i(),t.localStorage.setItem("kitchen_orders",JSON.stringify(e.menuRecords))},e.generateRandomData=function(){var o=["Vcuie","Loy2x","Estoy","LuckyBoy","Pipoy","EJBoy","Dodong"],n=["Dine - In","Take - Out","Deliver"],c=[{quantity:_.random(1,5),item_name:"Chicken Binakol",p_id:_.uniqueId()},{quantity:_.random(1,5),item_name:"Pork Sisig",p_id:_.uniqueId()},{quantity:_.random(1,5),item_name:"Sinuglaw",p_id:_.uniqueId()},{quantity:_.random(1,5),item_name:"Sack Rice",p_id:_.uniqueId()}],d=_.random(1,15);_.each(c,function(e){var o=_.sample(a);e.producttypename=o.menuType,e.producttypeId=o.menuCode,e.checked=!1,e.tableno=d});var m={orderstatus:_.sample(n),tableno:d,waitername:_.sample(o),orders:c,datetime:r().format(),datetime1:r().format("LT"),roomname:"Chloe",ready:!1,serve:!1};e.menuRecords.push(m),t.localStorage.setItem("kitchen_orders",JSON.stringify(e.menuRecords)),console.log("menuRecords: ",e.menuRecords),i()}}angular.module("chloe").controller("MainCtrl",e),e.$inject=["$scope","$interval","mySocket","$window","moment","Category","$timeout"]}();
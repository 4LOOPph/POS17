!function(){"use strict";angular.module("tessa-presentation",["btford.socket-io","ui.router","ngResource","angular-uuid","LocalStorageModule","ng.deviceDetector","ngSanitize","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster","com.2fdevs.videogular.plugins.buffering"]).constant("API_URL","http://54.206.38.223:5002").config(["$stateProvider","$urlRouterProvider","localStorageServiceProvider",function(e,o,t){t.setPrefix("tessaP").setStorageType("sessionStorage").setNotify(!0,!0),e.state("main",{url:"/main",templateUrl:"templates/main.html",controller:"GlobalCtrl"}),o.otherwise("/main")}])}();
!function(){"use strict";angular.module("tessa-presentation").factory("socket",["socketFactory","API_URL",function(t,o){var c=io.connect(o),e=t({ioSocket:c});return e}])}();
function AngularUUID(){"use strict";function n(n){function r(n,r,e){var u=r&&e||0,a=0;for(r=r||[],n.toLowerCase().replace(/[0-9a-f]{2}/g,function(n){a<16&&(r[u+a++]=g[n])});a<16;)r[u+a++]=0;return r}function e(n,r){var e=r||0,u=v;return u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]}function u(n,r,u){var a=r&&u||0,o=r||[];n=n||{};var t=null!=n.clockseq?n.clockseq:p,f=null!=n.msecs?n.msecs:(new Date).getTime(),l=null!=n.nsecs?n.nsecs:h+1,c=f-U+(l-h)/1e4;if(c<0&&null==n.clockseq&&(t=t+1&16383),(c<0||f>U)&&null==n.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");U=f,h=l,p=t,f+=122192928e5;var i=(1e4*(268435455&f)+l)%4294967296;o[a++]=i>>>24&255,o[a++]=i>>>16&255,o[a++]=i>>>8&255,o[a++]=255&i;var s=f/4294967296*1e4&268435455;o[a++]=s>>>8&255,o[a++]=255&s,o[a++]=s>>>24&15|16,o[a++]=s>>>16&255,o[a++]=t>>>8|128,o[a++]=255&t;for(var d=n.node||y,v=0;v<6;v++)o[a+v]=d[v];return r?r:e(o)}function a(n,r,u){var a=r&&u||0;"string"==typeof n&&(r="binary"===n?new d(16):null,n=null),n=n||{};var t=n.random||(n.rng||o)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,r)for(var f=0;f<16;f++)r[a+f]=t[f];return r||e(t)}var o,t,f,l=n.crypto||n.msCrypto;if(!o&&l&&l.getRandomValues)try{var c=new Uint8Array(16);f=o=function(){return l.getRandomValues(c),c},o()}catch(i){}if(!o){var s=new Array(16);t=o=function(){for(var n,r=0;r<16;r++)0===(3&r)&&(n=4294967296*Math.random()),s[r]=n>>>((3&r)<<3)&255;return s},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}for(var d="function"==typeof Buffer?Buffer:Array,v=[],g={},m=0;m<256;m++)v[m]=(m+256).toString(16).substr(1),g[v[m]]=m;var w=o(),y=[1|w[0],w[1],w[2],w[3],w[4],w[5]],p=16383&(w[6]<<8|w[7]),U=0,h=0,A=a;return A.v1=u,A.v4=a,A.parse=r,A.unparse=e,A.BufferClass=d,A._rng=o,A._mathRNG=t,A._whatwgRNG=f,A}angular.module("angular-uuid",[]).factory("uuid",["$window",n])}"undefined"!=typeof module&&module.exports?module.exports=new AngularUUID:"undefined"!=typeof define&&define.amd?define(function(){return new AngularUUID}):AngularUUID();
!function(){"use strict";angular.module("tessa-presentation").controller("GlobalCtrl",["$scope","uuid","localStorageService","socket","deviceDetector","$interval","$sce","$timeout",function(e,t,o,s,i,n,l,a){var c=o.get("uuid");if(!c){var c=t.v4();console.log(c),o.set("uuid",c)}e.hash=c,e.deviceDetector=i,e.isConnected=!1,e.pdfName="",e.file_type="",e.audio=null,e.config={};var r;e.init=function(){e.stop(),r=n(function(){s.emit("pair:deviceUUID",{browser:i.browser,browser_version:i.browser_version,device:i.device,os:i.os,os_version:i.os_version,deviceType:"presentation",deviceUUID:c})},1e3)},e.stop=function(){n.cancel(r)},e.init(),e.loadFile=function(t){console.log("$scope.data: ",t),e.file_type=t.asset_mimetype,"audio"==t.asset_type?(e.audio=!0,a(function(){e.$apply(function(){e.config={autoPlay:!0,sources:[{src:l.trustAsResourceUrl(t.asset_url),type:t.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})},10)):"video"==t.asset_type?(e.audio=!1,a(function(){e.$apply(function(){e.config={autoPlay:!0,sources:[{src:l.trustAsResourceUrl(t.asset_url),type:t.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})},10)):(e.audio=null,e.pdfName=t.media_name,"application/pdf"==t.asset_mimetype?a(function(){e.$apply(function(){e.pdfUrl=l.trustAsResourceUrl(t.asset_url)})},10):"text/plain"==t.asset_mimetype?a(function(){e.$apply(function(){e.pdfUrl=l.trustAsResourceUrl("https://docs.google.com/gview?url="+t.asset_url+"&embedded=true")})},10):a(function(){e.$apply(function(){e.pdfUrl=l.trustAsResourceUrl("https://view.officeapps.live.com/op/view.aspx?src="+t.asset_url)})},10),console.log("$scope.pdfUrl: ",t.asset_url)),console.log("$scope.audio: ",e.audio)},s.on("pair:init",function(){console.log("pair:init")}),s.on("pair:connected",function(t){e.isConnected=!0,e.stop(),console.log("data: ",t),e.loadFile(t.asset_file)}),s.on("pair:fail",function(){e.isConnected=!1,e.init()})}])}();
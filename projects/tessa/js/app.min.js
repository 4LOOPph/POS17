!function(){"use strict";angular.module("tessaApp",["ksSwiper","ui.router","restangular","ngSanitize","ui.bootstrap","ui.select","ngTouch","ngAnimate","angularjs-dropdown-multiselect","toastr","LocalStorageModule","angucomplete-alt","ngFrontier","angularMoment","ngDialog","angularSpinner","angular-loading-bar","angular.filter","textAngular","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster","com.2fdevs.videogular.plugins.buffering","angular-jwt","infinite-scroll","io.dennis.contextmenu","bootstrapLightbox","angularTreeview","angularFileUpload","btford.socket-io","tessa-presentation","angular-pdf-thumbnail"]).constant("ACCESSKEY","jeJMH2vWAQocOrat0bu1yqLJg1X0xdYZ").constant("API_URL","http://54.206.38.223:5002").constant("API_VERSION","/api/1.0/").constant("EXT_ID","abggimbnoanedfgibfmkilplcmehkfln")}();
!function(){"use strict";angular.module("tessaApp").run(["$location","APIFactory","$rootScope","$window","$state","localStorageService","$frontierAnalytics","usSpinnerService","AuthFactory","jwtHelper","API_URL","EXT_ID",function(e,n,t,i,o,r,a,c,s,u,l,p){t._=window._,window.API_URL=l,window.EXT_ID=p,t.allproducts=[],t.cartItems=[],t.cartItems=_.isEmpty(r.get("Cart"))?[]:JSON.parse(r.get("Cart")),a.debugMode(!1),a.allowPageTracking(!1),a.allowEventTracking(!1),a.allowViewTracking(!1),a.allowAppTracking(!1),a.allowDeviceTracking(!1),a.Initialize({accessCode:"958441082755103",trackerName:"project-tessa",encoding:"utf-8"});var f=function(){async.waterfall([function(e){n.getArticles(function(n){_.each(n.response.result,function(e){e.type="Experience"}),_.each(n.response.result,function(e){e.name=e.title,e.id=e.article_id}),e(null,n.response.result)})},function(e,t){n.getProductBundle(function(n){_.each(n.response.result,function(e){e.type="Solutions"}),_.each(n.response.result,function(e){e.name=e.bundle_name,e.id=e.pb_id}),t(null,n.response.result,e)})},function(e,t,i){var o=[];n.getProduct(function(n,r){o=_.filter(r.response.result,function(e){return"Hardware"==e.product_type}),_.each(o,function(e){e.type="Hardware"}),_.each(o,function(e){e.name=e.item_name,e.id=e.p_id}),i(null,o,e,t)})},function(e,n,i,o){var r=[];_.each(e,function(e){1==e.is_published&&0==e.is_archived&&r.push(e)}),_.each(n,function(e){1==e.is_published&&0==e.is_archived&&r.push(e)}),_.each(i,function(e){1==e.is_active&&r.push(e)}),t.allproducts=r}])};s.getCurrentUser()&&f(),t.$on("InitializeData",function(){f()}),t.$on("loading:progress",function(){c.spin("spinner-1")}),t.$on("loading:finish",function(){c.stop("spinner-1")}),t.goBack=function(){i.history.back()},t.$on("$stateChangeStart",function(n,t,i,c,l){if(_.isNull(s.getCurrentUser()))"login"!==t.name&&(n.preventDefault(),o.go("login"));else{var p=s.getUserToken(),f=JSON.parse(r.get("appuser"));a.setUserId(_.toString(f.uc_id)),u.isTokenExpired(p)?s.logout().then(function(){e.path("/login")}):"login"==t.name&&(n.preventDefault(),o.go("main.experience"))}}),t.$on("$stateChangeSuccess",function(e,n,i,o,r){t.currentUser=s.getCurrentUser(),t.label="Solutions"})}])}();
!function(){"use strict";angular.module("tessaApp").config(["$stateProvider","$httpProvider","RestangularProvider","$urlRouterProvider","API_URL","API_VERSION","$provide","usSpinnerConfigProvider","localStorageServiceProvider",function(t,e,r,l,a,o,n,i,s){e.interceptors.push("authInterceptor"),e.interceptors.push("httpInterceptor"),n.value("baseURL",a),r.setBaseUrl(a+o),i.setDefaults({color:"#004D7F",radius:20,width:8,length:16}),s.setPrefix("tessa"),t.state("login",{url:"/login",templateUrl:"views/login.html",controller:"loginCtrl"}).state("presentation",{url:"/presentation",templateUrl:"presentation/templates/main.html",controller:"GlobalCtrl"}).state("main",{url:"/main",templateUrl:"views/main.html",controller:"MainCtrl"}).state("main.experience",{url:"/experience",templateUrl:"views/experience.html",controller:"expCtrl"}).state("priceBook",{url:"/priceBook",templateUrl:"views/priceBook.html"}).state("main.productCatalogue",{url:"/productCatalogue",templateUrl:"views/catalogue-page.html",controller:"productCtrl"}).state("main.articlePage",{url:"/articlePage/:selected_id",templateUrl:"views/article.page.html",controller:"ModalInstanceCtrl"}).state("main.customerQuotes",{url:"/customerQuotes",templateUrl:"views/customerQuotes.html"}).state("main.quoteProfile",{url:"/quoteProfile/:quote_id",templateUrl:"views/quoteProfile.html",controller:"QuoteCtrl"}).state("main.search",{url:"/search?value",templateUrl:"views/search.html",controller:"searchCtrl"}).state("main.quote",{url:"/quote",templateUrl:"views/quote.html",controller:"QuoteCtrl"}).state("main.productDetailsSolution",{url:"/productCatalogue/productDetailsSolution/:selected_id",templateUrl:"views/productDetailsSolution.html",controller:"detailSolutionCtrl"}).state("main.productDetailsHardware",{url:"/productCatalogue/productDetailsHardware/:selected_id",templateUrl:"views/productDetailsHardware.html",controller:"hardwareDetailsCtrl"}).state("main.presentation",{url:"/presentation",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.assetGallery",{url:"/assetGallery",templateUrl:"views/presentation/asset-gallery.html",controller:"presentationCtrl"}).state("main.presentation_starred",{url:"/presentation/starred",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.presentation_trash",{url:"/presentation/trash",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.openfolder",{url:"/presentation/folder/:_id",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.opensubfolder",{url:"/presentation/folder/:_id/s/:sub_id",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}),l.otherwise("/login")}])}();
!function(){"use strict";function e(e,o,t,r,a,c,s,u,l){a.appuser=JSON.parse(o.getCurrentUser()),console.log("$rootScope.user:",a.appuser)}angular.module("tessaApp").controller("MainCtrl",e),e.$inject=["$scope","AuthFactory","_","$state","$rootScope","$filter","$uibModal","localStorageService","$timeout"]}();
!function(){"use strict";function n(n,e,s,t,r,o,i,c,u,a){n.user={},n.login=function(){u.spin("spinner-login"),e.authenticateAccount(n.user).then(function(n){400!=n.statusCode||n.response.success?n.success?(a.success(n.msg),e.setCurrentUser(n.result.user),e.setUserToken(n.result.token),u.stop("spinner-login"),i.go("main.experience",null,{reload:!0})):(a.warning(n.msg,"Warning"),u.stop("spinner-login")):(o.each(n.response.result,function(n){a.warning(n.msg,"Warning")}),u.stop("spinner-login"))})}}angular.module("tessaApp").controller("loginCtrl",n),n.$inject=["$scope","AuthFactory","$location","$stateParams","$filter","_","$state","localStorageService","usSpinnerService","toastr"]}();
!function(){"use strict";function e(e,t,l,i,r,a,n,c,s,o,d,u){function p(e){return a.map(e,function(e){if("location"==e.type){var t=e.label.replace(/[\s]/g,"");return{label:t.toLowerCase(),type:e.type,index:e.sortindex}}if("configuration"==e.type){e.label.replace(/[\s]/g,"");return{label:e.label,type:e.type,index:e.sortindex}}return"Family"==e.type?{label:e.label,type:e.type,index:e.sortindex}:"Products"==e.type?{label:e.label,type:e.type,index:e.sortindex}:void 0})}e.shows=!0,e.DisplayTab="All",e.allproducts=c.allproducts,e.searchkeyword=i.value,e.bundles=[],e.experience=[],e.location=[],e.configuration=[],e.filterProduct=[],e.filtersearch=[],e.copy=[],e.typeselected=[],e.typeselected2=[],e.typeselected3=[],e.typeselected4=[],e.experiencedata=[{id:1,label:"Eze Impress",type:"Family"},{id:2,label:"Eze Wifi",type:"Family"}],e.producttypedata=[{id:4,label:"Hardware",type:"Products"},{id:6,label:"Experience",type:"Products"},{id:7,label:"Solution",type:"Products"}],e.location=[{id:8,label:"Indoor",type:"location"},{id:9,label:"Outdoor",type:"location"},{id:10,label:"Semi Outdoor",type:"location"}],e.config=[{id:11,label:"Wall Mounted",type:"configuration"},{id:12,label:"Floor Mounted",type:"configuration"}],e.dynamicPopover={templateUrl:"productType.html",templateUrl2:"ezefamily.html",templateUrl3:"location.html",templateUrl4:"configuration.html"},c.$watch("allproducts",function(t){e.allproducts=t}),i.value&&(async.waterfall([function(e){t.getProduct(function(t,l){e(null,l.response.result)})},function(e,l){t.getProductBundle(function(t){l(null,e,t.response.result)})},function(l,n,c){t.getAll(i.value).then(function(t){if(200==t.statusCode&&t.response.success){var l=[];l=a.filter(t.response.result.values,function(e){return"Services"!==e.type}),a.each(l,function(t){if(!a.isEmpty(e.allproducts)){var l=a.find(e.allproducts,{id:t.id});a.isUndefined(l)||(l.p_id?(t.is_archived=l.is_archived,t.img_default=l.img_default,t.is_published=l.is_published,t.tags=l.tags):l.pb_id?(t.product_images=l.product_images,t.is_archived=l.is_archived,t.is_published=l.is_published,t.product_bundle_category=l.product_bundle_category):l.article_id&&(t.mediafiles=l.mediafiles,t.is_active=l.is_active,t.type=l.type))}})}var i=[],c=r("filter")(l,{self:"articles"});e.articles=a.filter(c,function(e){return 1==e.is_active});var s=r("filter")(l,{self:"products"});e.products=a.filter(s,function(e){return 1==e.is_published&&0==e.is_archived});var d=r("filter")(l,{self:"bundles"});a.each(d,function(t){var l=a.find(n,{pb_id:t.id});a.isUndefined(l)||(l.pb_id==t.id&&(l.self=t.self,l.type="Solution",l.product_bundle_category.length>0&&(l.category_label=l.product_bundle_category[0].category_label)),e.bundles.push(l))}),e.bundles=a.filter(e.bundles,function(e){return 1==e.is_published&&0==e.is_archived}),i.push(e.articles),i.push(e.products),i.push(e.bundles),e.filtersearch=a.flattenDeep(i),e.copy=angular.copy(e.filtersearch),e.filterProduct=angular.copy(e.filtersearch),a.isEmpty(e.filtersearch)&&o(function(){e.noresult="NO RESULT FOUND"},700)})}]),u.trackEvent("Global Search","search",i.value,e.filtersearch.length)),e.activeTab=function(t){e.DisplayTab=t},e.detail=function(t,l){e.selected=t},e.openModal=function(t){var l=s.open({animation:!0,templateUrl:"./views/search.detail.modal.html",size:"md",controller:"searchDetailControl",backdrop:!0,windowClass:"xd-modal",backdropClass:"modal-backdrop fade in",resolve:{search:function(){return t}}});l.result.then(function(t){e.selected=t},function(){console.info("Modal dismissed at: "+new Date)})},e.filterCheck=function(){e.typeselected&&e.typeselected.length<1?(e.filterProduct=angular.copy(e.copy),e.filtersearch=angular.copy(e.filterProduct)):e.typeselected2&&e.typeselected2.length<1?e.filtersearch=angular.copy(e.filterProduct):e.typeselected3&&e.typeselected3.length<1?e.filtersearch=angular.copy(e.filterFamily):e.typeselected4&&e.typeselected4.length<1&&(e.filtersearch=angular.copy(e.filterLocation)),e.articles=r("filter")(e.filtersearch,{self:"articles"}),e.products=r("filter")(e.filtersearch,{self:"products"}),e.bundles=r("filter")(e.filtersearch,{self:"bundles"}),c.$broadcast("loading:finish")},e.toggleSelectedType=function(t,l){e.bundleTags=[];var i=[];e.filtersearch=[],c.$broadcast("loading:progress"),o(function(){n()},600);var n=function(){if(e.typeselected.indexOf(t)==-1?(t.sortindex=l,e.typeselected.push(t)):e.typeselected=a.filter(e.typeselected,function(e){return e.id!=t.id}),e.typeselected=a.sortBy(e.typeselected,["sortindex"]),i=p(e.typeselected),i&&i.length>0){var n=[];a.map(e.copy,function(t){a.each(t.tags,function(t){a.isEmpty(t.tags)||e.bundleTags.push(t)})});a.each(i,function(t){var l=[],i=[],c=[];l=a.filter(e.copy,{type:t.label}),i=a.filter(e.copy,{category_label:t.label}),c=r("filter")(e.bundleTags,{tags:t.label}),l&&l.length>0&&a.each(l,function(t){var l=a.find(e.copy,{_id:t._id});a.isUndefined(l)||n.push(l)}),i&&i.length>0&&a.each(i,function(t){var l=a.find(e.copy,{_id:t._id});a.isUndefined(l)||n.push(l)}),c&&c.length>0&&a.each(c,function(t){if(t.pb_id){var l=a.find(e.copy,{pb_id:t.pb_id});a.isUndefined(l)||n.push(l)}else{var l=a.find(e.copy,{p_id:t.p_id});a.isUndefined(l)||n.push(l)}})}),e.filterProduct=a.uniqBy(n,function(e){return e._id})}else e.filterProduct=angular.copy(e.copy);e.filtersearch=angular.copy(e.filterProduct),e.articles=r("filter")(e.filtersearch,{self:"articles"}),e.products=r("filter")(e.filtersearch,{self:"products"}),e.bundles=r("filter")(e.filtersearch,{self:"bundles"}),c.$broadcast("loading:finish"),a.isEmpty(e.filtersearch)&&o(function(){e.noresult="NO RESULT FOUND"},700)}}}angular.module("tessaApp").controller("searchCtrl",e),e.$inject=["$scope","APIFactory","$location","$stateParams","$filter","_","$state","$rootScope","$uibModal","$timeout","usSpinnerService","$frontierAnalytics"]}();
!function(){"use strict";function e(e,s,l,t,n,a){console.log("selected:",l),e.selected=l,e.images=e.selected.mediafiles,e.cancel=function(){s.dismiss("cancel")},e.viewDetails=function(e){"products"==e.self?(n.go("main.productDetailsHardware",{selected_id:e.id},{reload:!0}),s.dismiss("cancel")):(n.go("main.productDetailsSolution",{selected_id:e.pb_id},{reload:!0}),s.dismiss("cancel"))},e.openShareModal=function(){var s=t.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return e.selected},param:function(){return"articles"==e.selected.self?"article":"bundles"==e.selected.self?"bundle":"products"==e.selected.self?"product":void 0}}});s.result.then(function(s){e.selected=s},function(){console.info("Modal dismissed at: "+new Date)})}}angular.module("tessaApp").controller("searchDetailControl",e),e.$inject=["$scope","$uibModalInstance","search","$uibModal","$state","$sce"]}();
!function(){"use strict";function e(e,t,a,r,i,c,n,s,o,l,d){function u(e){return i.map(e,function(e){if("location"==e.type){var t=e.label.replace(/[\s]/g,"");return{label:t.toLowerCase(),type:e.type,index:e.sortindex}}if("configuration"==e.type)return{label:e.label,type:e.type,index:e.sortindex}})}function p(e,t,a,c){var n=[],s=[],o=[];if(e.att_id){i.each(t,function(e){n=r("filter")(a,{value:e.value}),n&&n.length>0&&i.each(n,function(e){s=i.find(c,{p_id:e.p_id}),i.isUndefined(s)||o.push(s)})});var l=i.uniqBy(o,function(e){return e._id});return l}i.each(t,function(e){n=r("filter")(a,{tags:e.label}),n.length>0&&i.each(n,function(e){s=i.find(c,{pb_id:e.pb_id}),i.isUndefined(s)||o.push(s)})});var l=i.uniqBy(o,function(e){return e._id});return l}e.solutionTypes="EzeImpress",e.prodTypeLabel=i.isEmpty(o.get("label"))?"Solution":JSON.parse(o.get("label")),d.trackView("Product Catalogue/",e.prodTypeLabel,"/",e.solutionTypes),e.txtSearch="",e.bundles=[],e.productDetails=[],e.seemore=!0,e.products=[],e.productscopy=[],e.ezewificopy=[],e.categoryWifi=[],e.screens=[],e.Screens=[],e.ScreenSize=[],e.media=[],e.MediaPlayer=[],e.Mediacopy=[],e.bundleTags=[],e.searchcopy=[],e.filtercopy=[],e.typeselected=[],e.tagselected=[],e.productsAttributesValue=[],e.hardwareType=i.isEmpty(o.get("hardtype"))?"Screens":JSON.parse(o.get("hardtype")),e.location=[{id:8,label:"Indoor",type:"location"},{id:9,label:"Outdoor",type:"location"},{id:10,label:"Semi Outdoor",type:"location"}],e.config=[{id:11,label:"Wall Mounted",type:"configuration"},{id:12,label:"Floor Mounted",type:"configuration"}],e.dynamicPopover={location:"location.html",mounting:"configuration.html",screensize:"screens.html",brightness:"brightness.html",bezel:"bezel.html",usage:"usage.html",displaytechno:"displaytechno.html",weight:"weight.html",dimensions:"dimensions.html",orientation:"orientation.html",displayinterface:"displayinterface.html",vesa:"vesa.html",screentype:"screentype.html",resolution:"resolution.html",templateUrl7:"wifi.html",templateUrl8:"ram.html",templateUrl9:"displaytechno.html",templateUrlStorage:"storage.html",templateUrlGraphics:"graphics.html",templateUrlResolution:"resolutions.html"},e.infiniteScrollData={},e.infiniteScrollData.numToAdd=10,e.infiniteScrollData.currentItems=10,e.resetInfScroll=function(){e.infiniteScrollData.currentItems=e.infiniteScrollData.numToAdd},e.addMoreItems=function(){e.infiniteScrollData.currentItems+=e.infiniteScrollData.numToAdd};var f=function(){t.getProductBundle(function(t){var a=[],c=[];e.products=t.response.result,c=i.map(e.products,function(e){return void 0!=e.product_bundle_category[0]&&a.push(e.product_bundle_category[0]),e.products.length>0||(e.weekly=0),e.products});var n=i.flattenDeep(c),s=i.map(n,function(e){return e.product_detail});i.each(n,function(e){var t=i.find(s,{p_id:e.product_id});i.isUndefined(t)||(e.productType_id=t.productType_id,e.sell_price=t.sell_price,t.product_category.length>0&&(e.category_id=t.product_category[0].category_id))});var o=i.groupBy(n,"pb_id");if(i.map(o,function(t,a){var c=r("filter")(t,{productType_id:18}),n=r("filter")(t,{productType_id:17}),s=r("filter")(t,{productType_id:20});if(parseInt(a)==parseInt(a)){if((n.length>0||c.length>0)&&(e.resulthardwaresum=i.sum(i.map(n,function(e){return e.sell_price*e.quantity})),e.softwaresum=i.sum(i.map(c,function(e){return e.sell_price*e.quantity}))),s.length>0){var o=r("filter")(s,{category_id:87}),l=r("filter")(s,{category_id:90});(o.length>0||l.length>0)&&(e.deploymentservice=i.sum(i.map(o,function(e){return e.sell_price*e.quantity})),e.supportservice=i.sum(i.map(l,function(e){return e.sell_price*e.quantity}))),e.servicesum=i.sum(i.map(s,function(e){return e.sell_price*e.quantity}))}void 0==e.deploymentservice&&void 0==e.supportservice?(e.deploymentservice=0,e.supportservice=0):(e.deploymentservice,e.supportservice);var d=e.deploymentservice+e.softwaresum+e.resulthardwaresum;e.weekly=12*(31.111*d/1e3+e.supportservice)/52}i.each(e.products,function(t){t.pb_id==parseInt(a)&&(t.weekly=e.weekly)})}),i.each(e.products,function(e){i.find(a,function(t){e.pb_id==t.bundle_id&&(e.category_label=t.category_label,e.category_id=t.category_id)})}),e.categoryWifi=i.filter(e.products,function(e){return 101==e.category_id}),e.categoryWifi&&e.categoryWifi.length>0){var l=i.flattenDeep(i.map(e.categoryWifi,function(e){return e.products})),d=i.map(l,function(e){return e.product_detail});i.each(d,function(e){i.each(e.product_category,function(t){"CMS"==t.category_label&&(e.category_label=t.category_label)})}),e.categWifi=r("filter")(d,{category_label:"CMS"})}e.products=i.filter(e.products,function(e){if(1==e.is_published&&0==e.is_archived&&!i.isUndefined(e)&&"Eze Impress"==e.category_label)return e}),e.alength=e.products.length,e.productscopy=angular.copy(e.products),e.ezewificopy=angular.copy(e.categoryWifi)}),async.waterfall([function(a){t.getProduct(function(t,c){e.allproducts=c.response.result,e.hardware=i.filter(e.allproducts,function(e){return"Hardware"===e.product_type}),e.prodCateg=[];for(var n=0;n<e.hardware.length;n++)for(var s=0;s<e.hardware[n].product_category.length;s++)e.prodCateg.push(e.hardware[n].product_category[s]);i.each(e.hardware,function(t){i.find(e.prodCateg,function(e){t.p_id==e.product_id&&(t.category_id=e.category_id)})});var o=r("filter")(e.hardware,{category_id:80}),l=r("filter")(e.hardware,{category_id:83});a(null,o,l)})},function(e,a,r){var c=[];async.each(e,function(e,a){t.getProductAttribute(e.p_id,function(t,r){if(200==r.statusCode&&r.response.success&&e.p_id==r.response.result.p_id){var i=r.response.result.attribute_values;i&&i.length>0?e.attributes=r.response.result:e.attributes=null,a()}})},function(t,n){i.each(e,function(e){1==e.is_published&&0==e.is_archived&&c.push(e)}),r(null,e,a,c)})},function(e,a,r,c){var n=[];async.each(a,function(e,a){t.getProductAttribute(e.p_id,function(t,r){if(200==r.statusCode&&r.response.success&&e.p_id==r.response.result.p_id){var i=r.response.result.attribute_values;i&&i.length>0?e.attributes=r.response.result:e.attributes=null,a()}})},function(t,s){i.each(a,function(e){1==e.is_published&&0==e.is_archived&&n.push(e)}),c(null,e,a,r,n)})},function(t,a,c,n,s){if(c&&c.length>0){e.Screens=c,e.Screenscopy=angular.copy(c);var o=[];i.each(c,function(e){i.isNull(e.attributes)||o.push(e.attributes.attribute_values)}),o=i.flattenDeep(o),e.attribute_values=angular.copy(o),e.ScreenSize=r("filter")(o,{attribute:"Screen Size"}),e.Brightness=r("filter")(o,{attribute:"Brightness"}),e.Bezel=r("filter")(o,{attribute:"Bezel Size"}),e.Usage=r("filter")(o,{attribute:"Usage"}),e.Displaytechno=r("filter")(o,{attribute:"Display Technology"}),e.weight=r("filter")(o,{attribute:"Weight"}),e.dimensions=r("filter")(o,{attribute:"Dimensions"}),e.orientation=r("filter")(o,{attribute:"Orientation"}),e.displayinterface=r("filter")(o,{attribute:"Display Interface"}),e.vesa=r("filter")(o,{attribute:"Vesa"}),e.screentype=r("filter")(o,{attribute:"Screen type"}),e.resolution=r("filter")(o,{attribute:"Resolution"})}if(n&&n.length>0){e.MediaPlayer=n,e.Mediacopy=angular.copy(n);var o=[];i.each(n,function(e){i.isNull(e.attributes)||o.push(e.attributes.attribute_values)}),o=i.flattenDeep(o),e.Mediaattribute_values=angular.copy(o),e.Ram=r("filter")(o,{attribute:"RAM"}),e.Storage=r("filter")(o,{attribute:"Storage"}),e.Graphics=r("filter")(o,{attribute:"Graphics"}),e.Resolution=r("filter")(o,{attribute:"Maximum Resolution"})}}])};e.activateTab=function(t){e.solutionTypes=t,d.trackView("Product Catalogue/",e.prodTypeLabel,"/",t)},e.toggleSelectedType=function(t){var a=[];if(s.$broadcast("loading:progress"),t.att_id)if("MediaPlayer"==e.hardwareType)if(e.tagselected.indexOf(t)==-1?e.tagselected.push(t):e.tagselected=i.filter(e.tagselected,function(e){return e._id!=t._id}),!i.isEmpty(e.txtSearch)&&e.searchmedia)if(e.tagselected.length>0){var r=[],c=[];c=p(t,e.tagselected,e.Mediaattribute_values,e.searchmedia),l(function(){e.MediaPlayer=c,e.filterMedia=angular.copy(e.MediaPlayer),s.$broadcast("loading:finish")},600)}else l(function(){e.MediaPlayer=angular.copy(e.searchmedia),s.$broadcast("loading:finish")},600);else if(e.tagselected.length>0){var r=[],c=[];c=p(t,e.tagselected,e.Mediaattribute_values,e.Mediacopy),l(function(){e.MediaPlayer=c,e.filterMedia=angular.copy(e.MediaPlayer),s.$broadcast("loading:finish")},600)}else e.MediaPlayer=angular.copy(e.Mediacopy),l(function(){s.$broadcast("loading:finish")},600);else if(e.tagselected.indexOf(t)==-1?e.tagselected.push(t):e.tagselected=i.filter(e.tagselected,function(e){return e._id!=t._id}),!i.isEmpty(e.txtSearch)&&e.searchscreen)if(e.tagselected.length>0){var r=[],c=[];c=p(t,e.tagselected,e.attribute_values,e.searchscreen),e.Screens=angular.copy(c),e.filterScreens=angular.copy(r),s.$broadcast("loading:finish")}else e.Screens=angular.copy(e.searchscreen),e.filterScreens=angular.copy(e.Screens),l(function(){s.$broadcast("loading:finish")},600);else if(e.tagselected.length>0){var r=[],c=[];c=p(t,e.tagselected,e.attribute_values,e.Screenscopy),e.Screens=c,e.filterScreens=angular.copy(e.Screens),s.$broadcast("loading:finish")}else e.Screens=angular.copy(e.Screenscopy),e.filterScreens=angular.copy(e.Screens),s.$broadcast("loading:finish");else{l(function(){n()},600);var n=function(){if(e.typeselected.indexOf(t)==-1?e.typeselected.push(t):e.typeselected=i.filter(e.typeselected,function(e){return e.id!=t.id}),a=u(e.typeselected),i.isEmpty(e.searchcopy))if(a&&a.length>0){i.map(e.productscopy,function(t){i.each(t.tags,function(t){i.isEmpty(t.tags)||e.bundleTags.push(t)})}),c=p(t,a,e.bundleTags,e.productscopy),e.products=c,e.filtercopy=angular.copy(e.products),s.$broadcast("loading:finish")}else e.products=angular.copy(e.productscopy),e.filtercopy=angular.copy(e.products),s.$broadcast("loading:finish");else if(a&&a.length>0){i.map(e.searchcopy,function(t){i.each(t.tags,function(t){i.isEmpty(t.tags)||e.bundleTags.push(t)})}),c=p(t,a,e.bundleTags,e.searchcopy),e.filterProduct=i.uniqBy(c,function(e){return e._id}),l(function(){e.products=e.filterProduct,e.filtercopy=angular.copy(e.filterProduct),s.$broadcast("loading:finish")},600)}else e.products=angular.copy(e.searchcopy),e.filtercopy=angular.copy(e.products),l(function(){s.$broadcast("loading:finish")},600)}}},e.refresh=function(){s.$broadcast("loading:progress"),l(function(){f()},600),s.$broadcast("loading:finish")},e.uncheck=function(t,a){var r=[];if(t.checked)if(t.att_id)if(i.each(e.tagselected,function(e){e._id==t._id&&(e.checked=!1)}),"MediaPlayer"==e.hardwareType)if(e.tagselected.indexOf(t)==-1?e.tagselected.push(t):e.tagselected=i.filter(e.tagselected,function(e){return e._id!=t._id}),!i.isEmpty(e.txtSearch)&&e.searchmedia)if(e.tagselected.length>0){var c=[],n=[];n=p(t,e.tagselected,e.Mediaattribute_values,e.searchmedia),l(function(){e.MediaPlayer=n,e.filterMedia=angular.copy(e.MediaPlayer),s.$broadcast("loading:finish")},600)}else l(function(){e.MediaPlayer=angular.copy(e.searchmedia),s.$broadcast("loading:finish")},600);else if(e.tagselected.length>0){var c=[],n=[];n=p(t,e.tagselected,e.Mediaattribute_values,e.Mediacopy),l(function(){e.MediaPlayer=n,e.filterMedia=angular.copy(e.MediaPlayer),s.$broadcast("loading:finish")},600)}else e.MediaPlayer=angular.copy(e.Mediacopy),l(function(){s.$broadcast("loading:finish")},600);else if(e.tagselected.indexOf(t)==-1?e.tagselected.push(t):e.tagselected=i.filter(e.tagselected,function(e){return e._id!=t._id}),!i.isEmpty(e.txtSearch)&&e.searchscreen)if(e.tagselected.length>0){var c=[],n=[];n=p(t,e.tagselected,e.attribute_values,e.searchscreen),e.Screens=n,e.filterScreens=angular.copy(c),s.$broadcast("loading:finish")}else e.Screens=angular.copy(e.searchscreen),e.filterScreens=angular.copy(e.Screens),l(function(){s.$broadcast("loading:finish")},600);else if(e.tagselected.length>0){var c=[],n=[];n=p(t,e.tagselected,e.attribute_values,e.Screenscopy),e.Screens=n,e.filterScreens=angular.copy(c),s.$broadcast("loading:finish")}else e.Screens=angular.copy(e.Screenscopy),e.filterScreens=angular.copy(e.Screens),s.$broadcast("loading:finish");else if(!i.isEmpty(e.filtercopy)&&(i.each(e.typeselected,function(e){e.id==t.id&&(e.checked=!1)}),e.typeselected.splice(a,1),r=u(e.typeselected),"EzeImpress"==e.solutionTypes))if(i.isEmpty(e.searchcopy)){if(r&&r.length>0){var c=[],n=[];i.map(e.productscopy,function(t){i.each(t.tags,function(t){i.isEmpty(t.tags)||e.bundleTags.push(t)})}),n=p(t,r,e.bundleTags,e.productscopy),e.filterProduct=i.uniqBy(n,function(e){return e._id})}else e.filterProduct=angular.copy(e.productscopy);e.products=angular.copy(e.filterProduct),e.filtercopy=angular.copy(e.filterProduct)}else{if(r&&r.length>0){var c=[];i.map(e.searchcopy,function(t){i.each(t.tags,function(t){i.isEmpty(t.tags)||e.bundleTags.push(t)})}),n=p(t,r,e.bundleTags,e.searchcopy),e.filterProduct=i.uniqBy(n,function(e){return e._id}),e.products=angular.copy(e.filterProduct),s.$broadcast("loading:finish")}else e.filterProduct=angular.copy(e.filtercopy),e.products=angular.copy(e.filterProduct),s.$broadcast("loading:finish");e.products=angular.copy(e.filterProduct),e.filtercopy=angular.copy(e.filterProduct)}},e.searchData=function(){if(s.$broadcast("loading:progress"),"Solution"==e.prodTypeLabel){l(function(){t()},600);var t=function(){if(i.isEmpty(e.txtSearch))if(e.searchcopy=[],"EzeImpress"==e.solutionTypes)if(i.isEmpty(e.typeselected))e.products=angular.copy(e.productscopy),s.$broadcast("loading:finish");else{var t=[],a=[];if(e.typeselected&&e.typeselected.length>0){var c=[];i.map(e.productscopy,function(t){i.each(t.tags,function(t){i.isEmpty(t.tags)||e.bundleTags.push(t)})}),i.each(e.typeselected,function(n){t=r("filter")(e.bundleTags,n.label),t&&t.length>0&&i.each(t,function(t){a=i.find(e.productscopy,{pb_id:t.pb_id}),i.isUndefined(a)||c.push(a)})}),e.filterProduct=i.uniqBy(c,function(e){return e._id}),e.products=angular.copy(e.filterProduct),s.$broadcast("loading:finish")}}else e.categoryWifi=angular.copy(e.ezewificopy),s.$broadcast("loading:finish");else i.isEmpty(e.typeselected)&&"EzeImpress"==e.solutionTypes?l(function(){e.products=r("filter")(e.productscopy,e.txtSearch),e.searchcopy=angular.copy(e.products),d.trackEvent("Category Search","search",e.txtSearch,e.products.length),s.$broadcast("loading:finish")},300):i.isEmpty(e.typeselected)&&"EzeWifi"==e.solutionTypes?l(function(){e.categoryWifi=r("filter")(e.ezewificopy,e.txtSearch),e.searchcopy=angular.copy(e.products),d.trackEvent("Category Search","search",e.txtSearch,e.categoryWifi.length),s.$broadcast("loading:finish")},300):i.isEmpty(e.typeselected)||"EzeImpress"!=e.solutionTypes?i.isEmpty(e.typeselected)||"EzeWifi"!=e.solutionTypes||l(function(){e.products=r("filter")(e.filtercopy,e.txtSearch),e.searchcopy=angular.copy(e.products),d.trackEvent("Category Search","search",e.txtSearch,e.products.length),s.$broadcast("loading:finish")},300):l(function(){e.products=r("filter")(e.filtercopy,e.txtSearch),e.searchcopy=angular.copy(e.products),d.trackEvent("Category Search","search",e.txtSearch,e.products.length),s.$broadcast("loading:finish")},300)}}else{l(function(){t()},600);var t=function(){if(i.isEmpty(e.txtSearch))if("MediaPlayer"==e.hardwareType)i.isEmpty(e.tagselected)?(e.MediaPlayer=e.Mediacopy,s.$broadcast("loading:finish")):(e.MediaPlayer=angular.copy(e.filterMedia),s.$broadcast("loading:finish"));else if(i.isEmpty(e.tagselected))e.Screens=e.Screenscopy,s.$broadcast("loading:finish");else{var t=[],a=[];if(e.tagselected&&e.tagselected.length>0){var c=[];i.each(e.tagselected,function(n){t=r("filter")(e.attribute_values,{value:n.value}),t&&t.length>0&&i.each(t,function(t){a=i.find(e.Screenscopy,{p_id:t.p_id}),i.isUndefined(a)||c.push(a)})});var n=i.uniqBy(c,function(e){return e._id});e.Screens=n,s.$broadcast("loading:finish")}else e.Screens=angular.copy(e.Screenscopy),s.$broadcast("loading:finish")}else i.isEmpty(e.tagselected)&&"Screens"==e.hardwareType?l(function(){e.Screens=r("filter")(e.Screenscopy,e.txtSearch),e.searchscreen=angular.copy(e.Screens),d.trackEvent("Category Search","search",e.txtSearch,e.Screens.length),s.$broadcast("loading:finish")},300):i.isEmpty(e.tagselected)&&"MediaPlayer"==e.hardwareType?l(function(){e.MediaPlayer=r("filter")(e.Mediacopy,e.txtSearch),e.searchmedia=angular.copy(e.MediaPlayer),d.trackEvent("Category Search","search",e.txtSearch,e.MediaPlayer.length),s.$broadcast("loading:finish")},300):i.isEmpty(e.tagselected)||"Screens"!=e.hardwareType?i.isEmpty(e.tagselected)||"MediaPlayer"!=e.hardwareType||l(function(){e.MediaPlayer=r("filter")(e.filterMedia,e.txtSearch),e.copymedia=angular.copy(e.MediaPlayer),d.trackEvent("Category Search","search",e.txtSearch,e.MediaPlayer.length),s.$broadcast("loading:finish")},300):l(function(){e.Screens=r("filter")(e.filterScreens,e.txtSearch),e.copyscreens=angular.copy(e.Screens),d.trackEvent("Category Search","search",e.txtSearch,e.Screens.length),s.$broadcast("loading:finish")},300)}}},e.clear=function(){"Solution"==e.prodTypeLabel?i.isEmpty(e.txtSearch)&&i.isEmpty(e.typeselected)||(e.txtSearch="",i.forEach(e.typeselected,function(e){e.checked=!1}),e.typeselected.splice(e.typeselected),e.refresh()):"MediaPlayer"==e.hardwareType?i.isEmpty(e.txtSearch)&&i.isEmpty(e.tagselected)||(e.txtSearch="",i.forEach(e.tagselected,function(e){e.checked=!1}),e.tagselected.splice(e.tagselected),e.refresh()):i.isEmpty(e.txtSearch)&&i.isEmpty(e.tagselected)||(e.txtSearch="",i.forEach(e.tagselected,function(e){e.checked=!1}),e.tagselected.splice(e.tagselected),e.refresh())},e.refresh(),e.activeProd=function(t){e.prodTypeLabel=t,"Hardware"==t?(e.txtSearch="",e.seemore=!0,d.trackView("Product Catalogue/",t,"/",e.hardwareType)):(e.txtSearch="",e.seemore=!0,d.trackView("Product Catalogue/",t,"/",e.solutionTypes)),o.set("label",JSON.stringify(e.prodTypeLabel))},e.activeHard=function(t){e.hardwareType=t,e.txtSearch="",o.set("hardtype",JSON.stringify(e.hardwareType)),d.trackView("Product Catalogue/",e.prodTypeLabel,"/",t)},e.togglemodal=function(e){var t=c.open({animation:!0,templateUrl:"./views/share.modal.html",controller:"articleCtrl",size:"sm",resolve:{article:function(){return e}}});t.result.then(function(){n.reload()},function(){console.info("Modal dismissed")})}}angular.module("tessaApp").controller("productCtrl",e),e.$inject=["$scope","APIFactory","$location","$filter","_","$uibModal","$state","$rootScope","localStorageService","$timeout","$frontierAnalytics"]}();
!function(){"use strict";function e(e,t,r,o,a,c,s,i,n,d){e.slides=[],e.allproduct=[],e.hardware_category=[],e.service_category=[],e.hardwarecategories=[],e.servicecategories=[],e.service=[],e.hardwares=[],e.softwares=[],e.relatedProductHardware=[],e.relatedProductSoftware=[],s.cartItems=[],s.cartItems=c.isEmpty(n.get("Cart"))?[]:JSON.parse(n.get("Cart")),o.selected_id&&async.waterfall([function(r){t.getProduct(function(t,o){e.allproduct=o.response.result,r(null,o.response.result)})},function(r,o){t.getCategory(function(t,a){e.allcategory=a.response.result,o(null,r,a.response.result)})},function(r,s,i){t.getDetailSolution(o.selected_id,function(t,o){if(200==o.statusCode&&o.response.success){var n=0;e.details=o.response.result,c.each(e.details.product_images,function(t){e.slides.push({image:t.image_path,index:n}),n++}),i(null,r,s,o.response.result),e.products=e.details.products,c.isNull(e.products)&&(e.details.upfront=0),c.map(e.products,function(e){e.product_detail&&(e.productType_id=e.product_detail.productType_id,e.product_category=e.product_detail.product_category,e.sell_price=e.product_detail.sell_price,e.category_id=e.product_detail.product_category[0].category_id,e.item_name=e.product_detail.item_name,e.category_label=e.product_detail.product_category[0].category_label)}),e.services=a("filter")(e.products,{productType_id:20}),e.hardware=a("filter")(e.products,{productType_id:17}),e.software=a("filter")(e.products,{productType_id:18}),e.softwarePrice=c.map(e.software,function(e){return e.sell_price*e.quantity}),e.hardwareCategory=c.filter(e.hardware,function(e){return e.product_category.length>=1}),console.log("$scope.hardwareCategory:",e.hardwareCategory),c.isNull(e.software)||(c.map(e.software,function(t){void 0!=t.product_category[0]&&e.softwares.push(t.product_category[0])}),c.each(e.software,function(t){c.find(e.softwares,function(e){t.product_id==e.product_id&&(t.category_label=e.category_label)})})),c.isNull(e.hardware)||(c.map(e.hardware,function(t){void 0!=t.product_category[0]&&e.hardwares.push(t.product_category[0])}),c.each(e.hardware,function(t){c.find(e.hardwares,function(e){t.p_id==e.product_id&&(t.category_label=e.category_label)})})),c.isNull(e.services)||(c.map(e.services,function(t){void 0!==t.product_category[0]&&e.service.push(t.product_category[0])}),c.each(e.services,function(t){c.find(e.service,function(e){t.p_id==e.product_id&&(t.category_id=e.category_id)})}),e.deployment=a("filter")(e.services,{category_id:87}),e.support=a("filter")(e.services,{category_id:90}),e.hardwarePrice=c.map(e.hardware,function(e){return e.sell_price*e.quantity}),e.deploymentPrice=c.map(e.deployment,function(e){return e.sell_price*e.quantity}),e.upfront=c.sum(e.deploymentPrice)+c.sum(e.hardwarePrice)+c.sum(e.softwarePrice),e.weekly=31.111*e.upfront/1e3*12/52,e.supportPrice=c.map(e.support,function(e){return e.sell_price*e.quantity}),e.spPrice=c.sum(e.supportPrice))}else d.error(o.response.msg,"Error")})},function(r,a,s,i){t.getRelatedSolutions(o.selected_id,function(t,o){if(200==o.statusCode&&o.response.success){var n=o.response.result;i(null,r,a,s,o.response.result),c.each(n,function(t){"Hardware"==t.ref_product.product_type&&e.relatedProductHardware.push(t),"Software"==t.ref_product.product_type&&e.relatedProductSoftware.push(t)})}else d.error(o.response.msg,"Error")})}]),e.openProductModal=function(t){var r=i.open({animation:!0,templateUrl:"./views/productCatalogue.modal.html",size:"md",controller:"detailControl",windowClass:"xd-modal",backdropClass:"modal-backdrop fade in",resolve:{product:function(){return t}}});r.result.then(function(t){e.selected=t})},e.next=function(){console.log("NEXT")},e.addToCart=function(t){if(0==e.upfront)d.error("Cannot add product when the values are 0","Error");else if(t.upfront=e.upfront,t.spPrice=e.spPrice,t.quantity=1,s.cartItems.length>=0){var r=c.filter(s.cartItems,{pb_id:t.pb_id});r.length>0?(r[0].quantity++,c.each(s.cartItems,function(e){e.pb_id==r[0].pb_id&&(e.quantity=r[0].quantity)}),d.success("Quantity Added","Success"),n.set("Cart",JSON.stringify(s.cartItems))):(d.success("Successfully Added","Success"),s.cartItems.push(t),n.set("Cart",JSON.stringify(s.cartItems)))}},e.openShareModal=function(){if(o.selected_id){var t=i.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return{bundle_name:e.details.bundle_name,product_images:e.details.product_images,bundle_description:e.details.bundle_description,products:e.details.products,upfront:e.upfront.toFixed(2),spPrice:e.spPrice.toFixed(2),opex:(36*e.upfront/1e3).toFixed(2),weekly:e.weekly.toFixed(2)}},param:function(){return"bundle"}}});t.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})}}}function t(e,t,r){e.selected=r,e.cancel=function(){t.dismiss("cancel")}}angular.module("tessaApp").controller("detailSolutionCtrl",e).controller("detailControl",t),e.$inject=["$scope","APIFactory","$location","$stateParams","$filter","_","$rootScope","$uibModal","localStorageService","toastr"],t.$inject=["$scope","$uibModalInstance","product"]}();
!function(){"use strict";function e(e,t,s,r,a,c,o,u,i,n,l){u.cartItems=[],e.attributevalues=[],e.SolutionPack=[],e.products=[],e.slides=[],e.relatedProductHardware=[],e.relatedProductSoftware=[],u.cartItems=c.isEmpty(i.get("Cart"))?[]:JSON.parse(i.get("Cart")),r.selected_id&&(async.waterfall([function(s){t.getProductDetail(r.selected_id,function(t,r){if(200==r.statusCode&&r.response.success){e.productDetails=r.response.result;var a=0;e.productDetails.product_images.length>0?c.each(e.productDetails.product_images,function(t){e.slides.push({image:t.image_path,index:a}),a++}):(e.slides.push({image:e.productDetails.img_default,index:a}),a++),s(null,r.response.result)}})},function(s,a){t.getProdCateg(r.selected_id,function(t,r){200==r.statusCode&&r.response.success&&(e.category=r.response.result,a(null,s,r.response.result))})},function(s,a,o){t.getProductBundle(function(t){200==t.statusCode&&t.response.success&&(o(null,s,a,t.response.result),c.each(t.response.result,function(t){c.each(t.products,function(s){s.product_id==r.selected_id&&e.SolutionPack.push(t)})}))})},function(s,a,c,o){t.getProductAttribute(r.selected_id,function(t,r){if(200==r.statusCode&&r.response.success){o(null,s,a,c,r.response.result),e.attributes=r.response.result,e.attributevalues=e.attributes.attribute_values;e.attributes.attribute_values}})}]),async.waterfall([function(s){t.getProduct(function(t,r){200==r.statusCode&&r.response.success&&(e.products=r.response.result,s(null,r.response.result))})},function(s,a){t.getRelatedProduct(r.selected_id,function(t,r){if(200==r.statusCode&&r.response.success){var a=r.response.result;c.each(a,function(t){c.each(s,function(e){e.p_id==t.main_id&&(t.img_default=e.img_default)}),"Hardware"==t.ref_product.product_type&&e.relatedProductHardware.push(t),"Software"==t.ref_product.product_type&&e.relatedProductSoftware.push(t)})}else n.error(r.response.msg,"Error")})}])),e.addToCart=function(t){if(t.upfront=e.productDetails.sell_price,t.quantity=1,u.cartItems.length>=0){var s=c.filter(u.cartItems,{p_id:t.p_id});s.length>0?(s[0].quantity++,c.each(u.cartItems,function(e){e.p_id==s[0].p_id&&(e.quantity=s[0].quantity)}),n.success("Quantity Added","Success"),i.set("Cart",JSON.stringify(u.cartItems))):(n.success("Successfully Added","Success"),u.cartItems.push(t),i.set("Cart",JSON.stringify(u.cartItems)))}},e.openDetail=function(e){l.go("main.productDetailsHardware",{selected_id:e},{reload:!0})},e.openShareModal=function(){if(r.selected_id){var t=o.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return{item_name:e.productDetails.item_name,img_default:e.productDetails.img_default,item_description:e.productDetails.item_description,sell_price:e.productDetails.sell_price.toFixed(2)}},param:function(){return"product"}}});t.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})}}}function t(e,t,s){e.selected=s,e.cancel=function(){t.dismiss("cancel")}}angular.module("tessaApp").controller("hardwareDetailsCtrl",e).controller("hardwareCtrl",t),e.$inject=["$scope","APIFactory","$location","$stateParams","$filter","_","$uibModal","$rootScope","localStorageService","toastr","$state"],t.$inject=["$scope","$uibModalInstance","product"]}();
!function(){"use strict";function e(e,t,i,a,l,s,r,n,d,u){e.detail=[],e.bundles=[],e.slides=[],e.relatedExperience=[],d.selected_id&&(async.waterfall([function(e){n.getArticles(function(t){200==t.statusCode&&t.response.result&&e(null,t.response.result)})},function(t,i){n.getArticleDetail(d.selected_id,function(a){if(200==a.statusCode&&a.response.success){e.detail=a.response.result;var l=0;i(null,t,a.response.result),_.isEmpty(e.detail.mediafiles)||(_.each(e.detail.mediafiles,function(e){if(e){if(console.log("row:",e),"video/mp4"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-flv"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-msvideo"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-ms-wmv"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/quicktime"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"}return e.index=l++}),_.each(e.detail.mediafiles,function(t){"image/png"==t.media_mimetype||"image/jpeg"==t.media_mimetype?(e.slides.push({media_name:t.media_name,media_mimetype:t.media_mimetype,image:t.media_path,index:l}),l++):"video/mp4"==t.media_mimetype&&(e.slides.push({media_name:t.media_name,media_mimetype:t.media_mimetype,image:t.media_path,url:t.url,index:l}),l++)}))}})},function(e,t,i){n.getArticleTags(t.article_id,function(a){if(200==a.statusCode&&a.response.success){var l=[];_.map(a.response.result,function(e){"Article"!=e.tags&&"Portfolio"!=e.tags&&l.push(e)}),i(null,e,t,l)}})},function(t,i,a,l){var s=[],r=_.flattenDeep(_.map(t,function(e){return e.tags}));if(_.map(a,function(e){_.each(r,function(t){e.tags==t.tags&&s.push(t)})}),_.each(t,function(t){_.each(s,function(i){t.article_id==i.article_id&&e.relatedExperience.push(t)})}),!_.isEmpty(e.relatedExperience)){var d=_.uniq(e.relatedExperience);e.relatedExperiences=_.filter(d,function(e){return i.article_id!=e.article_id}),_.each(e.relatedExperiences,function(e){if(e.mediafiles.length>0&&(e.image=e.mediafiles[0].media_path),!_.isNull(e.thumbnail_media)){var t=e.article_thumbnail;if(t){if("video/mp4"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-flv"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-msvideo"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-ms-wmv"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/quicktime"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})}n.getProductBundle(function(t){var a=t.response.result;i.article_features.length>0?_.each(i.article_features,function(t){var i=_.find(a,{pb_id:t.bundle_id});e.bundles.push(i)}):e.norelated="No related solutions"})}]),e.openShareModal=function(){var t=u.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",backdrop:!1,windowClass:"sharemodal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return e.detail},param:function(){return"article"}}});t.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})},e.select=function(e){r.hash("article_page"),t.go("main.articlePage",{selected_id:e},{reload:!0})})}angular.module("tessaApp").controller("ModalInstanceCtrl",e),e.$inject=["$scope","$state","sharerFactory","toastr","$window","$anchorScroll","$location","APIFactory","$stateParams","$uibModal"]}();
!function(){"use strict";function e(e,t,s,i,a,c,d,r,n){e.data={},e.data.from="support@engagis-tessa.com.au",e.date=new Date,e.param=i,e.selected={},e.newtab=function(e){n.open(e)},"article"==i?(e.selected.title=s.title,s.mediafiles&&s.mediafiles.length>0?(e.selected.media_mimetype=s.mediafiles[0].media_mimetype,e.selected.mediafiles=s.mediafiles[0].media_path):e.selected.mediafiles="",e.selected.description=s.description):"bundle"==i?(e.selected.bundle_name=s.bundle_name,s.product_images&&s.product_images.length>0?e.selected.product_images=s.product_images[0].media_path:e.selected.product_images="",e.selected.bundle_description=s.bundle_description,e.selected.products=s.products,e.selected.others={upfront:s.upfront,spPrice:s.spPrice,opex:s.opex,weekly:s.weekly}):"product"==i?(e.selected.item_name=s.item_name,e.selected.img_default=s.img_default,e.selected.item_description=s.item_description,e.selected.sell_price=s.sell_price):"quote"==i&&(e.selected=s),e.spprice=_.sum(_.map(e.selected.quote_item_list,function(e){return e.spprices*e.quantity})),e.subtotal=_.sum(_.map(e.selected.quote_item_list,function(e){var t=e.price*e.quantity;return t})),e.subtotalOpex=_.sum(_.map(e.selected.quote_item_list,function(e){_.isUndefined(e.spprices)&&(e.spprices=0);var t=(31.111*e.price/1e3+e.spprices)*e.quantity;return t})),e.send=function(){"article"==i?(e.data.subject="ENGAGIS-TESSA Articles",e.data.message=$("#printarticle").html()):"bundle"==i?(e.data.subject="ENGAGIS-TESSA Bundle",e.data.message=$("#printbundle").html()):"product"==i?(e.data.subject="ENGAGIS-TESSA Product",e.data.message=$("#printproduct").html()):"quote"==i&&(e.data.subject="ENGAGIS-TESSA Quotes",e.data.message=$("#printquote").html(),e.data.pdf=$("#printpdfquote").html(),e.data._id=e.selected._id),a.shareExperience(e.data,function(s,i){return 200==i.statusCode&&i.response.success?(c.success(i.response.msg,"Success"),e.data.email="",t.dismiss("cancel"),d.go(d.current,null,{reload:!0}),void 0):400===i.statusCode&&!i.response.success&&_.isArray(i.response.result)?void _.each(i.response.result,function(e){c.warning(e.msg,"Warning")}):void c.error(i.response.msg,"Error")}),t.dismiss("send")},e.cancel=function(){t.dismiss("cancel")}}angular.module("tessaApp").controller("ShareModalInstanceCtrl",e),e.$inject=["$scope","$uibModalInstance","article","param","sharerFactory","toastr","$state","localStorageService","$window"]}();
!function(){"use strict";function t(t,e,o,i,n,a,s,c,r){function l(t){_.each(n.cartItems,function(e){e.pb_id==t.pb_id&&e.p_id==t.p_id&&(e.quantity=t.quantity)}),a.set("Cart",JSON.stringify(n.cartItems))}if(n.cartItems=[],t.details=[],t.quantity=1,t.customers=[],t.companies=[],t.company={},t.countries=[],t.cart="items",t.radioModel,t.detail={},t.detail.quote_date=new Date,n.cartItems=_.isEmpty(a.get("Cart"))?[]:JSON.parse(a.get("Cart")),!_.isEmpty(n.cartItems)){t.details=n.cartItems;var p=_.map(t.details,function(t){return t.spPrice});t.spprice=_.sum(p),_.map(t.details,function(t){t.p_id&&(t.spPrice=0)}),a.set("Products",JSON.stringify(t.details)),async.waterfall([function(e){s.getCountries(function(o,i){200==i.statusCode&&i.response.success&&(t.countries=i.response.result,e(null,i.response.result))})},function(e,o){s.getAllPerson(function(i,n){t.customers=_.filter(n.response.result,function(t){return"Customer"==t.person_type}),o(null,e,n.response.result)})},function(e,o,i){s.getCompany(function(e,o){t.companies=o.response.result})}])}t.getCompanyDetail=function(e){console.log("value:",e.originalObject),e.originalObject.company_id?s.companyDetail(e.description.company_id,function(e,o){200==o.statusCode&&o.response.success&&(t.company=o.response.result,t.companycopy=angular.copy(o.response.result))}):t.company.name=e.originalObject},t.getCustomer=function(e){console.log("value:",e),e.originalObject.person_id?(t.company.customer_id=e.originalObject.person_id,t.company.customer=e.originalObject):t.company.customer=e.originalObject},t.inputProductChanged=function(e){t.searchinput=e},t.useBillingAddress=function(e){e?t.company&&(t.company.ship_name=t.company.bill_name,t.company.ship_address=t.company.bill_address,t.company.ship_city=t.company.bill_city,t.company.ship_state=t.company.bill_state,t.company.ship_zipcode=t.company.bill_zipcode,t.company.ship_country=t.company.bill_country):(t.company.ship_address=t.companycopy.ship_address,t.company.ship_city=t.companycopy.ship_city,t.company.ship_state=t.companycopy.ship_state,t.company.ship_zipcode=t.companycopy.ship_zipcode,t.company.ship_country=t.companycopy.ship_country)},t.proceed=function(){t.cart="payment"},t.back=function(){t.cart="items"},t.next=function(){t.cart="customer"},t.monthly=function(){return t.spprice=_.sum(_.map(t.details,function(t){return t.spPrice*t.quantity})),t.spprice},t.total=function(){return t.totals=0,_.forEach(t.details,function(e){t.totals+=e.upfront*e.quantity}),t.totals},t.detail.sub_total=t.total(),t.minusbutton=function(t){t.quantity<=1?(t.quantity=1,l(t)):(t.quantity--,l(t))},t.addbutton=function(t){t.quantity++,l(t)},t.reset=function(){_.each(n.cartItems,function(t){return n.cartItems.splice(n.cartItems,1)}),a.set("Cart",JSON.stringify(n.cartItems))},t.remove=function(t){var e=_.findIndex(n.cartItems,function(e){return e.pb_id==t.pb_id});n.cartItems.splice(e,1),a.set("Cart",JSON.stringify(n.cartItems))},t.cancel=function(){e.dismiss("cancel")},t.confirmation=function(){t.modal={title:"Archive Product?",message:"Are you sure to archive this selected products?"},c.openConfirm({templateUrl:"views/dialog.html",scope:t,className:"ngdialog-theme-default"}).then(function(){var c=JSON.parse(a.get("appuser")),r=new Date;t.detail.quoteproduct_list=[],_.each(n.cartItems,function(e){e.p_id?t.detail.quoteproduct_list.push({item_name:e.item_name,quantity:e.quantity,price:e.upfront,product_id:e.p_id,bundle_id:null,discount:0,total:0}):e.pb_id&&t.detail.quoteproduct_list.push({item_name:e.bundle_name,quantity:e.quantity,price:e.upfront,product_id:null,bundle_id:e.pb_id,discount:0,total:0})});var l=Math.floor(1e3*Math.random()+1);t.detail.quote_number="1000"+l,t.detail.quote_status="P",t.detail.staff_id=c.uc_id,t.detail.customer=t.company.customer,t.detail.other_fee=0,t.detail.tax=0,t.detail.tax=0,t.detail.total_fee=110,t.detail.valid_until=new Date,t.detail.valid_until=new Date(r.setDate(r.getDate()+30)),t.detail.bill_to_address=t.company.bill_address,t.detail.bill_to_city=t.company.bill_city,t.detail.bill_to_country=t.company.bill_country,t.detail.bill_to_state=t.company.bill_state,t.detail.bill_to_zipcode=t.company.bill_zipcode,t.detail.comments=t.company.comments,t.detail.customer_id=t.company.customer_id,t.detail.ship_to_address=t.company.ship_address,t.detail.ship_to_city=t.company.ship_city,t.detail.ship_to_country=t.company.ship_country,t.detail.ship_to_state=t.company.ship_state,t.detail.ship_to_zipcode=t.company.ship_zipcode,t.detail.ship_to=t.company.customer_id,t.detail.bill_to_name=t.company.bill_name,t.detail.ship_to_name=t.company.ship_name,console.log("$scope.detail:",t.detail),console.log("$scope.company:",t.company),s.saveQuote(t.detail,function(s,c){console.log("data:",c),console.log("err:",s),200==c.statusCode&&c.response.success&&(_.isEmpty(n.cartItems)||a.remove("Cart"),e.close(),i(function(){o.go("main.quoteProfile",{quote_id:c.response.result},{reload:!0}),a.set("Company",JSON.stringify(t.company)),a.remove("Customer"),a.remove("Payment"),a.remove("Cart")},300))})},function(t){console.log("Modal promise close: ")})}}angular.module("tessaApp").controller("CartCtrl",t),t.$inject=["$scope","$uibModalInstance","$state","$timeout","$rootScope","localStorageService","APIFactory","ngDialog","$frontierAnalytics"]}();
!function(){"use strict";function e(e,t,o,i,s,n,a,r,u,c,d){s.user=_.isEmpty(n.get("User"))?[]:JSON.parse(n.get("User")),e.products=_.isEmpty(n.get("Products"))?[]:JSON.parse(n.get("Products")),e.company=_.isEmpty(n.get("Company"))?[]:JSON.parse(n.get("Company")),e.companyname=s.user.company_name,e.details={},e.radioModel="Capex",u.quote_id&&r.getQuoteDetail(u.quote_id,function(t,o){200==o.statusCode&&o.response.success&&(e.details=o.response.result,e.details.type=e.radioModel,_.isUndefined(e.details.customer)&&(e.details.company_name=e.company.name),e.details.customer=e.details.bill_qoute_info,e.details.date_created=moment(e.details.date_created).format("YYYY-MM-DD"),e.details.valid_until=moment(e.details.valid_until).format("YYYY-MM-DD"),r.getProductBundle(function(t){e.result=[],200==t.statusCode&t.response.success&&(_.each(e.details.quote_item_list,function(e){_.find(t.response.result,function(t){e.bundle_id==t.pb_id&&(_.each(t.products,function(e){e.category_id=e.product_detail.product_category[0].category_id,e.sell_price=e.product_detail.sell_price}),e.products=t.products)})}),e.items=_.map(e.details.quote_item_list,function(t){return t.products&&_.each(t.products,function(t){e.result.push(t)}),_.each(e.products,function(e){t.bundle_id==e.pb_id&&(t.spprices=e.spPrice)}),t.product_id?t:t}),e.totalupfront=_.sum(_.map(e.items,function(e){return e.price*e.quantity})),e.totalupfrontopex=_.sum(_.map(e.items,function(e){return e.price})),e.opexquantity=_.sum(_.map(e.items,function(e){return e.quantity})),e.subtotalOpex=_.sum(_.map(e.items,function(e){_.isUndefined(e.spprices)&&(e.spprices=0);var t=(31.111*e.price/1e3+e.spprices)*e.quantity;return t})),e.spprice=_.sum(_.map(e.items,function(e){return e.spprices*e.quantity})))}))}),e.$watch("radioModel",function(t){console.log("newValue:",t),d.trackEvent("Quote Generation","generate quote",t,"-",e.details.quote_number,e.details.quote_id)}),e.newvalue=function(){e.details.type=e.radioModel},e.printQoute=function(e){i.print()},e.openShareModal=function(){a.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return e.details},param:function(){return"quote"}}})}}angular.module("tessaApp").controller("QuoteCtrl",e),e.$inject=["$scope","sharerFactory","toastr","$window","$rootScope","localStorageService","$uibModal","APIFactory","$stateParams","$filter","$frontierAnalytics"]}();
!function(){"use strict";function e(e,t,n,a,o,c,r,s,i,l,u,d,p){t.seemore=!0,t.date=new Date,t.msg="hello",t.shows=!1,t.value="",r.cartItems=o.isEmpty(l.get("Cart"))?[]:JSON.parse(l.get("Cart")),r.user=o.isEmpty(l.get("User"))?[]:JSON.parse(l.get("User")),t.seemore=!t.custom,t.searchinput=u.value,angular.element(document).ready(function(){$("#trigger-sidebar").click(function(){function e(){var e=$(window).width();e<700?$("#myBar, .acc-menu li a").css({"min-width":"0"}):e>700&&$("#myBar, .acc-menu li a").css({"min-width":"56px"})}$(".collapsible").toggle(),$(".collapsible").is(":visible")?$("#myBar, .acc-menu li a").css({"min-width":"245px"}):(e(),$(window).resize(e))}),$("#trigger-close-search, #srch-pop, .exit").click(function(){$("#toolbar-search").hide()}),$("#trigger-toolbar-search,#srch-pop").click(function(){$("#toolbar-search").show()}),$(document).on("click",".btn-checkbox",function(e){e.stopPropagation(),$(this).toggleClass("btn-checkbox-active")})});var h=function(){async.waterfall([function(e){n.getArticles(function(t){o.each(t.response.result,function(e){e.type="Experience"}),o.each(t.response.result,function(e){e.name=e.title,e.id=e.article_id}),e(null,t.response.result)})},function(e,t){n.getProductBundle(function(n){o.each(n.response.result,function(e){e.type="Solutions"}),o.each(n.response.result,function(e){e.name=e.bundle_name,e.id=e.pb_id}),t(null,n.response.result,e)})},function(e,t,a){var c=[];n.getProduct(function(n,r){c=o.filter(r.response.result,function(e){return"Hardware"==e.product_type}),o.each(c,function(e){e.type="Hardware"}),o.each(c,function(e){e.name=e.item_name,e.id=e.p_id}),a(null,c,e,t)})},function(e,n,a,c){var r=[];o.each(e,function(e){1==e.is_published&&0==e.is_archived&&r.push(e)}),o.each(n,function(e){1==e.is_published&&0==e.is_archived&&r.push(e)}),o.each(a,function(e){1==e.is_active&&r.push(e)}),t.allproducts=r}])};h(),t.signout=function(){d.logout().then(function(e){200==e.statusCode&&e.response.success&&(p.success(e.response.msg,"Success"),c.reload())})},t.clear=function(e){e?$("#searchBar").val($("#searchBar").val().slice(0,-1)):$("#searchBar").val("")},t.resetCart=function(){for(var e=t.customers.length;e--;){var n=t.customers[e];"expired"==n.status&&t.customers.splice(e,1)}},t.refreshDelay=function(e){t.search=e,t.allSearch=[],angular.isUndefined(e)||null==e||""==e?t.allSearch=[]:n.getAll(e).then(function(n){if(200==n.statusCode&&n.response.success){o.each(n.response.result.values,function(e){return"Services"==e.type?null:void t.allSearch.push(e)}),o.each(t.allSearch,function(e){"articles"==e.self&&(e.group="Experience"),"bundles"==e.self&&(e.group="Solutions"),"products"==e.self&&(e.group="Hardware")});var a=t.allSearch.slice();return e&&a.indexOf(e)===-1&&a.unshift(e),a}})},t.cartModal=function(){var e=i.open({animation:!0,templateUrl:"./views/cart.modal.html",size:"md",controller:"CartCtrl",windowClass:"xd-modal"});e.result.then(function(e){t.selected=e},function(){console.info("Modal dismissed at: "+new Date),l.remove("Payment")})},t.compareModal=function(){var e=i.open({animation:!0,templateUrl:"./views/compare.modal.html",size:"lg",windowClass:"xd-modal"});e.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})},t.inputProductChanged=function(e){t.searchinput=e},t.dataSelected=function(e){console.log("selected:",e),e&&(c.go("main.search",{value:e.originalObject},{reload:!1}),e.originalObject&&c.go("main.search",{value:e.originalObject},{reload:!1}),e.title&&c.go("main.search",{value:e.title},{reload:!1}))},t.clearInput=function(e){e?t.$broadcast("angucomplete-alt:clearInput",e):t.$broadcast("angucomplete-alt:clearInput")}}function t(e,t,n,a){e.product=function(e){"Experience"==e?(a.remove("articlefilter"),n.go("main.experience")):"Product"==e&&(a.remove("label"),a.remove("hardtype"),n.go("main.productCatalogue"))}}angular.module("tessaApp").controller("headerCtrl",e).controller("sidebarCtrl",t),e.$inject=["$http","$scope","APIFactory","$location","_","$state","$rootScope","$filter","$uibModal","localStorageService","$stateParams","AuthFactory","toastr"],t.$inject=["$scope","$location","$state","localStorageService"]}();
!function(){"use strict";function t(t,e,i,a,s,l,r,c,n,o,u){e.seemore=!0,e.date=new Date,r.user=s.isEmpty(o.get("User"))?[]:JSON.parse(o.get("User")),e.expFilter=s.isEmpty(o.get("articlefilter"))?"all":JSON.parse(o.get("articlefilter")),e.selectedItem=[],e.articlesList=[],e.lists=[],e.tags=[],e.tagscopy=[],e.Portfolio=[],e.Article=[],e.selectedTag=[],e.tagselected=[],e.infiniteScrollData={},e.infiniteScrollData.numToAdd=1,e.infiniteScrollData.currentItems=10,e.dynamicPopover={templateUrl:"myPopoverTemplate.html"},e.resetInfScroll=function(){e.infiniteScrollData.currentItems=e.infiniteScrollData.numToAdd},e.addMoreItems=function(){e.infiniteScrollData.currentItems!==e.lists.length&&(e.infiniteScrollData.currentItems+=e.infiniteScrollData.numToAdd,e.articlesList=e.lists,e.articlesList.length=e.infiniteScrollData.currentItems)},e.generateArticles=function(){e.articlesList=[],e.tags=[],e.tagscopy=[],e.lists=[],e.selectedTag=[],i.getArticles(function(t){if(200==t.statusCode&&t.response.success){s.each(t.response.result,function(t){t.name=t.title,t.type="Experience"}),s.map(t.response.result,function(t){t.tags.length>=1&&1==t.is_active&&e.articlesList.push(t)}),e.articlesList=s.map(s.orderBy(e.articlesList,"date_created")).reverse();for(var i=0;i<e.articlesList.length;i++)for(var a=0;a<e.articlesList[a].tags.length;a++)e.articlesList[i].tags[a]&&e.tags.push(e.articlesList[i].tags[a]);s.each(e.articlesList,function(t){if(t.mediafiles.length>0&&(t.image=t.mediafiles[0].media_path),!s.isNull(t.thumbnail_media)){var e=t.article_thumbnail;if(e){if("video/mp4"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-flv"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-msvideo"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-ms-wmv"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/quicktime"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"}}}),e.tagscopy=angular.copy(e.tags),e.tagscopy=s.uniqBy(e.tagscopy,function(t){return t.tags}),e.tagscopy=s.filter(e.tagscopy,function(t){if("Article"!==t.tags&&"Portfolio"!==t.tags)return t}),e.lists=angular.copy(e.articlesList);var l=c("filter")(e.tags,{tags:"Portfolio"}),r=c("filter")(e.tags,{tags:"Article"});l&&s.each(l,function(t){var i=s.find(e.lists,{article_id:t.article_id});e.Portfolio.push(i)}),r&&s.each(r,function(t){var i=s.find(e.lists,{article_id:t.article_id});e.Article.push(i)})}})},e.product=function(){o.remove("label"),o.remove("hardtype"),l.go("main.productCatalogue")},e.toggleSelectedTag=function(t){e.tagselected.indexOf(t)==-1?e.tagselected.push(t):e.tagselected=s.filter(e.tagselected,function(e){return e.tags_id!=t.tags_id})},e.isTagSelected=function(t){return e.tagselected.indexOf(t)!==-1},e.isOnSelectedTag=function(){return function(t){if(!(e.tagselected.length>0))return!0;var i=!1,a=s.map(e.tagselected,"tags_id");s.forEach(t.tags,function(t){a.indexOf(t.tags_id)!==-1&&(i=!0)});return i}},e.filterArticle=function(t){e.expFilter=t,o.set("articlefilter",JSON.stringify(e.expFilter))},e.$watch("expFilter",function(t){u(function(){if("all"==t)e.articlesList=angular.copy(e.lists);else{e.articlesList=[];var i=c("filter")(e.tags,{tags:t});s.each(i,function(t){var i=s.find(e.lists,{article_id:t.article_id});e.articlesList.push(i)})}},600)}),e.$on("$stateChangeSuccess",function(t,i,a,s,l){"main.experience"==i.name&&(e.tagselected=[],e.generateArticles())})}angular.module("tessaApp").controller("expCtrl",t),t.$inject=["$http","$scope","APIFactory","$location","_","$state","$rootScope","$filter","$uibModal","localStorageService","$timeout"]}();
!function(e){"use strict";function s(e,s,t,o,i,a,r,l,n,c,d,m,p,f){function u(e,s){if(0==e)return"0 Byte";var t=1024,o=s+1||3,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(o))+" "+i[a]}function h(s){200==s.statusCode&&s.response.success&&(e.items=s.response.result,e.assets=angular.copy(s.response.result),e.isLoading=!1,e.showBread=!0,e.disableToolNewFolder=!1,"main.presentation"==a.current.name?(e.activeAllFiles=!0,e.showToolNewFolder=!0,e.showToolNewUpload=!0,e.assets.folders=_.filter(e.assets.folders,function(e){return 0==e.isDeleted}),e.assets.assets=_.filter(e.assets.assets,function(e){return 0==e.isDeleted}),e.assets.assets=_.filter(e.assets.assets,function(e){return null==e.folder_id}),e.assets.folderscopy=angular.copy(e.assets.folders),e.assets.assetscopy=angular.copy(e.assets.assets)):"main.presentation_starred"==a.current.name?(e.activeStarredFiles=!0,e.showToolNewFolder=!1,e.showToolNewUpload=!1,e.showBarDelete=!1,e.assets.folders=_.filter(e.assets.folders,function(e){return 0==e.isDeleted&&1==e.isStarred}),e.assets.assets=_.filter(e.assets.assets,function(e){return 0==e.isDeleted&&1==e.isStarred}),e.starred.folderscopy=angular.copy(e.assets.folders),e.starred.assetscopy=angular.copy(e.assets.assets)):"main.presentation_trash"==a.current.name?(e.activeTrashFiles=!0,e.showToolNewFolder=!1,e.showToolNewUpload=!1,e.showBarDelete=!1,e.showBarRestore=!0,e.showBarShare=!1,e.showToolPreview=!1,e.showToolOpen=!1,e.showBarMore=!1,e.assets.folders=_.filter(e.assets.folders,function(e){return 1==e.isDeleted}),e.assets.assets=_.filter(e.assets.assets,function(e){return 1==e.isDeleted}),e.trash.folderscopy=angular.copy(e.assets.folders),e.trash.assetscopy=angular.copy(e.assets.assets)):"main.openfolder"==a.current.name?(e.assets.folders=_.filter(e.assets.folders,function(e){return 0==e.isDeleted}),e.assets.assets=_.filter(e.assets.assets,function(e){return 0==e.isDeleted})):e.showToolBar=!1,_.each(e.assets.folders,function(e){var s=_.sumBy(e.files,function(e){return e.asset_filesize});e.folder_filesize=u(s),e.isActive=!1,e.isFolder=!0}),_.each(e.assets.assets,function(e){e.asset_filesize=u(e.asset_filesize),e.isActive=!1,e.isFolder=!1}),e.assets.folders&&e.assets.assets&&(e.assets.folders.length>0&&e.assets.assets.length>0?e.showFiles=!0:e.assets.folders.length>0&&e.assets.assets.length<1?e.showFiles=!0:e.assets.folders.length<1&&e.assets.assets.length>0?e.showFiles=!0:e.assets.folders.length<1&&e.assets.assets.length<1&&(e.showFiles=!1)),_.each(e.assets.folders,function(e){e.files.length>0&&_.each(e.files,function(e){if("video/mp4"==e.asset_mimetype||"video/x-flv"==e.asset_mimetype||"video/x-msvideo"==e.asset_mimetype||"video/x-ms-wmv"==e.asset_mimetype||"video/quicktime"==e.asset_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"})}),e.foldercopy=angular.copy(e.assets.folders),e.assetcopy=angular.copy(e.assets.assets),e.toppresentation=_.find(e.foldercopy,{folder_name:"Top 10 Presentations"}),e.retail=_.find(e.foldercopy,{folder_name:"Retail"}),e.engagis=_.find(e.foldercopy,{folder_name:"About Engagis"}),_.isUndefined(e.engagis)||(_.each(e.engagis.files,function(e){133==e.asset_id||136==e.asset_id?e.asset_description="Engagis Deliver Digital In-Store/Venue For Improved Service & Profit Best Practice Delivery With ROI Focused ‘Test n Learn’ Approach Since 2001 We’ve Been The Agile Technology Arm For Leading Retailers":e.asset_description="A recognised leader for Digital Transformation in the Physical Space"}),e.engagis&&(e.aboutengagis=_.filter(e.engagis.files,{isDeleted:0}))))}console.log("presentationCtrl"),e.pdf={},e.pdf.file=[],e.items={},e.assets={},e.trash={},e.starred={},e.DeSelectAll=!1,e.selectedText="Select All",e.selectedFile={},e.isList="null"!=s.get("isList")&&0!=s.get("isList"),e.isLoading=!0,e.showBread=!1,e.showFiles=!1,e.disableToolNewFolder=!0,e.showToolNewFolder=!0,e.showToolNewUpload=!0,e.showToolMakeCopy=!1,e.showToolPreview=!1,e.showToolOpen=!1,e.showToolBar=!0,e.showBarDelete=!1,e.showBarRestore=!1,e.showBarShare=!1,e.showBarMore=!1,e.activeAllFiles=!1,e.activeSharedFiles=!1,e.activeStarredFiles=!1,e.activeTrashFiles=!1,e.mirrorFile=!1,e.mirrorDevice={},e.showresult=!1,e.searchresult=[],e.activeDevices=[],p.on("pair:init",function(){console.log("pair:init tessa")}),p.on("pair:sendCode",function(s){_.find(e.activeDevices,{deviceUUID:s.deviceUUID})||e.activeDevices.push(s)}),e.changeDisplay=function(){e.isList=!e.isList,s.set("isList",e.isList),e.isPreso=!e.isPreso,s.set("isPreso",e.isPreso)},e.refreshAssets=function(){e.assets={},e.items={},"main.presentation"==a.current.name?e.activePage="Assets":"main.presentation_starred"==a.current.name?e.activePage="Favorites":"main.presentation_trash"==a.current.name&&(e.activePage="Trash"),i._id&&_.isUndefined(i.sub_id)?(e.isLoading=!0,o.getFolderAssets(i._id).then(h)):i._id&&i.sub_id?(e.showToolNewFolder=!1,e.isLoading=!0,o.getFolderAssets(i.sub_id).then(h)):o.getAllAssets().then(h)},e.fi=[1,2,3],e.swipe=function(e){console.log("event:",e)},e.refreshAssets(),e.showAllFiles=function(){console.log("$state.current.name:",a.current.name),"main.presentation"==a.current.name?(e.activePage="Assets",e.refreshAssets()):a.go("main.presentation")},e.showAllTrash=function(){console.log("$state.current.name:",a.current.name),"main.presentation_trash"==a.current.name?(e.activePage="Trash",e.refreshAssets()):a.go("main.presentation_trash")},e.showAllStarred=function(){"main.presentation_starred"==a.current.name?(e.activePage="Favorites",e.refreshAssets()):a.go("main.presentation_starred")},e.castModal=function(){var s=t.open({animation:!0,templateUrl:"./views/folder/cast.html",size:"lg",keyboard:!1,windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return e.activeDevices},asset_file:function(){return e.selectedFile}}});s.result.then(function(s){e.selectedFile&&("mirror"==s.msg&&(e.mirrorFile=!0,e.mirrorDevice=s.device),e.selectedFile.isFolder?e.openFolder(e.selectedFile):e.openFile(e.selectedFile))})},e.newFolder=function(){var e=t.open({animation:!0,templateUrl:"./views/folder/new-item.html",size:"sm",windowClass:"xd-modal",controller:"presentationFolderModalCtrl"});e.result.then(function(e){e&&a.reload()})},e.newUploader=function(){var s=t.open({animation:!0,backdrop:"static",templateUrl:"./views/folder/uploader.html",size:"lg",controller:"assetsUploadModalCtrl"});s.result.then(function(s){s&&e.refreshAssets()})},e.copySelected=function(){var e=t.open({animation:!0,keyboard:!1,windowClass:"xd-modal",templateUrl:"./views/folder/copy.html",controller:"modalpresentation"});e.result.then(function(e){},function(){console.info("Modal dismissed at: "+new Date)})},e.shareToOthers=function(){var s=t.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/share.html",controller:"assetsShareModalCtrl",resolve:{asset_file:function(){return e.selectedFile}}});s.result.then(function(e){},function(){console.info("Modal dismissed at: "+new Date)})},e.renameSelected=function(){var s=t.open({animation:!0,keyboard:!1,windowClass:"xd-modal",templateUrl:"./views/folder/rename.html",controller:"assetsRenameModalCtrl",resolve:{asset_file:function(){return e.selectedFile}}});s.result.then(function(e){e&&a.reload()})},e.deleteSelected=function(){function s(e){200==e.statusCode&&e.response.success&&(r.success(e.response.msg,"Success"),l(function(){a.reload()},200))}console.log("deleteSelected"),e.modal={title:"Remove?",message:"Are you sure to remove this?"},c.openConfirm({templateUrl:"./views/folder/customDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){_.isEmpty(e.selectedFile)||(e.selectedFile.isFolder?e.selectedFile.isDeleted?o.deleteFolder(e.selectedFile._id).then(s):o.trashFolder(e.selectedFile._id).then(s):e.selectedFile.isDeleted?o.deleteAssetFile(e.selectedFile._id).then(s):o.trashAssetFile(e.selectedFile._id).then(s))})},e.moveSelected=function(){var s=t.open({animation:!0,keyboard:!1,windowClass:"xd-modal",templateUrl:"./views/folder/move.html",controller:"assetsMoveModalCtrl",resolve:{asset_file:function(){return e.selectedFile}}});s.result.then(function(e){e&&a.reload()})},e.previewSelected=function(){e.selectedFile&&(e.selectedFile.isFolder?(e.openFolder(e.selectedFile),m.trackEvent("Presentation Assets","View",e.selectedFile.folder_name,e.selectedFile.folder_id)):(e.openFile(e.selectedFile),m.trackEvent("Presentation Assets","View",e.selectedFile.asset_name,e.selectedFile.asset_id)))},e.imagepreview=function(s,t){var o=d("filter")(e.aboutengagis,t.asset_description);"preview"==s?_.each(o,function(s){"application/pdf"==s.asset_mimetype?e.openDocsModal(s):"text/plain"==s.asset_mimetype?e.openDocsModal(s):"application/msword"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==s.asset_mimetype?e.openDocsModal(s):"text/csv"==s.asset_mimetype||"application/vnd.ms-excel"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==s.asset_mimetype?e.openDocsModal(s):"application/vnd.openxmlformats-officedocument.presentationml.presentation"!=s.asset_mimetype&&"application/vnd.ms-powerpoint"!=s.asset_mimetype||e.openDocsModal(s)}):_.each(o,function(s){"application/pdf"==s.asset_mimetype?e.imageCast(s):"text/plain"==s.asset_mimetype?e.imageCast(s):"application/msword"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==s.asset_mimetype?e.imageCast(s):"text/csv"==s.asset_mimetype||"application/vnd.ms-excel"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==s.asset_mimetype?e.imageCast(s):"application/vnd.openxmlformats-officedocument.presentationml.presentation"!=s.asset_mimetype&&"application/vnd.ms-powerpoint"!=s.asset_mimetype||e.imageCast(s)})},e.imageCast=function(s){var o=t.open({animation:!0,templateUrl:"./views/folder/cast.html",size:"lg",keyboard:!1,windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return e.activeDevices},asset_file:function(){return s}}});o.result.then(function(t){s&&("mirror"==t.msg&&(e.mirrorFile=!0,e.mirrorDevice=t.device),s.isFolder?e.openFolder(s):e.openFile(s))})},e.starredSelected=function(){function s(e){200==e.statusCode&&e.response.success&&(r.success(e.response.msg,"Success"),l(function(){a.reload()},200))}e.selectedFile&&(e.selectedFile.isFolder?o.starredFolder(e.selectedFile._id).then(s):o.starredAssetFile(e.selectedFile._id).then(s))},e.restoreSelected=function(){function s(e){200==e.statusCode&&e.response.success&&(r.success(e.response.msg,"Success"),l(function(){a.reload()},200))}_.isEmpty(e.selectedFile)?r.warning("Please select first","Warning"):e.selectedFile.isFolder?o.restoreFolder(e.selectedFile._id).then(s):o.restoreAssetFile(e.selectedFile._id).then(s)},e.openLightboxModal=function(s){console.log("files:",s),e.image_file={url:s.asset_url,caption:s.asset_name,thumbUrl:s.asset_url};var o=t.open({animation:!0,keyboard:!1,backdrop:"static",templateUrl:"./views/folder/lightbox-modal.html",windowClass:"modal-img-fullscreen xd-modal",scope:e,size:"lg",resolve:{files:function(){return s},type:function(){return"video"}}});e.cancel=function(){o.dismiss("cancel")}},e.openVideoModal=function(s){console.log("files:",s),console.log("$scope.mirrorDevice:",e.mirrorDevice),t.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"./views/folder/media.html",controller:"assetsMediaModalCtrl",windowClass:"xd-modal",size:"lg",resolve:{files:function(){return s},type:function(){return"video"},mirrorFile:function(){return e.mirrorFile},mirrorDevice:function(){return e.mirrorDevice}}}).result.then(function(){e.mirrorFile=!1})},e.openAudioModal=function(s){t.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"./views/folder/media.html",controller:"assetsMediaModalCtrl",windowClass:"xd-modal",size:"md",resolve:{files:function(){return s},type:function(){return"audio"},mirrorFile:function(){return e.mirrorFile},mirrorDevice:function(){return e.mirrorDevice}}}).result.then(function(){e.mirrorFile=!1,e.mirrorDevice={}})},e.openDocsModal=function(s){t.open({animation:!0,backdrop:"static",templateUrl:"./views/folder/preview.html",controller:"assetsDocsModalCtrl",size:"lg",windowClass:"modal-fullscreen xd-modal",resolve:{files:function(){return s},mirrorFile:function(){return e.mirrorFile},mirrorDevice:function(){return e.mirrorDevice}}}).result.then(function(){e.mirrorFile=!1,e.mirrorDevice={}})},e.openFolder=function(s){s.isFolder&&("main.presentation_trash"!==a.current.name?i._id?a.go("main.opensubfolder",{_id:i._id,sub_id:s._id}):a.go("main.openfolder",{_id:s._id}):(e.modal={title:"This folder is in your trash",message:"To view this folder, youll need to restore it from your trash. Restore folder?"},c.openConfirm({templateUrl:"./views/folder/customDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){o.restoreFolder(s._id).then(function(e){200==e.statusCode&&e.response.success&&(r.success(e.response.msg,"Success"),l(function(){a.reload()},200))})})))},e.openFile=function(s){if("image/jpeg"==s.asset_mimetype||"image/jpg"==s.asset_mimetype||"image/gif"==s.asset_mimetype||"image/x-ms-bmp"==s.asset_mimetype||"image/png"==s.asset_mimetype)e.openLightboxModal(s);else if("audio/mp3"==s.asset_mimetype||"audio/mp4"==s.asset_mimetype)e.openAudioModal(s);else if("video/mp4"==s.asset_mimetype||"video/x-flv"==s.asset_mimetype||"video/x-msvideo"==s.asset_mimetype||"video/x-ms-wmv"==s.asset_mimetype||"video/quicktime"==s.asset_mimetype||"video/3gpp"==s.asset_mimetype)e.openVideoModal(s);else if("application/pdf"==s.asset_mimetype)e.openDocsModal(s);else if("text/plain"==s.asset_mimetype)e.openDocsModal(s);else if("application/msword"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==s.asset_mimetype)e.openDocsModal(s);else if("text/csv"==s.asset_mimetype||"application/vnd.ms-excel"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==s.asset_mimetype)e.openDocsModal(s);else{if("application/vnd.openxmlformats-officedocument.presentationml.presentation"!=s.asset_mimetype&&"application/vnd.ms-powerpoint"!=s.asset_mimetype)return void r.warning("No available tools to open","Failed");e.openDocsModal(s)}_.isNull(s.folder_id)?m.trackEvent("Presentation Assets","Click",s.asset_name,s.asset_id):m.trackEvent("Presentation Assets","Click",s.folder_name,s.files)},e.deleteFile=function(s){e.modal={title:"Remove File",message:"Are you sure to remove the file?"},c.openConfirm({templateUrl:"./views/folder/customDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){o.deleteAssetFile(s._id).then(function(e){200==e.statusCode&&e.response.success&&(r.success(e.response.msg,"Success"),l(function(){a.reload()},200))})})},e.clearSelection=function(){e.selectedFile={},e.showBarDelete=!1,e.showBarRestore=!1,e.showBarShare=!1,e.showBarMore=!1,e.showToolPreview=!1,e.showToolOpen=!1,_.each(e.assets.folders,function(e){e.isActive=!1}),_.each(e.assets.assets,function(e){e.isActive=!1})},e.searchData=function(){_.isEmpty(e.txtSearch)||"main.presentation_trash"!=a.current.name?_.isEmpty(e.txtSearch)&&"main.presentation_trash"==a.current.name?(e.assets.folders=e.trash.folderscopy,e.assets.assets=e.trash.assetscopy):_.isEmpty(e.txtSearch)||"main.presentation_starred"!=a.current.name?_.isEmpty(e.txtSearch)&&"main.presentation_starred"==a.current.name?(e.assets.folders=e.starred.folderscopy,e.assets.assets=e.starred.assetscopy):_.isEmpty(e.txtSearch)||"main.presentation"!=a.current.name?_.isEmpty(e.txtSearch)&&"main.presentation"==a.current.name?(e.assets.folders=e.assets.folderscopy,e.assets.assets=e.assets.assetscopy):_.isEmpty(e.txtSearch)||"main.opensubfolder"!=a.current.name?_.isEmpty(e.txtSearch)&&"main.opensubfolder"==a.current.name?(e.assets.folders=e.foldercopy,e.assets.assets=e.assetcopy):_.isEmpty(e.txtSearch)||"main.openfolder"!=a.current.name?_.isEmpty(e.txtSearch)&&"main.openfolder"==a.current.name?(e.assets.folders=e.foldercopy,e.assets.assets=e.assetcopy):_.isEmpty(e.txtSearch)||"main.assetGallery"!=a.current.name?_.isEmpty(e.txtSearch)&&"main.assetGallery"==a.current.name&&(e.showresult=!1):(f.hash("searchresult"),e.showresult=!0,e.searchresult=d("filter")(e.assetcopy,e.txtSearch)):(e.assets.folders=d("filter")(e.foldercopy,e.txtSearch),e.assets.assets=d("filter")(e.assetcopy,e.txtSearch)):(e.assets.folders=d("filter")(e.foldercopy,e.txtSearch),e.assets.assets=d("filter")(e.assetcopy,e.txtSearch)):(e.assets.folders=d("filter")(e.assets.folderscopy,e.txtSearch),e.assets.assets=d("filter")(e.assets.assetscopy,e.txtSearch)):(e.assets.folders=d("filter")(e.starred.folderscopy,e.txtSearch),e.assets.assets=d("filter")(e.starred.assetscopy,e.txtSearch)):(e.assets.folders=d("filter")(e.trash.folderscopy,e.txtSearch),e.assets.assets=d("filter")(e.trash.assetscopy,e.txtSearch)),_.each(e.assets.folders,function(e){var s=_.sumBy(e.files,function(e){return e.asset_filesize});e.folder_filesize=u(s),e.isActive=!1,e.isFolder=!0}),_.each(e.assets.assets,function(e){e.asset_filesize=_.isInteger(e.asset_filesize)?u(e.asset_filesize):e.asset_filesize,e.isActive=!1,e.isFolder=!1}),e.assets.folders&&e.assets.assets&&(e.assets.folders.length>0&&e.assets.assets.length>0?e.showFiles=!0:e.assets.folders.length>0&&e.assets.assets.length<1?e.showFiles=!0:e.assets.folders.length<1&&e.assets.assets.length>0?e.showFiles=!0:e.assets.folders.length<1&&e.assets.assets.length<1&&(e.showFiles=!1))},e.selectAll=function(){0==e.DeSelectAll?(e.showBarDelete=!0,e.showBarRestore=!1,e.showBarShare=!0,e.showBarMore=!0,_.each(e.assets.folders,function(e){e.isActive=!0}),_.each(e.assets.assets,function(e){e.isActive=!0}),e.DeSelectAll=!0,e.selectedText="Deselect All"):(e.showBarDelete=!1,e.showBarRestore=!0,e.showBarShare=!1,e.showBarMore=!1,_.each(e.assets.folders,function(e){e.isActive=!1}),_.each(e.assets.assets,function(e){e.isActive=!1}),e.DeSelectAll=!1,e.selectedText="Select All")},e.activeSelected=function(s){e.DeSelectAll=!1,e.selectedText="Select All",s&&(s.isActive=!0,"main.presentation_trash"==a.current.name?(e.showBarDelete=!0,e.showBarRestore=!0,e.showBarShare=!1,e.showBarMore=!1,e.showToolPreview=!1,e.showToolOpen=!1,e.showToolMakeCopy=!1):"main.presentation_starred"==a.current.name?(e.showBarDelete=!1,e.showBarRestore=!1,e.showBarShare=!0,e.showBarMore=!0,s.isFolder?(e.showToolPreview=!1,e.showToolOpen=!0,e.showToolMakeCopy=!1):(e.showToolPreview=!0,e.showToolOpen=!1,e.showToolMakeCopy=!0)):(e.showBarDelete=!0,e.showBarRestore=!1,e.showBarShare=!0,e.showBarMore=!0,s.isFolder?(e.showToolPreview=!1,e.showToolOpen=!0,e.showToolMakeCopy=!1):(e.showToolPreview=!0,e.showToolOpen=!1,e.showToolMakeCopy=!0)),e.selectedFile=s,e.foldercopy&&_.each(e.foldercopy,function(e){_.each(e.files,function(e){e._id!==s._id&&(e.isActive=!1)})}),e.toppresentation&&_.each(e.toppresentation.files,function(e){e._id!==s._id&&(e.isActive=!1)}),_.each(e.assets.folders,function(e){e._id!==s._id&&(e.isActive=!1)}),_.each(e.assets.assets,function(e){e._id!==s._id&&(e.isActive=!1)}))}}angular.module("tessaApp").controller("presentationCtrl",s),s.$inject=["$scope","localStorageService","$uibModal","assetsFctry","$stateParams","$state","toastr","$timeout","Lightbox","ngDialog","$filter","$frontierAnalytics","socket","$location"]}(document);
!function(){"use strict";function s(s,e,n,r,t,o){s.folder={},s.create=function(){r._id&&(s.folder.parent_id=r._id),o.createFolder(s.folder).then(function(s){200==s.statusCode&&s.response.success?(t.success(s.response.msg,"Success"),n(function(){e.close("save")},100)):400===s.statusCode&&!s.response.success&&_.isArray(s.response.result)?_.each(s.response.result,function(s){t.warning(s.msg,"Warning")}):t.error(s.response.msg,"Error")})},s.cancel=function(){e.dismiss("cancel")}}angular.module("tessaApp").controller("presentationFolderModalCtrl",s),s.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry"]}();
!function(){"use strict";function e(e,t,i,s,n,o,c,l,r,a,d,u){function m(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),e.isFullScreen=!0}function v(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,t=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled;t?m(document.documentElement):e&&m(document.documentElement)}function p(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),e.isFullScreen=!1}function f(){t.reload()}function w(e){console.log("Error: ",e);var t=$window.open(encodeURI("https://chrome.google.com/webstore/detail/"+u),"_blank");t.focus()}console.log("mirrorDevice:",d),e.audio="audio"==o,e.mirrorFile=a,e.mirrorDevice=d,e.data=null,e.isFullScreen=!1,e.onReady=function(t){e.data=t,t.autoPlay=!0},e.config={autoPlay:!0,sources:[{src:n.trustAsResourceUrl(s.asset_url),type:s.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}},e.device={},e.asset_file=s,e.displayInstallPlugin=!1,e.activeDevices=[],c.on("pair:sendCode",function(t){_.find(e.activeDevices,{deviceUUID:t.deviceUUID})||e.activeDevices.push(t)}),DetectRTC.screen.getChromeExtensionStatus(function(t){"installed-enabled"!=t&&(DetectRTC.screen.chromeMediaSource="desktop",r(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),_.isEmpty(e.mirrorDevice)||r(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname},function(e){})},1e3),e.enterFullScreen=function(){e.data.toggleFullScreen(),e.isFullScreen=!0},e.exitFullScreen=function(){e.data.toggleFullScreen(),e.isFullScreen=!1},e.pingSelectedDevice=function(e){e&&c.emit("pair:sendMessage",{msg:"Ping DEVICE: "+e.deviceUUID,deviceUUID:e.deviceUUID})},e.selectDevice=function(t){e.device=t,e.device&&(e.device.connected=!0,"audio/mp3"==e.asset_file.asset_mimetype||"audio/mp4"==e.asset_file.asset_mimetype?e.asset_file.asset_type="audio":"video/mp4"==e.asset_file.asset_mimetype||"video/x-flv"==e.asset_file.asset_mimetype||"video/x-msvideo"==e.asset_file.asset_mimetype||"video/x-ms-wmv"==e.asset_file.asset_mimetype||"video/quicktime"==e.asset_file.asset_mimetype||"video/3gpp"==e.asset_file.asset_mimetype?e.asset_file.asset_type="video":e.asset_file.asset_type="none",e.asset_file.deviceUUID=e.device.deviceUUID,e.asset_file.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=e.asset_file,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(t){v(),c.emit("pair:getCode",e.device)}))},e.castScreen=function(){e.mirrorDevice&&!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(t){console.log("response: ",t),v(),c.emit("pair:getCode",e.mirrorDevice)})},e.starredSelected=function(){function t(t){200==t.statusCode&&t.response.success&&(toastr.success(t.response.msg,"Success"),e.asset_file.isStarred=1)}e.asset_file&&(e.asset_file.isFolder?l.starredFolder(e.asset_file._id).then(t):l.starredAssetFile(e.asset_file._id).then(t))},e.cancel=function(){e.device?c.emit("pair:closePresent",{deviceUUID:e.device.deviceUUID}):(console.log("$scope.mirrorDevice: ",e.mirrorDevice),c.emit("pair:closePresent",{deviceUUID:e.mirrorDevice.deviceUUID})),p(),i.close("cancel")},e.installPlugin=function(){console.log("https://chrome.google.com/webstore/detail/tessa-presentation/"+u),!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.webstore.install("https://chrome.google.com/webstore/detail/tessa-presentation/"+u,f(),w())}}angular.module("tessaApp").controller("assetsMediaModalCtrl",e),e.$inject=["$scope","$state","$uibModalInstance","files","$sce","type","socket","assetsFctry","$timeout","mirrorFile","mirrorDevice","EXT_ID"]}();
!function(){"use strict";function e(e,s,o,t,i,l,a){e.files={},e.treedata=[],e.asset_file=a,e.isLoading=!0,e.treedata.push({label:"Main Files",_id:null,folder_id:null}),l.getAllAssets().then(function(s){200==s.statusCode&&s.response.success&&(e.files=s.response.result,_.each(e.files.folders,function(s){var o={label:s.folder_name,_id:s._id,folder_id:s.folder_id,children:[]};_.each(s.sub_folders,function(e){o.children.push({label:e.folder_name,_id:s._id,folder_id:s.folder_id})}),e.treedata.push(o)}),e.isLoading=!1,console.log("$scope.treedata: ",e.treedata))}),e.Move=function(){function t(e){200==e.statusCode&&e.response.success&&(i.success(e.response.msg,"Success"),o(function(){s.close("save")},100))}if(!e.abc||!angular.isObject(e.abc.currentNode))return void i.warning("Please select directory where the files/folder to move","WARNING");var a=e.abc.currentNode;if(e.asset_file.isFolder){if(e.asset_file._id==a._id)return void i.warning("Unable to move folder on same folder source","WARNING");if(e.asset_file.parent_id==a._id)return void i.warning("Unable to move folder on root folder source","WARNING");l.moveFolder(e.asset_file._id,a._id).then(t)}else l.moveAssetFile(e.asset_file._id,a._id).then(t)},e.cancel=function(){s.dismiss("cancel")}}angular.module("tessaApp").controller("assetsMoveModalCtrl",e),e.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","asset_file"]}();
!function(){"use strict";function e(e,s,n,i,l,t,a){e.file={},e.file=a,e.file.isFolder?e.file.foldername=e.file.folder_name:e.file.filename=e.file.asset_name,e.Rename=function(){function i(e){200==e.statusCode&&e.response.success?(l.success(e.response.msg,"Success"),n(function(){s.close("save")},100)):400===e.statusCode&&!e.response.success&&_.isArray(e.response.result)?_.each(e.response.result,function(e){l.warning(e.msg,"Warning")}):l.error(e.response.msg,"Error")}e.file.isFolder?t.updateFolder(e.file._id,{folder_name:e.file.foldername}).then(i):t.updateAssetFile(e.file._id,{file_name:e.file.filename}).then(i)},e.cancel=function(){s.dismiss("cancel")}}angular.module("tessaApp").controller("assetsRenameModalCtrl",e),e.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","asset_file"]}();
!function(){"use strict";function s(s,e,n,r,a,t,o,i,c,u){s.sharer={},s.persons=[],s.company=[],s.items=[],async.waterfall([function(s){o.getCompany(function(e,n){if(200==n.statusCode&&n.response.success){var r=n.response.result;s(null,r)}else s(null,[])})},function(s,e){o.getAllPerson(function(n,r){if(200==r.statusCode&&r.response.success){var a=r.response.result;e(null,s,a)}else e(null,[])})},function(e,n,r){s.persons=angular.copy(n),s.company=angular.copy(e),s.persons=_.filter(s.persons,function(s){if("Customer"==s.person_type&&0==s.isSubscriber)return s}),_.each(s.persons,function(e){s.items.push({displayName:e.displayName,email:e.email||"",_id:e._id})}),_.each(s.company,function(e){s.items.push({displayName:e.name,email:e.email_address||"",_id:e._id})})}]),s.tagTransform=function(s){return{email:s}},s.clearInput=function(s){s.search=""},s.deleteEmail=function(s){console.log("deleteEmail: ",s)},s.sendMail=function(){s.sharer.from="support@engagis-tessa.com.au",s.sharer.subject="ENGAGIS-TESSA Presentation",s.sharer.message=$("#printasset").html(),s.sharer.attachment=c.asset_url||"",s.sharer.email=_.map(s.sharer.email,function(s){return s.email}),i.sendMail(s.sharer,function(s,n){return 200==n.statusCode&&n.response.success?(a.success(n.response.msg,"Success"),e.dismiss("send"),u.go(u.current,null,{reload:!0}),void 0):400===n.statusCode&&!n.response.success&&_.isArray(n.response.result)?void _.each(n.response.result,function(s){a.warning(s.msg,"Warning")}):void a.error(n.response.msg,"Error")})},s.cancel=function(){e.dismiss("cancel")}}angular.module("tessaApp").controller("assetsShareModalCtrl",s),s.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","APIFactory","sharerFactory","asset_file","$state"]}();
!function(){"use strict";function e(e,o,s,l,t,n,i,a,c,u,d,r){console.log("assetsUploadModalCtrl: ",u),e.item={},e.isUploadAll=!0,e.isClose=!1;var f=(JSON.parse(d.get("user")),e.uploader=new l({url:t+n+"assets",method:"POST",headers:{Authorization:"Bearer "+c.getUserToken(),accesskey:i}}));f.filters.push({name:"customFilter",fn:function(e,o){return this.queue.length<10}}),f.onBeforeUploadItem=function(e){e.alias="files",u._id&&_.isUndefined(u.sub_id)?e.formData=[{parent_id:u._id}]:u._id&&u.sub_id&&(e.formData=[{parent_id:u.sub_id}])},f.onSuccessItem=function(e,o,s,l){r.success(o.response.msg,"Success")},f.onWhenAddingFileFailed=function(e,o,s){console.log("item:",e),console.log("filter:",o),console.log("options:",s)},f.onAfterAddingFile=function(e){console.log("onAfterAddingFile:",e)},f.onCompleteAll=function(e){r.success("Media / File upload complete","Success"),a(function(){s.close("success")},1300)},e.uploadAll=function(){f.uploadAll(),e.isUploadAll=!1,e.isClose=!0},e.cancel=function(){s.dismiss("cancel")}}angular.module("tessaApp").controller("assetsUploadModalCtrl",e),e.$inject=["$scope","$state","$uibModalInstance","FileUploader","API_URL","API_VERSION","ACCESSKEY","$timeout","AuthFactory","$stateParams","localStorageService","toastr"]}();
!function(){"use strict";function e(e,i,t,c,o,s,n,a,d,l,v,r,m){function p(){m.reload()}function u(e){console.log("Error: ",e);var i=v.open(encodeURI("https://chrome.google.com/webstore/detail/"+r),"_blank");i.focus()}e.device={},e.activeDevices=[],e.activeDevices=angular.copy(a),e.enableCasting=!0,e.displayInstallPlugin=!1,DetectRTC.screen.getChromeExtensionStatus(function(i){"installed-enabled"!=i&&(DetectRTC.screen.chromeMediaSource="desktop",t(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),e.installPlugin=function(){console.log("https://chrome.google.com/webstore/detail/"+r),!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.webstore.install("https://chrome.google.com/webstore/detail/"+r,p,u)},e.pingSelectedDevice=function(e){e&&n.emit("pair:sendMessage",{msg:"Ping DEVICE: "+e.deviceUUID,deviceUUID:e.deviceUUID})},e.selectDevice=function(i){i.selected=!0,e.device=i,_.each(e.activeDevices,function(e){i.deviceUUID!==e.deviceUUID&&(e.selected=!1)})},e.connectDevice=function(){return e.device?(e.device.connected=!0,"audio/mp3"==d.asset_mimetype||"audio/mp4"==d.asset_mimetype?d.asset_type="audio":"video/mp4"==d.asset_mimetype||"video/x-flv"==d.asset_mimetype||"video/x-msvideo"==d.asset_mimetype||"video/x-ms-wmv"==d.asset_mimetype||"video/quicktime"==d.asset_mimetype||"video/3gpp"==d.asset_mimetype?d.asset_type="video":d.asset_type="none",d.deviceUUID=e.device.deviceUUID,d.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=d,console.log("$scope.device: ",e.device),n.emit("pair:getCode",e.device),i.close({device:e.device,msg:"mirror"}),void 0):void o.warning("WARNING","Please select device to cast!!!")},e.cancel=function(){i.dismiss("cancel")},n.on("pair:sendCode",function(i){_.find(e.activeDevices,{deviceUUID:i.deviceUUID})||e.activeDevices.push(i)}),n.on("disconnect",function(e){console.log("disconnect: ",e)})}angular.module("tessaApp").controller("assetsMirrorModalCtrl",e),e.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","socket","activeDevices","asset_file","API_URL","$window","EXT_ID","$state"]}();
!function(){"use strict";function e(e,i,t,o,n,c,s,l,r,a,m,d,u,v){function p(i){i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen?i.webkitRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen(),e.isFullScreen=!0}function w(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,i=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled;i?p(document.documentElement):e&&p(document.documentElement)}function f(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),e.isFullScreen=!1}function U(){i.reload()}function g(e){console.log("Error: ",e);var i=l.open(encodeURI("https://chrome.google.com/webstore/detail/"+u),"_blank");i.focus()}console.log("files:",n),e.pdfName=n.media_name,e.file_type=n.asset_mimetype,e.device={},e.activeDevices=[],e.onMouseMoveResult="",e.displayInstallPlugin=!1,e.mirrorFile=m,e.mirrorDevice=d,e.isFullScreen=!1;var D,h=e.asset_file=n;if(DetectRTC.screen.getChromeExtensionStatus(function(i){"installed-enabled"!=i&&(DetectRTC.screen.chromeMediaSource="desktop",a(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),"application/pdf"==n.asset_mimetype)e.pdfUrl=o.trustAsResourceUrl(n.asset_url);else if("text/plain"==n.asset_mimetype)e.pdfUrl=o.trustAsResourceUrl("https://docs.google.com/gview?url="+n.asset_url+"&embedded=true");else{var F=encodeURI(n.asset_url);e.pdfUrl=o.trustAsResourceUrl("https://view.officeapps.live.com/op/view.aspx?src="+F)}_.isEmpty(e.mirrorDevice)||a(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(e){})},1e3),e.enterFullScreen=function(){w()},e.exitFullScreen=function(){f()},e.stop=function(){r.cancel(D)},e.pingSelectedDevice=function(e){e&&s.emit("pair:sendMessage",{msg:"Ping DEVICE: "+e.deviceUUID,deviceUUID:e.deviceUUID})},e.selectDevice=function(i){e.device=i,e.device?(e.device.connected=!0,"audio/mp3"==h.asset_mimetype||"audio/mp4"==h.asset_mimetype?h.asset_type="audio":"video/mp4"==h.asset_mimetype||"video/x-flv"==h.asset_mimetype||"video/x-msvideo"==h.asset_mimetype||"video/x-ms-wmv"==h.asset_mimetype||"video/quicktime"==h.asset_mimetype||"video/3gpp"==h.asset_mimetype?h.asset_type="video":h.asset_type="none",h.deviceUUID=e.device.deviceUUID,h.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=h,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(i){s.emit("pair:getCode",e.device)})):w()},e.castScreen=function(){"audio/mp3"==h.asset_mimetype||"audio/mp4"==h.asset_mimetype?h.asset_type="audio":"video/mp4"==h.asset_mimetype||"video/x-flv"==h.asset_mimetype||"video/x-msvideo"==h.asset_mimetype||"video/x-ms-wmv"==h.asset_mimetype||"video/quicktime"==h.asset_mimetype||"video/3gpp"==h.asset_mimetype?h.asset_type="video":h.asset_type="none",h.deviceUUID=e.device.deviceUUID,h.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=h,s.emit("pair:getCode",e.device),a(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(e){})},1e3)},e.renameSelected=function(){var t=v.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/rename.html",controller:"assetsRenameModalCtrl",resolve:{asset_file:function(){return n}}});t.result.then(function(t){t&&(e.cancel(),i.reload())})},e.castModal=function(){var i=v.open({animation:!0,templateUrl:"./views/folder/cast.html",windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return e.activeDevices},asset_file:function(){return e.selectedFile}}});i.result.then(function(i){e.selectedFile&&("mirror"==i.msg&&(e.mirrorFile=!0,e.mirrorDevice=i.device),e.selectedFile.isFolder?e.openFolder(n):e.openFile(n))})},e.moveSelected=function(){var e=v.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/move.html",controller:"assetsMoveModalCtrl",resolve:{asset_file:function(){return n}}});e.result.then(function(e){e&&i.reload()})},e.cancel=function(){_.isEmpty(e.device)?_.isEmpty(e.mirrorDevice)||(console.log("$scope.mirrorDevice: ",e.mirrorDevice),s.emit("pair:closePresent",{deviceUUID:e.mirrorDevice.deviceUUID})):s.emit("pair:closePresent",{deviceUUID:e.device.deviceUUID}),e.stop(),f(),!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{action:"close",deviceUUID:e.device.deviceUUID},function(e){}),t.close("cancel")},e.installPlugin=function(){console.log("https://chrome.google.com/webstore/detail/"+u),!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.webstore.install("https://chrome.google.com/webstore/detail/"+u,U,g)},s.on("pair:sendCode",function(i){_.find(e.activeDevices,{deviceUUID:i.deviceUUID})||e.activeDevices.push(i)})}angular.module("tessaApp").controller("assetsDocsModalCtrl",e),e.$inject=["$scope","$state","$uibModalInstance","$sce","files","localStorageService","socket","$window","$interval","$timeout","mirrorFile","mirrorDevice","EXT_ID","$uibModal"]}();
!function(){"use strict";var r=function(r){return function(t,n){return r.uniqBy(t,function(r){return r[n]})}},t=function(){return function(r,t){for(var n="test",e=0;e<r.length;e++);return n}};angular.module("tessaApp").filter("duplicates",["_",r]).filter("count",[t]).filter("ellipsis",function(){return function(r,t,n,e){if(!r)return"";if(n=parseInt(n,10),!n)return r;if(r.length<=n)return r;if(r=r.substr(0,n),t){var u=r.lastIndexOf(" ");u!=-1&&("."!=r.charAt(u-1)&&","!=r.charAt(u-1)||(u-=1),r=r.substr(0,u))}return r+(e||" …")}}).filter("propsFilter",function(){return function(r,t){var n=[];return angular.isArray(r)?r.forEach(function(r){for(var e=!1,u=Object.keys(t),i=0;i<u.length;i++){var f=u[i],o=t[f].toLowerCase();if(r[f].toString().toLowerCase().indexOf(o)!==-1){e=!0;break}}e&&n.push(r)}):n=r,n}})}();
!function(){"use strict";angular.module("tessaApp").directive("errSrc",function(){return{transclude:!0,link:function(n,t,e){n.$watch(function(){return e.ngSrc},function(n){n||t.attr("src",e.errSrc)}),t.bind("error",function(){t.attr("src",e.errSrc)})}}}).directive("ngPrint",function(){function n(n,r,i){r.on("click",function(){var n=document.getElementById(i.printElementId);n&&t(n)}),window.onafterprint=function(){e.innerHTML=""}}function t(n){var t=n.cloneNode(!0);e.innerHTML="",e.appendChild(t),window.print()}var e=document.getElementById("printSection");return e||(e=document.createElement("div"),e.id="printSection",document.body.appendChild(e)),{link:n,restrict:"A"}}).directive("appHeader",function(){return{restrict:"AE",replace:!0,templateUrl:"./views/header.html",controller:"headerCtrl"}}).directive("imageonload",function(){return{restrict:"AE",link:function(n,t,e){t.on("load",function(){t.removeClass("spinner-hide"),t.addClass("spinner-show"),t.parent().find("span").remove()}),n.$watch("ngSrc",function(){t.addClass("spinner-hide")})}}}).directive("lightboxDirective",function(){return{restrict:"E",transclude:!0,template:"<section ng-transclude></section>"}}).directive("ngScrollEvent",["$parse","$window",function(n,t){return function(e,r,i){var c,o,l=n(i.ngScrollEvent),d=r[0],u="scroll",a={x:0,y:0},s=function(){o=function(n){a.x=d.scrollLeft,a.y=d.scrollTop,f(n),p(),v(n,!1)},r.bind(u,o)},f=function(n){c=t.setInterval(function(){a.x==d.scrollLeft&&a.y==d.scrollTop?(t.clearInterval(c),s(),v(n,!0)):(a.x=d.scrollLeft,a.y=d.scrollTop)},INTERVAL_DELAY)},p=function(){r.unbind(u,o)},v=function(n,t){e.$apply(function(){l(e,{$event:n,isEndEvent:t})})};s()}}])}();
angular.module("infinite-scroll",[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(n,e,t,i){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(l,o,r){var c,u,f,a,d,s,m,S,p,g,$,v,w,D,h,E,T,y,C;return C=angular.element(e),D=null,h=null,f=null,a=null,$=!0,y=!1,T=null,u=!1,g=function(n){return n=n[0]||n,isNaN(n.offsetHeight)?n.document.documentElement.clientHeight:n.offsetHeight},v=function(n){if(n[0].getBoundingClientRect&&!n.css("none"))return n[0].getBoundingClientRect().top+w(n)},w=function(n){return n=n[0]||n,isNaN(window.pageYOffset)?n.document.documentElement.scrollTop:n.ownerDocument.defaultView.pageYOffset},p=function(){var e,i,r,c,d;return a===C?(e=g(a)+w(a[0].document.documentElement),r=v(o)+g(o)):(e=g(a),i=0,void 0!==v(a)&&(i=v(a)),r=v(o)-i+g(o)),y&&(r=g((o[0].ownerDocument||o[0].document).documentElement)),c=r-e,d=c<=g(a)*D+1,d?(f=!0,h?l.$$phase||n.$$phase?l.infiniteScroll():l.$apply(l.infiniteScroll):void 0):(u&&t.cancel(u),f=!1)},E=function(n,e){var i,l,o;return o=null,l=0,i=function(){return l=(new Date).getTime(),t.cancel(o),o=null,n.call()},function(){var r,c;return r=(new Date).getTime(),c=e-(r-l),c<=0?(t.cancel(o),o=null,l=r,n.call()):o?void 0:o=t(i,c,1)}},null!=i&&(p=E(p,i)),l.$on("$destroy",function(){if(a.unbind("scroll",p),null!=T&&(T(),T=null),u)return t.cancel(u)}),m=function(n){return D=parseFloat(n)||0},l.$watch("infiniteScrollDistance",m),m(l.infiniteScrollDistance),s=function(n){if(h=!n,h&&f)return f=!1,p()},l.$watch("infiniteScrollDisabled",s),s(l.infiniteScrollDisabled),S=function(n){return y=n},l.$watch("infiniteScrollUseDocumentBottom",S),S(l.infiniteScrollUseDocumentBottom),c=function(n){if(null!=a&&a.unbind("scroll",p),a=n,null!=n)return a.bind("scroll",p)},c(C),l.infiniteScrollListenForEvent&&(T=n.$on(l.infiniteScrollListenForEvent,p)),d=function(n){if(null!=n&&0!==n.length){if(n.nodeType&&1===n.nodeType?n=angular.element(n):"function"==typeof n.append?n=angular.element(n[n.length-1]):"string"==typeof n&&(n=angular.element(document.querySelector(n))),null!=n)return c(n);throw new Error("invalid infinite-scroll-container attribute.")}},l.$watch("infiniteScrollContainer",d),d(l.infiniteScrollContainer||[]),null!=r.infiniteScrollParent&&c(angular.element(o.parent())),null!=r.infiniteScrollImmediateCheck&&($=l.$eval(r.infiniteScrollImmediateCheck)),u=t(function(){return $&&p(),t.cancel(u)})}}}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="infinite-scroll");
!function(){"use strict";function n(n,t,u,l,o){var c={};return c.articleItems=[],c.allitems=[],c.getArticles=function(n){o.all("articleinfo").customGET().then(function(t){n(t)})},c.getArticleDetail=function(n,t){o.all("articleinfo").customGET(n).then(function(n){t(n)})},c.getArticleTags=function(n,t){o.all("article/"+n+"/tags").customGET().then(function(n){t(n)})},c.getProductBundle=function(n){o.all("product-bundle").customGET().then(function(t){n(t)})},c.getAllTags=function(n){o.all("tags").customGET().then(function(t){n(t)})},c.getDetailSolution=function(n,t){o.all("product-bundle/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getProductDetail=function(n,t){o.all("product/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getProduct=function(n){o.all("product").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.searchProduct=function(n,u){var l=t.filter(c.allitems,function(t){var u=new RegExp(n,"ig");return t.item_name.match(u)});u(l)},c.getHardware=function(n,u){o.all("product").customGET().then(function(l){u(t.filter(l),{productType_id:n})})},c.getCategory=function(n){o.all("categories").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getProductType=function(n){o.all("producttype").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getAll=function(n){return o.all("filters").customGET("",{filter:"all",value:n}).then(function(n){return n},function(n){return n.data})},c.getAllPerson=function(n){o.all("persons").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.personDetail=function(n,t){o.all("persons/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getProductAttribute=function(n,t){o.all("product/"+n+"/attributes").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.saveCompany=function(n,t){o.all("companyinfo").customPOST(n).then(function(n){t(null,n)},function(n){t(n,null)})},c.getCompany=function(n){o.all("companyinfo").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.companyDetail=function(n,t){o.all("companyinfo/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.saveQuote=function(n,t){o.all("quoteinfo/").customPOST(n).then(function(n){t(null,n)},function(n){t(n,null)})},c.getQuoteDetail=function(n,t){o.all("quoteinfo/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getCountries=function(n){o.all("countries").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getProdCateg=function(n,t){o.all("product/"+n+"/category").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getRelatedProduct=function(n,t){o.all("product/"+n+"/related").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getRelatedSolutions=function(n,t){o.all("product-bundle/"+n+"/related").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c}angular.module("tessaApp").factory("APIFactory",n),n.$inject=["$http","_","API_URL","API_VERSION","Restangular"]}();
!function(){"use strict";function e(e,t,r,n,o,a,u,s){return{authenticateAccount:function(e){return o.all("session").customPOST(e).then(function(e){return e},function(e){return e.data})},setUserToken:function(e){a.set("token",e)},getUserToken:function(){return a.get("token")},setCurrentUser:function(e){a.set("appuser",JSON.stringify(e))},getCurrentUser:function(){return a.get("appuser")},logout:function(){return o.all("session").customDELETE().then(function(e){return a.remove("Cart"),a.remove("label"),a.remove("hardtype"),a.remove("Payment"),a.remove("token"),a.remove("appuser"),a.remove("articlefilter"),s.signOut(),e},function(e){return e.data})}}}function t(e,t,r,n,o,a,u){return{request:function(e){if(e.headers=e.headers||{},e.headers.accesskey=o,a.get("token")){var t=a.get("token");JSON.parse(a.get("user"));e.headers.Authorization="Bearer "+t}return e},response:function(e){if(a.get("token")){var t=a.get("token");u.isTokenExpired(t)&&(a.remove("Cart"),a.remove("label"),a.remove("hardtype"),a.remove("Payment"),a.remove("token"),a.remove("appuser"),r.path("/login"))}return e},responseError:function(t){return 401===t.status&&(e.$broadcast("unauthorized"),r.path("/login")),t}}}function r(e,t){var r=0;return{request:function(n){return 1===++r&&t.$broadcast("loading:progress"),n||e.when(n)},response:function(n){return 0===--r&&t.$broadcast("loading:finish"),n||e.when(n)},responseError:function(n){return 0===--r&&t.$broadcast("loading:finish"),e.reject(n)}}}angular.module("tessaApp").factory("authInterceptor",t).factory("AuthFactory",e).factory("httpInterceptor",r),t.$inject=["$rootScope","$q","$location","$injector","ACCESSKEY","localStorageService","jwtHelper"],e.$inject=["$http","_","API_URL","API_VERSION","Restangular","localStorageService","$q","$frontierAnalytics"],r.$inject=["$q","$rootScope"]}();
!function(){"use strict";function n(n,t,u,l,a){return{shareExperience:function(n,t){a.all("sharer").customPOST(n).then(function(n){t(null,n)},function(n){t(n.data,null)})},htmltoPDF:function(n,t){a.all("htmltopdf").customPOST(n).then(function(n){t(null,n)},function(n){t(n.data,null)})},sendMail:function(n,t){a.all("sendMail").customPOST(n).then(function(n){t(null,n)},function(n){t(n.data,null)})}}}angular.module("tessaApp").factory("sharerFactory",n).factory("_",["$window",function(n){return n._}]),n.$inject=["$http","_","API_URL","API_VERSION","Restangular"]}();
!function(){function t(t,n,e){return{getAllAssets:function(){return t.all("assets").customGET().then(function(t){return t},function(t){return t.data})},deleteAssetFile:function(n){return t.all("assets").customDELETE(n).then(function(t){return t},function(t){return t.data})},trashAssetFile:function(n){return t.all("assets/"+n+"/trash").customDELETE().then(function(t){return t},function(t){return t.data})},starredAssetFile:function(n){return t.all("assets/"+n+"/starred").customPUT().then(function(t){return t},function(t){return t.data})},restoreAssetFile:function(n){return t.all("assets/"+n+"/restore").customPUT().then(function(t){return t},function(t){return t.data})},moveAssetFile:function(n,e){return t.all("assets/"+n+"/move/"+e).customPUT().then(function(t){return t},function(t){return t.data})},updateAssetFile:function(n,e){return t.all("assets/"+n).customPUT(e).then(function(t){return t},function(t){return t.data})},getFolderAssets:function(n){return t.all("assets_folders").customGET(n).then(function(t){return t},function(t){return t.data})},createFolder:function(n){return t.all("assets_folders").customPOST(n).then(function(t){return t},function(t){return t.data})},deleteFolder:function(n){return t.all("assets_folders").customDELETE(n).then(function(t){return t},function(t){return t.data})},trashFolder:function(n){return t.all("assets_folders/"+n+"/trash").customDELETE().then(function(t){return t},function(t){return t.data})},starredFolder:function(n){return t.all("assets_folders/"+n+"/starred").customPUT().then(function(t){return t},function(t){return t.data})},restoreFolder:function(n){return t.all("assets_folders/"+n+"/restore").customPUT().then(function(t){return t},function(t){return t.data})},moveFolder:function(n,e){return t.all("assets_folders/"+n+"/move/"+e).customPUT().then(function(t){return t},function(t){return t.data})},updateFolder:function(n,e){return t.all("assets_folders/"+n).customPUT(e).then(function(t){return t},function(t){return t.data})}}}angular.module("tessaApp").factory("assetsFctry",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";angular.module("tessaApp").factory("socket",["socketFactory","API_URL",function(t,o){var c=io.connect(o),e=t({ioSocket:c});return e}])}();
var angularSly=angular.module("angular-sly",["ngRoute","angular-sly"]).config(["$routeProvider","$locationProvider",function(n,l){n.when("/",{templateUrl:"views/landing.html"}).when("/horizontal",{templateUrl:"views/horizontal.html"}).when("/vertical",{templateUrl:"views/vertical.html"}).when("/ngRepeat",{templateUrl:"views/ngRepeat.html"}).otherwise({redirectTo:"/"}),l.html5Mode(!1)}]).controller("MainCtrl",["$scope","$timeout",function(n,l){n.repeatData=[{num:"0"},{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"10"},{num:"0"},{num:"1"},{num:"2"},{num:"3"},{num:"4"},{num:"5"},{num:"6"},{num:"7"},{num:"8"},{num:"9"},{num:"10"}]}]),defaultOptions={itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBy:1,activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1};angularSly.directive("slyHorizontal",function(){return{restrict:"A",link:function(n,l,e){$(window).on("resize",function(){a.sly("reload")});var a=$(l),t=$(l[0]).parent();defaultOptions.horizontal=1;var r={scrollBar:t.find(".scrollbar")||null,pagesBar:t.find(".pages")||null,forward:t.find(".forward")||null,backward:t.find(".backward")||null,prev:t.find(".prev")||null,next:t.find(".next")||null,prevPage:t.find(".prevPage")||null,nextPage:t.find(".nextPage")||null},i=$.extend({},defaultOptions,r,n.$eval(e.slyOptions)),u=n.$eval(e.slyCallback)||function(n){};a.sly(i,u())}}}),angularSly.directive("slyVertical",function(){return{restrict:"A",link:function(n,l,e){var a=$(l),t=$(l[0]).parent();defaultOptions.horizontal=0;var r={scrollBar:t.find(".scrollbar")||null,pagesBar:t.find(".pages")||null,forward:t.find(".forward")||null,backward:t.find(".backward")||null,prev:t.find(".prev")||null,next:t.find(".next")||null,prevPage:t.find(".prevPage")||null,nextPage:t.find(".nextPage")||null},i=$.extend({},defaultOptions,r,n.$eval(e.slyOptions)),u=n.$eval(e.slyCallback)||function(n){};a.sly(i,u())}}}),angularSly.directive("slyHorizontalRepeat",["$timeout",function(n){return{restrict:"A",link:function(l,e,a){$(window).on("resize",function(){frame.sly("reload")}),l.$last===!0&&n(function(){var n=$(e[0]).parent().parent(),t=$(e[0]).parent().parent().parent();defaultOptions.horizontal=1;var r={scrollBar:t.find(".scrollbar")||null,pagesBar:t.find(".pages")||null,forward:t.find(".forward")||null,backward:t.find(".backward")||null,prev:t.find(".prev")||null,next:t.find(".next")||null,prevPage:t.find(".prevPage")||null,nextPage:t.find(".nextPage")||null},i=$.extend({},defaultOptions,r,l.$eval(a.slyOptions)),u=l.$eval(a.slyCallback)||function(n){};n.sly(i,u())})}}}]),angularSly.directive("slyVerticalRepeat",["$timeout",function(n){return{restrict:"A",link:function(l,e,a){l.$last===!0&&n(function(){var n=$(e[0]).parent().parent(),t=$(e[0]).parent().parent().parent();defaultOptions.horizontal=0;var r={scrollBar:t.find(".scrollbar")||null,pagesBar:t.find(".pages")||null,forward:t.find(".forward")||null,backward:t.find(".backward")||null,prev:t.find(".prev")||null,next:t.find(".next")||null,prevPage:t.find(".prevPage")||null,nextPage:t.find(".nextPage")||null},i=$.extend({},defaultOptions,r,l.$eval(a.slyOptions)),u=l.$eval(a.slyCallback)||function(n){};n.sly(i,u())})}}}]),angularSly.directive("slyToBegin",function(){return{restrict:"A",link:function(n,l,e){l.on("click",function(){var n=$("#"+e.slyFrame),l=e.slyDataItem||void 0;n.sly("toStart",l)})}}}),angularSly.directive("slyToCenter",function(){return{restrict:"A",link:function(n,l,e){l.on("click",function(){var n=$("#"+e.slyFrame),l=e.slyDataItem||void 0;n.sly("toCenter",l)})}}}),angularSly.directive("slyToEnd",function(){return{restrict:"A",link:function(n,l,e){l.on("click",function(){var n=$("#"+e.slyFrame),l=e.slyDataItem||void 0;n.sly("toEnd",l)})}}});
!function(e,t,a){"use strict";function n(t,p,g){function H(a){var n=0,i=Ee.length;if(Ce.old=e.extend({},Ce),Pe=we?0:Ie[me.horizontal?"width":"height"](),Te=Se[me.horizontal?"width":"height"](),ze=we?t:be[me.horizontal?"outerWidth":"outerHeight"](),Ee.length=0,Ce.start=0,Ce.end=q(ze-Pe,0),Re){n=Oe.length,qe=be.children(me.itemSelector),Oe.length=0;var r,s=c(be,me.horizontal?"paddingLeft":"paddingTop"),o=c(be,me.horizontal?"paddingRight":"paddingBottom"),l="border-box"===e(qe).css("boxSizing"),u="none"!==qe.css("float"),f=0,v=qe.length-1;ze=0,qe.each(function(t,a){var n=e(a),i=a.getBoundingClientRect(),l=E(me.horizontal?i.width||i.right-i.left:i.height||i.bottom-i.top),d=c(n,me.horizontal?"marginLeft":"marginTop"),h=c(n,me.horizontal?"marginRight":"marginBottom"),p=l+d+h,g=!d||!h,m={};m.el=a,m.size=g?l:p,m.half=m.size/2,m.start=ze+(g?d:0),m.center=m.start-E(Pe/2-m.size/2),m.end=m.start-Pe+m.size,t||(ze+=s),ze+=p,me.horizontal||u||h&&d&&t>0&&(ze-=O(d,h)),t===v&&(m.end+=o,ze+=o,f=g?h:0),Oe.push(m),r=m}),be[0].style[me.horizontal?"width":"height"]=(l?ze:ze-s-o)+"px",ze-=f,Oe.length?(Ce.start=Oe[0][Fe?"center":"start"],Ce.end=Fe?r.center:Pe<ze?r.end:Ce.start):Ce.start=Ce.end=0}if(Ce.center=E(Ce.end/2+Ce.start/2),Q(),Be.length&&Te>0&&(me.dynamicHandle?(ke=Ce.start===Ce.end?Te:E(Te*Pe/ze),ke=d(ke,me.minHandleSize,Te),Be[0].style[me.horizontal?"width":"height"]=ke+"px"):ke=Be[me.horizontal?"outerWidth":"outerHeight"](),xe.end=Te-ke,it||M()),!we&&Pe>0){var h=Ce.start,p="";if(Re)e.each(Oe,function(e,t){Fe?Ee.push(t.center):t.start+t.size>h&&h<=Ce.end&&(h=t.start,Ee.push(h),h+=Pe,h>Ce.end&&h<Ce.end+Pe&&Ee.push(Ce.end))});else for(;h-Pe<Ce.end;)Ee.push(h),h+=Pe;if(De[0]&&i!==Ee.length){for(var g=0;g<Ee.length;g++)p+=me.pageBuilder.call(ye,g);Ae=De.html(p).children(),Ae.eq(Ne.activePage).addClass(me.activeClass)}}if(Ne.slideeSize=ze,Ne.frameSize=Pe,Ne.sbSize=Te,Ne.handleSize=ke,Re){a&&null!=me.startAt&&(U(me.startAt),ye[Le?"toCenter":"toStart"](me.startAt));var m=Oe[Ne.activeItem];X(Le&&m?m.center:d(Ce.dest,Ce.start,Ce.end))}else a?null!=me.startAt&&X(me.startAt,1):X(d(Ce.dest,Ce.start,Ce.end));he("load")}function X(e,t,a){if(Re&&at.released&&!a){var n=$(e),i=e>Ce.start&&e<Ce.end;Le?(i&&(e=Oe[n.centerItem].center),Fe&&me.activateMiddle&&U(n.centerItem)):i&&(e=Oe[n.firstItem].start)}at.init&&at.slidee&&me.elasticBounds?e>Ce.end?e=Ce.end+(e-Ce.end)/6:e<Ce.start&&(e=Ce.start+(e-Ce.start)/6):e=d(e,Ce.start,Ce.end),et.start=+new Date,et.time=0,et.from=Ce.cur,et.to=e,et.delta=e-Ce.cur,et.tweesing=at.tweese||at.init&&!at.slidee,et.immediate=!et.tweesing&&(t||at.init&&at.slidee||!me.speed),at.tweese=0,e!==Ce.dest&&(Ce.dest=e,he("change"),it||Y()),K(),Q(),Z(),j()}function Y(){if(ye.initialized){if(!it)return it=w(Y),void(at.released&&he("moveStart"));et.immediate?Ce.cur=et.to:et.tweesing?(et.tweeseDelta=et.to-Ce.cur,x(et.tweeseDelta)<.1?Ce.cur=et.to:Ce.cur+=et.tweeseDelta*(at.released?me.swingSpeed:me.syncSpeed)):(et.time=O(+new Date-et.start,me.speed),Ce.cur=et.from+et.delta*e.easing[me.easing](et.time/me.speed,et.time,0,1,me.speed)),et.to===Ce.cur?(Ce.cur=et.to,at.tweese=it=0):it=w(Y),he("move"),we||(f?be[0].style[f]=v+(me.horizontal?"translateX":"translateY")+"("+-Ce.cur+"px)":be[0].style[me.horizontal?"left":"top"]=-E(Ce.cur)+"px"),!it&&at.released&&he("moveEnd"),M()}}function M(){Be.length&&(xe.cur=Ce.start===Ce.end?0:((at.init&&!at.slidee?Ce.dest:Ce.cur)-Ce.start)/(Ce.end-Ce.start)*xe.end,xe.cur=d(E(xe.cur),xe.start,xe.end),_e.hPos!==xe.cur&&(_e.hPos=xe.cur,f?Be[0].style[f]=v+(me.horizontal?"translateX":"translateY")+"("+xe.cur+"px)":Be[0].style[me.horizontal?"left":"top"]=xe.cur+"px"))}function j(){Ae[0]&&_e.page!==Ne.activePage&&(_e.page=Ne.activePage,Ae.removeClass(me.activeClass).eq(Ne.activePage).addClass(me.activeClass),he("activePage",_e.page))}function F(){tt.speed&&Ce.cur!==(tt.speed>0?Ce.end:Ce.start)||ye.stop(),ot=at.init?w(F):0,tt.now=+new Date,tt.pos=Ce.cur+(tt.now-tt.lastTime)/1e3*tt.speed,X(at.init?tt.pos:E(tt.pos)),at.init||Ce.cur!==Ce.dest||he("moveEnd"),tt.lastTime=tt.now}function L(e,t,n){if("boolean"===i(t)&&(n=t,t=a),t===a)X(Ce[e],n);else{if(Le&&"center"!==e)return;var r=ye.getPos(t);r&&X(r[e],n,!Le)}}function R(e){return null!=e?l(e)?e>=0&&e<Oe.length?e:-1:qe.index(e):-1}function W(e){return R(l(e)&&e<0?e+Oe.length:e)}function U(e,t){var a=R(e);return!(!Re||a<0)&&((_e.active!==a||t)&&(qe.eq(Ne.activeItem).removeClass(me.activeClass),qe.eq(a).addClass(me.activeClass),_e.active=Ne.activeItem=a,Z(),he("active",a)),a)}function $(e){e=d(l(e)?e:Ce.dest,Ce.start,Ce.end);var t={},a=Fe?0:Pe/2;if(!we)for(var n=0,i=Ee.length;n<i;n++){if(e>=Ce.end||n===Ee.length-1){t.activePage=Ee.length-1;break}if(e<=Ee[n]+a){t.activePage=n;break}}if(Re){for(var r=!1,s=!1,o=!1,c=0,u=Oe.length;c<u;c++)if(r===!1&&e<=Oe[c].start+Oe[c].half&&(r=c),o===!1&&e<=Oe[c].center+Oe[c].half&&(o=c),c===u-1||e<=Oe[c].end+Oe[c].half){s=c;break}t.firstItem=l(r)?r:0,t.centerItem=l(o)?o:t.firstItem,t.lastItem=l(s)?s:t.centerItem}return t}function Q(t){e.extend(Ne,$(t))}function Z(){var e=Ce.dest<=Ce.start,t=Ce.dest>=Ce.end,a=(e?1:0)|(t?2:0);if(_e.slideePosState!==a&&(_e.slideePosState=a,Je.is("button,input")&&Je.prop("disabled",e),Ke.is("button,input")&&Ke.prop("disabled",t),Je.add(Qe)[e?"addClass":"removeClass"](me.disabledClass),Ke.add($e)[t?"addClass":"removeClass"](me.disabledClass)),_e.fwdbwdState!==a&&at.released&&(_e.fwdbwdState=a,Qe.is("button,input")&&Qe.prop("disabled",e),$e.is("button,input")&&$e.prop("disabled",t)),Re&&null!=Ne.activeItem){var n=0===Ne.activeItem,i=Ne.activeItem>=Oe.length-1,r=(n?1:0)|(i?2:0);_e.itemsButtonState!==r&&(_e.itemsButtonState=r,Ze.is("button,input")&&Ze.prop("disabled",n),Ge.is("button,input")&&Ge.prop("disabled",i),Ze[n?"addClass":"removeClass"](me.disabledClass),Ge[i?"addClass":"removeClass"](me.disabledClass))}}function G(e,t,a){if(e=W(e),t=W(t),e>-1&&t>-1&&e!==t&&(!a||t!==e-1)&&(a||t!==e+1)){qe.eq(e)[a?"insertAfter":"insertBefore"](Oe[t].el);var n=e<t?e:a?t:t-1,i=e>t?e:a?t+1:t,r=e>t;null!=Ne.activeItem&&(e===Ne.activeItem?_e.active=Ne.activeItem=a?r?t+1:t:r?t:t-1:Ne.activeItem>n&&Ne.activeItem<i&&(_e.active=Ne.activeItem+=r?1:-1)),H()}}function J(e,t){for(var a=0,n=Ve[e].length;a<n;a++)if(Ve[e][a]===t)return a;return-1}function K(){at.released&&!ye.isPaused&&ye.resume()}function V(e){return E(d(e,xe.start,xe.end)/xe.end*(Ce.end-Ce.start))+Ce.start}function _(){at.history[0]=at.history[1],at.history[1]=at.history[2],at.history[2]=at.history[3],at.history[3]=at.delta}function ee(e){at.released=0,at.source=e,at.slidee="slidee"===e}function te(t){var a="touchstart"===t.type,n=t.data.source,i="slidee"===n;at.init||!a&&ie(t.target)||("handle"!==n||me.dragHandle&&xe.start!==xe.end)&&(i&&!(a?me.touchDragging:me.mouseDragging&&t.which<2)||(a||r(t),ee(n),at.init=0,at.$source=e(t.target),at.touch=a,at.pointer=a?t.originalEvent.touches[0]:t,at.initX=at.pointer.pageX,at.initY=at.pointer.pageY,at.initPos=i?Ce.cur:xe.cur,at.start=+new Date,at.time=0,at.path=0,at.delta=0,at.locked=0,at.history=[0,0,0,0],at.pathToLock=i?a?30:10:0,I.on(a?z:P,ae),ye.pause(1),(i?be:Be).addClass(me.draggedClass),he("moveStart"),i&&(rt=setInterval(_,10))))}function ae(e){if(at.released="mouseup"===e.type||"touchend"===e.type,at.pointer=at.touch?e.originalEvent[at.released?"changedTouches":"touches"][0]:e,at.pathX=at.pointer.pageX-at.initX,at.pathY=at.pointer.pageY-at.initY,at.path=D(A(at.pathX,2)+A(at.pathY,2)),at.delta=me.horizontal?at.pathX:at.pathY,at.released||!(at.path<1)){if(!at.init){if(at.path<me.dragThreshold)return at.released?ne():a;if(!(me.horizontal?x(at.pathX)>x(at.pathY):x(at.pathX)<x(at.pathY)))return ne();at.init=1}r(e),!at.locked&&at.path>at.pathToLock&&at.slidee&&(at.locked=1,at.$source.on(S,s)),at.released&&(ne(),me.releaseSwing&&at.slidee&&(at.swing=(at.delta-at.history[0])/40*300,at.delta+=at.swing,at.tweese=x(at.swing)>10)),X(at.slidee?E(at.initPos-at.delta):V(at.initPos+at.delta))}}function ne(){clearInterval(rt),at.released=!0,I.off(at.touch?z:P,ae),(at.slidee?be:Be).removeClass(me.draggedClass),setTimeout(function(){at.$source.off(S,s)}),Ce.cur===Ce.dest&&at.init&&he("moveEnd"),ye.resume(1),at.init=0}function ie(t){return~e.inArray(t.nodeName,T)||e(t).is(me.interactive)}function re(){ye.stop(),I.off("mouseup",re)}function se(e){switch(r(e),this){case $e[0]:case Qe[0]:ye.moveBy($e.is(this)?me.moveBy:-me.moveBy),I.on("mouseup",re);break;case Ze[0]:ye.prev();break;case Ge[0]:ye.next();break;case Je[0]:ye.prevPage();break;case Ke[0]:ye.nextPage()}}function oe(e){return nt.curDelta=(me.horizontal?e.deltaY||e.deltaX:e.deltaY)||-e.wheelDelta,nt.curDelta/=1===e.deltaMode?3:100,Re?(h=+new Date,nt.last<h-nt.resetTime&&(nt.delta=0),nt.last=h,nt.delta+=nt.curDelta,x(nt.delta)<1?nt.finalDelta=0:(nt.finalDelta=E(nt.delta/1),nt.delta%=1),nt.finalDelta):nt.curDelta}function le(e){e.originalEvent[m]=ye;var t=+new Date;if(N+me.scrollHijack>t&&We[0]!==document&&We[0]!==window)return void(N=t);if(me.scrollBy&&Ce.start!==Ce.end){var a=oe(e.originalEvent);(me.scrollTrap||a>0&&Ce.dest<Ce.end||a<0&&Ce.dest>Ce.start)&&r(e,1),ye.slideBy(me.scrollBy*a)}}function ce(e){me.clickBar&&e.target===Se[0]&&(r(e),X(V((me.horizontal?e.pageX-Se.offset().left:e.pageY-Se.offset().top)-ke/2)))}function de(e){if(me.keyboardNavBy)switch(e.which){case me.horizontal?37:38:r(e),ye["pages"===me.keyboardNavBy?"prevPage":"prev"]();break;case me.horizontal?39:40:r(e),ye["pages"===me.keyboardNavBy?"nextPage":"next"]()}}function ue(e){return ie(this)?void(e.originalEvent[m+"ignore"]=!0):void(this.parentNode!==be[0]||e.originalEvent[m+"ignore"]||ye.activate(this))}function fe(){this.parentNode===De[0]&&ye.activatePage(Ae.index(this))}function ve(e){me.pauseOnHover&&ye["mouseenter"===e.type?"pause":"resume"](2)}function he(e,t){if(Ve[e]){for(ge=Ve[e].length,k.length=0,pe=0;pe<ge;pe++)k.push(Ve[e][pe]);for(pe=0;pe<ge;pe++)k[pe].call(ye,e,t)}}if(!(this instanceof n))return new n(t,p,g);var pe,ge,me=e.extend({},n.defaults,p),ye=this,we=l(t),Ie=e(t),be=me.slidee?e(me.slidee).eq(0):Ie.children().eq(0),Pe=0,ze=0,Ce={start:0,center:0,end:0,cur:0,dest:0},Se=e(me.scrollBar).eq(0),Be=Se.children().eq(0),Te=0,ke=0,xe={start:0,end:0,cur:0},De=e(me.pagesBar),Ae=0,Ee=[],qe=0,Oe=[],Ne={firstItem:0,lastItem:0,centerItem:0,activeItem:null,activePage:0},He=new u(Ie[0]),Xe=new u(be[0]),Ye=new u(Se[0]),Me=new u(Be[0]),je="basic"===me.itemNav,Fe="forceCentered"===me.itemNav,Le="centered"===me.itemNav||Fe,Re=!we&&(je||Le||Fe),We=me.scrollSource?e(me.scrollSource):Ie,Ue=me.dragSource?e(me.dragSource):Ie,$e=e(me.forward),Qe=e(me.backward),Ze=e(me.prev),Ge=e(me.next),Je=e(me.prevPage),Ke=e(me.nextPage),Ve={},_e={},et={},tt={},at={released:1},nt={last:0,delta:0,resetTime:200},it=0,rt=0,st=0,ot=0;we||(t=Ie[0]),ye.initialized=0,ye.frame=t,ye.slidee=be[0],ye.pos=Ce,ye.rel=Ne,ye.items=Oe,ye.pages=Ee,ye.isPaused=0,ye.options=me,ye.dragging=at,ye.reload=function(){H()},ye.getPos=function(e){if(Re){var t=R(e);return t!==-1&&Oe[t]}var a=be.find(e).eq(0);if(a[0]){var n=me.horizontal?a.offset().left-be.offset().left:a.offset().top-be.offset().top,i=a[me.horizontal?"outerWidth":"outerHeight"]();return{start:n,center:n-Pe/2+i/2,end:n-Pe+i,size:i}}return!1},ye.moveBy=function(e){tt.speed=e,!at.init&&tt.speed&&Ce.cur!==(tt.speed>0?Ce.end:Ce.start)&&(tt.lastTime=+new Date,tt.startPos=Ce.cur,ee("button"),at.init=1,he("moveStart"),y(ot),F())},ye.stop=function(){"button"===at.source&&(at.init=0,at.released=1)},ye.prev=function(){ye.activate(null==Ne.activeItem?0:Ne.activeItem-1)},ye.next=function(){ye.activate(null==Ne.activeItem?0:Ne.activeItem+1)},ye.prevPage=function(){ye.activatePage(Ne.activePage-1)},ye.nextPage=function(){ye.activatePage(Ne.activePage+1)},ye.slideBy=function(e,t){e&&(Re?ye[Le?"toCenter":"toStart"](d((Le?Ne.centerItem:Ne.firstItem)+me.scrollBy*e,0,Oe.length)):X(Ce.dest+e,t))},ye.slideTo=function(e,t){X(e,t)},ye.toStart=function(e,t){L("start",e,t)},ye.toEnd=function(e,t){L("end",e,t)},ye.toCenter=function(e,t){L("center",e,t)},ye.getIndex=R,ye.activate=function(e,t){var a=U(e);me.smart&&a!==!1&&(Le?ye.toCenter(a,t):a>=Ne.lastItem?ye.toStart(a,t):a<=Ne.firstItem?ye.toEnd(a,t):K())},ye.activatePage=function(e,t){l(e)&&X(Ee[d(e,0,Ee.length-1)],t)},ye.resume=function(e){me.cycleBy&&me.cycleInterval&&("items"!==me.cycleBy||Oe[0]&&null!=Ne.activeItem)&&!(e<ye.isPaused)&&(ye.isPaused=0,st?st=clearTimeout(st):he("resume"),st=setTimeout(function(){switch(he("cycle"),me.cycleBy){case"items":ye.activate(Ne.activeItem>=Oe.length-1?0:Ne.activeItem+1);break;case"pages":ye.activatePage(Ne.activePage>=Ee.length-1?0:Ne.activePage+1)}},me.cycleInterval))},ye.pause=function(e){e<ye.isPaused||(ye.isPaused=e||100,st&&(st=clearTimeout(st),he("pause")))},ye.toggle=function(){ye[st?"pause":"resume"]()},ye.set=function(t,a){e.isPlainObject(t)?e.extend(me,t):me.hasOwnProperty(t)&&(me[t]=a)},ye.add=function(t,a){var n=e(t);Re?(null==a||!Oe[0]||a>=Oe.length?n.appendTo(be):Oe.length&&n.insertBefore(Oe[a].el),null!=Ne.activeItem&&a<=Ne.activeItem&&(_e.active=Ne.activeItem+=n.length)):be.append(n),H()},ye.remove=function(t){if(Re){var a=W(t);if(a>-1){qe.eq(a).remove();var n=a===Ne.activeItem;null!=Ne.activeItem&&a<Ne.activeItem&&(_e.active=--Ne.activeItem),H(),n&&(_e.active=null,ye.activate(Ne.activeItem))}}else e(t).remove(),H()},ye.moveAfter=function(e,t){G(e,t,1)},ye.moveBefore=function(e,t){G(e,t)},ye.on=function(e,t){if("object"===i(e))for(var a in e)e.hasOwnProperty(a)&&ye.on(a,e[a]);else if("function"===i(t))for(var n=e.split(" "),r=0,s=n.length;r<s;r++)Ve[n[r]]=Ve[n[r]]||[],J(n[r],t)===-1&&Ve[n[r]].push(t);else if("array"===i(t))for(var o=0,l=t.length;o<l;o++)ye.on(e,t[o])},ye.one=function(e,t){function a(){t.apply(ye,arguments),ye.off(e,a)}ye.on(e,a)},ye.off=function(e,t){if(t instanceof Array)for(var a=0,n=t.length;a<n;a++)ye.off(e,t[a]);else for(var i=e.split(" "),r=0,s=i.length;r<s;r++)if(Ve[i[r]]=Ve[i[r]]||[],null==t)Ve[i[r]].length=0;else{var o=J(i[r],t);o!==-1&&Ve[i[r]].splice(o,1)}},ye.destroy=function(){return n.removeInstance(t),We.add(Be).add(Se).add(De).add($e).add(Qe).add(Ze).add(Ge).add(Je).add(Ke).off("."+m),I.off("keydown",de),Ze.add(Ge).add(Je).add(Ke).removeClass(me.disabledClass),qe&&null!=Ne.activeItem&&qe.eq(Ne.activeItem).removeClass(me.activeClass),De.empty(),we||(Ie.off("."+m),He.restore(),Xe.restore(),Ye.restore(),Me.restore(),e.removeData(t,m)),Oe.length=Ee.length=0,_e={},ye.initialized=0,ye},ye.init=function(){if(!ye.initialized){if(n.getInstance(t))throw new Error("There is already a Sly instance on this element");n.storeInstance(t,ye),ye.on(g);var e=["overflow","position"],a=["position","webkitTransform","msTransform","transform","left","top","width","height"];He.save.apply(He,e),Ye.save.apply(Ye,e),Xe.save.apply(Xe,a),Me.save.apply(Me,a);var i=Be;return we||(i=i.add(be),Ie.css("overflow","hidden"),f||"static"!==Ie.css("position")||Ie.css("position","relative")),f?v&&i.css(f,v):("static"===Se.css("position")&&Se.css("position","relative"),i.css({position:"absolute"})),me.forward&&$e.on(B,se),me.backward&&Qe.on(B,se),me.prev&&Ze.on(S,se),me.next&&Ge.on(S,se),me.prevPage&&Je.on(S,se),me.nextPage&&Ke.on(S,se),We.on(C,le),Se[0]&&Se.on(S,ce),Re&&me.activateOn&&Ie.on(me.activateOn+"."+m,"*",ue),De[0]&&me.activatePageOn&&De.on(me.activatePageOn+"."+m,"*",fe),Ue.on(b,{source:"slidee"},te),Be&&Be.on(b,{source:"handle"},te),I.on("keydown",de),we||(Ie.on("mouseenter."+m+" mouseleave."+m,ve),Ie.on("scroll."+m,o)),ye.initialized=1,H(!0),me.cycleBy&&!we&&ye[me.startPaused?"pause":"resume"](),ye}}}function i(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof e}function r(e,t){e.preventDefault(),t&&e.stopPropagation()}function s(t){r(t,1),e(this).off(t.type,s)}function o(){this.scrollLeft=0,this.scrollTop=0}function l(e){return!isNaN(parseFloat(e))&&isFinite(e)}function c(e,t){return 0|E(String(e.css(t)).replace(/[^\-0-9.]/g,""))}function d(e,t,a){return e<t?t:e>a?a:e}function u(e){var t={};return t.style={},t.save=function(){if(e&&e.nodeType){for(var a=0;a<arguments.length;a++)t.style[arguments[a]]=e.style[arguments[a]];return t}},t.restore=function(){if(e&&e.nodeType){for(var a in t.style)t.style.hasOwnProperty(a)&&(e.style[a]=t.style[a]);return t}},t}var f,v,h,p="sly",g="Sly",m=p,y=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,w=t.requestAnimationFrame,I=e(document),b="touchstart."+m+" mousedown."+m,P="mousemove."+m+" mouseup."+m,z="touchmove."+m+" touchend."+m,C=(document.implementation.hasFeature("Event.wheel","3.0")?"wheel.":"mousewheel.")+m,S="click."+m,B="mousedown."+m,T=["INPUT","SELECT","BUTTON","TEXTAREA"],k=[],x=Math.abs,D=Math.sqrt,A=Math.pow,E=Math.round,q=Math.max,O=Math.min,N=0;I.on(C,function(e){var t=e.originalEvent[m],a=+new Date;(!t||t.options.scrollHijack<a-N)&&(N=a)}),n.getInstance=function(t){return e.data(t,m)},n.storeInstance=function(t,a){return e.data(t,m,a)},n.removeInstance=function(t){return e.removeData(t,m)},function(e){function t(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-a)),i=setTimeout(e,n);return a=t,i}w=e.requestAnimationFrame||e.webkitRequestAnimationFrame||t;var a=(new Date).getTime(),n=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.clearTimeout;y=function(t){n.call(e,t)}}(window),function(){function e(e){for(var n=0,i=t.length;n<i;n++){var r=t[n]?t[n]+e.charAt(0).toUpperCase()+e.slice(1):e;if(null!=a.style[r])return r}}var t=["","Webkit","Moz","ms","O"],a=document.createElement("div");f=e("transform"),v=e("perspective")?"translateZ(0) ":""}(),t[g]=n,e.fn[p]=function(t,a){var r,s;return e.isPlainObject(t)||("string"!==i(t)&&t!==!1||(r=t===!1?"destroy":t,s=Array.prototype.slice.call(arguments,1)),t={}),this.each(function(e,i){var o=n.getInstance(i);o||r?o&&r&&o[r]&&o[r].apply(o,s):o=new n(i,t,a).init()})},n.defaults={slidee:null,horizontal:!1,itemNav:null,itemSelector:null,smart:!1,activateOn:null,activateMiddle:!1,scrollSource:null,scrollBy:0,scrollHijack:300,scrollTrap:!1,dragSource:null,mouseDragging:!1,touchDragging:!1,releaseSwing:!1,swingSpeed:.2,elasticBounds:!1,dragThreshold:3,interactive:null,scrollBar:null,dragHandle:!1,dynamicHandle:!1,minHandleSize:50,clickBar:!1,syncSpeed:.5,pagesBar:null,activatePageOn:null,pageBuilder:function(e){return"<li>"+(e+1)+"</li>"},forward:null,backward:null,prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5e3,pauseOnHover:!1,startPaused:!1,moveBy:300,speed:0,easing:"swing",startAt:null,keyboardNavBy:null,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}}(jQuery,window);
var isChrome=!!navigator.webkitGetUserMedia,DetectRTC={};!function(){var e;DetectRTC.screen={chromeMediaSource:"screen",getSourceId:function(o){if(!o)throw'"callback" parameter is mandatory.';e=o,window.postMessage("get-sourceId","*")},isChromeExtensionAvailable:function(e){if(e){if("desktop"==DetectRTC.screen.chromeMediaSource)return e(!0);window.postMessage("are-you-there","*"),setTimeout(function(){e("screen"==DetectRTC.screen.chromeMediaSource?!1:!0)},2e3)}},onMessageCallback:function(o){var t=window.EXT_ID,r="https://chrome.google.com/webstore/detail/tessa-presentation/"+t;if("string"==typeof o||o.sourceId){if("PermissionDeniedError"==o){if(DetectRTC.screen.chromeMediaSource="PermissionDeniedError",e)return e("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==o&&(console.log('<strong>Great!</strong> <a href="'+r+'" target="_blank">Google chrome extension</a> is installed.'),DetectRTC.screen.chromeMediaSource="desktop"),o.sourceId&&(DetectRTC.screen.sourceId=o.sourceId,e&&e(DetectRTC.screen.sourceId))}},getChromeExtensionStatus:function(e){if(navigator.mozGetUserMedia)return e("not-chrome");var o=window.EXT_ID,t=document.createElement("img");t.src="chrome-extension://"+o+"/img/desktopCapture48.png",t.onload=function(){DetectRTC.screen.chromeMediaSource="desktop",window.postMessage("are-you-there","*"),setTimeout(function(){DetectRTC.screen.notInstalled||e("installed-enabled")},2e3)},t.onerror=function(){DetectRTC.screen.notInstalled=!0,e("not-installed")}}},window.postMessage&&isChrome&&DetectRTC.screen.isChromeExtensionAvailable()}(),window.addEventListener("message",function(e){e.origin==window.location.origin&&DetectRTC.screen.onMessageCallback(e.data)});
!function(){"use strict";angular.module("tessa-presentation",["angular-uuid","ng.deviceDetector"]).constant("WS_URL","localhost:3000").constant("API_URL","http://localhost:3000").config(["$stateProvider","$urlRouterProvider","localStorageServiceProvider",function(t,e,o){o.setPrefix("tessaP").setStorageType("sessionStorage").setNotify(!0,!0)}])}();
function AngularUUID(){"use strict";function n(n){function r(n,r,e){var u=r&&e||0,a=0;for(r=r||[],n.toLowerCase().replace(/[0-9a-f]{2}/g,function(n){a<16&&(r[u+a++]=g[n])});a<16;)r[u+a++]=0;return r}function e(n,r){var e=r||0,u=v;return u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]}function u(n,r,u){var a=r&&u||0,o=r||[];n=n||{};var t=null!=n.clockseq?n.clockseq:p,f=null!=n.msecs?n.msecs:(new Date).getTime(),l=null!=n.nsecs?n.nsecs:h+1,c=f-U+(l-h)/1e4;if(c<0&&null==n.clockseq&&(t=t+1&16383),(c<0||f>U)&&null==n.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");U=f,h=l,p=t,f+=122192928e5;var i=(1e4*(268435455&f)+l)%4294967296;o[a++]=i>>>24&255,o[a++]=i>>>16&255,o[a++]=i>>>8&255,o[a++]=255&i;var s=f/4294967296*1e4&268435455;o[a++]=s>>>8&255,o[a++]=255&s,o[a++]=s>>>24&15|16,o[a++]=s>>>16&255,o[a++]=t>>>8|128,o[a++]=255&t;for(var d=n.node||y,v=0;v<6;v++)o[a+v]=d[v];return r?r:e(o)}function a(n,r,u){var a=r&&u||0;"string"==typeof n&&(r="binary"===n?new d(16):null,n=null),n=n||{};var t=n.random||(n.rng||o)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,r)for(var f=0;f<16;f++)r[a+f]=t[f];return r||e(t)}var o,t,f,l=n.crypto||n.msCrypto;if(!o&&l&&l.getRandomValues)try{var c=new Uint8Array(16);f=o=function(){return l.getRandomValues(c),c},o()}catch(i){}if(!o){var s=new Array(16);t=o=function(){for(var n,r=0;r<16;r++)0===(3&r)&&(n=4294967296*Math.random()),s[r]=n>>>((3&r)<<3)&255;return s},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}for(var d="function"==typeof Buffer?Buffer:Array,v=[],g={},m=0;m<256;m++)v[m]=(m+256).toString(16).substr(1),g[v[m]]=m;var w=o(),y=[1|w[0],w[1],w[2],w[3],w[4],w[5]],p=16383&(w[6]<<8|w[7]),U=0,h=0,A=a;return A.v1=u,A.v4=a,A.parse=r,A.unparse=e,A.BufferClass=d,A._rng=o,A._mathRNG=t,A._whatwgRNG=f,A}angular.module("angular-uuid",[]).factory("uuid",["$window",n])}"undefined"!=typeof module&&module.exports?module.exports=new AngularUUID:"undefined"!=typeof define&&define.amd?define(function(){return new AngularUUID}):AngularUUID();
!function(){"use strict";angular.module("tessa-presentation").controller("GlobalCtrl",["$scope","uuid","localStorageService","socket","deviceDetector","$interval","$sce","$timeout","API_URL","$state",function(e,t,o,s,i,n,r,a,c,l){var u=o.get("uuid");if(!u){var u=t.v4();console.log(u),o.set("uuid",u)}e.hash=u,e.deviceDetector=i,e.isConnected=!1,e.pdfName="",e.file_type="",e.audio=null,e.asset_file={},e.roomId="",e.userId="",e.disablePreview=!1,e.config={};var p,d=document.querySelector("#frames-container");e.init=function(){e.stop(),p=n(function(){s.emit("pair:deviceUUID",{browser:i.browser,browser_version:i.browser_version,device:i.device,os:i.os,os_version:i.os_version,deviceType:"presentation",deviceUUID:u})},1e3)},e.stop=function(){n.cancel(p)},e.init(),e.loadFile=function(t){e.file_type=t.asset_mimetype,"audio"==t.asset_type?(e.audio=!0,a(function(){e.$apply(function(){e.config={autoPlay:!0,sources:[{src:r.trustAsResourceUrl(t.asset_url),type:t.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})},10)):"video"==t.asset_type?(e.audio=!1,a(function(){e.$apply(function(){e.config={autoPlay:!0,sources:[{src:r.trustAsResourceUrl(t.asset_url),type:t.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})},10)):(e.audio=null,e.pdfName=t.media_name,"application/pdf"==t.asset_mimetype?a(function(){e.$apply(function(){e.pdfUrl=r.trustAsResourceUrl(t.asset_url)})},10):"text/plain"==t.asset_mimetype?a(function(){e.$apply(function(){e.pdfUrl=r.trustAsResourceUrl("https://docs.google.com/gview?url="+t.asset_url+"&embedded=true")})},10):a(function(){e.$apply(function(){e.pdfUrl=r.trustAsResourceUrl("https://view.officeapps.live.com/op/view.aspx?src="+t.asset_url)})},10))},s.on("pair:init",function(){console.log("pair:init")}),s.on("pair:connected",function(t){console.log("pair:connected: ",t),e.isConnected=!0,e.stop(),e.roomId=c,e.userId=t.asset_file.deviceUUID,e.asset_file=t.asset_file}),s.on("pair:closePresentation",function(){a(function(){e.$apply(function(){e.isConnected=!1,e.config={},e.pdfUrl={},l.reload()})},10)}),s.on("pair:fail",function(){e.isConnected=!1,e.init()}),s.on("pair:screenshotR",function(t){console.log("screenshotR: ",t),e.isConnected=!0,d.innerHTML="";var o=document.createElement("img"),s=(new XMLSerializer).serializeToString(t),i="data:image/svg+xml;base64,"+btoa(s);o.src=i,o.style.top=0,o.style.bottom=0,o.style.right=0,o.style.left=0,o.style.width="100%",o.style.height="100%",d.appendChild(o)})}])}();